<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ä¼ä¸šä¸­çš„å‰ç«¯å¼€å‘</title>
      <link href="/2022/11/14/qi-ye-zhong-de-qian-duan-kai-fa/"/>
      <url>/2022/11/14/qi-ye-zhong-de-qian-duan-kai-fa/</url>
      
        <content type="html"><![CDATA[<p>å¦‚ä»Šä»äº‹å‰ç«¯å¼€å‘å°†è¿‘å››å¹´ï¼Œç»æ‰‹å¤§æ¦‚ 6-7 ä¸ªé¡¹ç›®äº†ï¼Œå‘ç°ç›®å‰ä»ç„¶å­˜åœ¨çš„ä¸€äº›å‰ç«¯é—®é¢˜ã€‚</p><ul><li>æ•°æ®ï¼ˆæ¨¡å‹ï¼‰é—®é¢˜</li><li>ä»£ç çº¦æŸé—®é¢˜</li></ul><h2 id="æ•°æ®ï¼ˆæ¨¡å‹ï¼‰é—®é¢˜">æ•°æ®ï¼ˆæ¨¡å‹ï¼‰é—®é¢˜</h2><p>å‰ç«¯å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸å¯é¿å…çš„ä¸¤ä¸ªé—®é¢˜ç‚¹<em>è§†å›¾&amp;æ•°æ®</em>ï¼Œè§†å›¾è´Ÿè´£å±•ç¤ºï¼Œæ•°æ®è´Ÿè´£å¡«å……è§†å›¾ã€‚</p><p>æ•°æ®æµ‹åˆ†ä¸ºä¸¤ç§ç±»å‹</p><ul><li>è‡ªæœ‰æ•°æ®</li><li>ä¸‰æ–¹æ•°æ®</li></ul><p>åœ¨æˆ‘å¼€å‘çš„é¡¹ç›®ä¸­ï¼Œå‰åç«¯è”è°ƒä¸»è¦å‡­å€Ÿï¼Œæ–‡æ¡£çº¦æŸï¼Œå£å¤´çº¦æŸï¼Œä¿¡ä»»çº¦æŸã€‚</p><p>è€Œè¿™ä¸‰ç§çº¦æŸåŸºæœ¬æ²¡ä¸€ä¸ªæ˜¯é è°±çš„ï¼Œå°±åƒ rust ç¼–ç¨‹ä¸€æ ·ï¼Œæˆ‘ä»¬åº”è¯¥å°†è¿™ç§å¤–æ¥ä¾èµ–ç¼–è¾‘ä¸º<code>unsafe</code>ç±»å‹ä»¥æ¥ã€‚</p><p>ä»è€Œåšä¸€äº›é˜²å¾¡æ€§ç¼–ç¨‹ï¼Œæ¯”å¦‚æ•°æ®ä½¿ç”¨<code>?</code>è¿›è¡Œè°ƒç”¨ã€‚</p><p>è€Œè‡ªæœ‰æ•°æ®ï¼Œåˆ™æ˜¯ç¨³å®šçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥é€šè¿‡å¼ºå¤§çš„ ts å®Œæˆå®Œæ•´çš„ç±»å‹ç¼–å†™ã€‚</p><p>ç”±äºä¸‰æ–¹æ¥å£çš„ä¸ç¨³å®šï¼Œæˆ‘ä»¬åº”è¯¥å‡å®šä»–çš„æ•°æ®éƒ½æ˜¯å¯ null çš„</p><h2 id="ä»£ç çº¦æŸé—®é¢˜">ä»£ç çº¦æŸé—®é¢˜</h2><p>åœ¨ä¼ä¸šå¼€å‘ä¸­ï¼Œé«˜é€Ÿè¿­ä»£å’Œç¨³å®šï¼Œå¯ç»´æŠ¤è‡³å…³é‡è¦ã€‚</p><p>ç°ä»Šçš„æ‰‹è„šæ¶ï¼Œè§£å†³äº†åŒç±»é¡¹ç›®æ¨¡ç‰ˆé—®é¢˜ï¼Œä½†æ˜¯æ²¡æœ‰è§£å†³é•¿æœŸçº¦æŸã€‚</p><p>ä¹Ÿå°±æ˜¯ä»£ç è´¨é‡çº¦æŸï¼Œé‚£ä¹ˆå¦‚æœæƒ³è¦åšåˆ°ä»£ç è´¨é‡,åº”è¯¥åˆ†ä¸€ä¸‹å‡ ç‚¹è¿›è¡Œã€‚</p><p>ç©·ä¸¾åœºæ™¯</p><ul><li>h5 ç±»å‹ï¼ŒC ç«¯ç±»ï¼Œè¡¨å•ç±»</li><li>pc ç±»å‹ï¼ŒB ç«¯ç±»ï¼ŒC ç«¯ç±»</li></ul><p>è¿™äº›ç±»å‹çš„åœºæ™¯ï¼Œéƒ½å›´ç»•å‡ ä¸ªç‚¹</p><p>è·¯ç”±ã€ç»„ä»¶ã€‚</p><pre><code class="hljs">è·¯ç”±<span class="hljs-code">    é¡µé¢ç»„ä»¶        åŒºåŸŸç»„ä»¶            åŸºç¡€ç»„ä»¶</span></code></pre><p>å±‚å±‚é€’å½’çš„ç»„å±‚ç»“æ„ï¼Œå½“ä¸‹ eslintï¼Œprettier å°†åœ¨ä¸€å®šå±‚åº¦åªæ˜¯è§£å†³äº†ä»£ç é£æ ¼çš„é—®é¢˜ï¼Œå¯¹äºä¼ä¸šå¼€å‘ï¼Œè¦çš„ä¸æ˜¯çµæ´»è€Œæ˜¯æ›´å¤šçš„çº¦æŸã€‚</p><p>ä¸ºä»€ä¹ˆéœ€è¦æ›´å¤šçš„çº¦æŸï¼Ÿ</p><ul><li>ä»£ç æ›´åŠ æ¨¡ç‰ˆåŒ–</li><li>ä»£ç é£æ ¼ä¸€è‡´</li><li>å°†ä¸šåŠ¡å¼€å‘ä¸æœ€ä½³å®è·µè°ƒç ”åˆ†ç¦»ï¼Œæé«˜å¼€å‘æ•ˆç‡</li></ul><p>è¿™éƒ¨åˆ†çš„è§£å†³æ–¹æ¡ˆæ˜¯é€šè¿‡æ›´åŠ é¡¹ç›®åŒ–çš„ eslint è¿›è¡Œè§„åˆ™çº¦æŸã€‚</p><p>åœ¨æœ€è¿‘ä¸€æ®µæ—¶é—´å†…ï¼Œæˆ‘å†™äº† golang rust java javascript, æˆ‘è§‰å¾—å…¬å¸å†…éƒ¨çš„ java å¯¹äºè¿™æ–¹é¢åšçš„æ˜¯æœ€å¥½çš„ã€‚</p><p>javascript è™½ç„¶ä¹Ÿæœ‰è¿™ä¸€å®šå±‚åº¦çš„åˆ†å±‚ï¼Œä½†æ˜¯æ¯ä¸ªé¡¹ç›®éƒ½ä¸ä¸€æ ·ï¼Œæˆ‘è¿›å…¥é¡¹ç›®çš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯ææ‡‚ï¼Œä»£ç æ˜¯æ€ä¹ˆåˆ’åˆ†çš„ï¼Œååˆ†æµªè´¹æ—¶é—´ã€‚</p><p>è€Œä¸Šé¢è¯´çš„çº¦æŸæ˜¯å¯ä»¥é€šè¿‡ eslint çš„æ’ä»¶è¿›è¡Œå¼€å‘çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> post </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>nginxç®¡ç†å¹³å°</title>
      <link href="/2022/09/02/nginx-guan-li-ping-tai/"/>
      <url>/2022/09/02/nginx-guan-li-ping-tai/</url>
      
        <content type="html"><![CDATA[<p>æƒ³åšä¸€ä¸ª nginx ç®¡ç†å¹³å°ï¼Œä»¥é«˜å¯æ‹“å±•æ€§ä½œä¸ºæˆ˜ç•¥æ–¹å‘ã€‚</p><p>ç”±æ­¤éœ€è¦è®¾è®¡ä¸€ä¸ªéå¸¸éå¸¸çµæ´»çš„å¯æ‹“å±•ç•Œé¢ï¼Œä»¥åŠæ’ä»¶ç³»ç»Ÿã€‚</p><p>ä¸ºä»€ä¹ˆè¦æè¿™ä»¶äº‹ï¼Ÿ</p><ul><li>nginx é…ç½®éº»çƒ¦</li><li>ä¸­å°å‹å…¬å¸ä¸€èˆ¬å°±å‡ å°æˆ–è€…ä¸€å° nginx å¤„ç†å‰åç«¯èµ„æºï¼Œä¸æ˜“äºç®¡ç†</li><li>å¯¹å¤–å¯ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ï¼Œå¯¹å†…å¯æµ‹è¯•å¼€å‘ä½¿ç”¨ï¼Œé€šè¿‡njsè¿›è¡Œæ‹“å±•(ä¸€ä¸ªå°å‹ç½‘å…³ï¼Ÿ)</li></ul><h3 id="ç›®å½•ç»“æ„">ç›®å½•ç»“æ„</h3><ul><li>æ’ä»¶å¸‚åœº</li><li>ç¼–å†™æ’ä»¶æ¨¡å—</li><li>ç®¡ç†æ’ä»¶æ¨¡å—</li><li>ç™»å½•ï¼ˆç”¨æˆ·ï¼‰ä½ä¼˜å…ˆçº§</li></ul><h3 id="è¡¨è®¾è®¡">è¡¨è®¾è®¡</h3><pre><code class="hljs">æ¯ä¸ªè¡¨éƒ½æœ‰è¿™å‡ ä¸ªå­—æ®µ|<span class="hljs-string">created_time</span>|<span class="hljs-string">bigint</span>||<span class="hljs-string">updated_time</span>|<span class="hljs-string">bigint</span>||<span class="hljs-string">deleted_time</span>|<span class="hljs-string">bigint</span>|</code></pre><p>plugin:</p><table><thead><tr><th>field</th><th>type</th></tr></thead><tbody><tr><td>plugin_name</td><td>varchar(128)</td></tr><tr><td>id</td><td>bigint</td></tr><tr><td>author</td><td>varchar(128)</td></tr></tbody></table><p>plugin schema config:</p><table><thead><tr><th>field</th><th>type</th></tr></thead><tbody><tr><td>config</td><td>text</td></tr><tr><td>id</td><td>bigint</td></tr><tr><td>config data</td><td>text</td></tr></tbody></table><p>åç«¯ä½¿ç”¨ golang (å¯ä»¥æ‰“å‡ºæ¥ä¸€ä¸ªå¯æ‰§è¡ŒåŒ…è¿™ä¸ªè¯±æƒ‘åŠ›å¤ªå¤§äº†)<br>å‰ç«¯ä½¿ç”¨ react + react jsonschema + mui<br>æ•°æ®åº“æš‚æ—¶ä½¿ç”¨ sqlite</p><p>æ ¸å¿ƒæ’ä»¶ï¼š<br><s>nginx config æ’ä»¶ï¼Œç”¨æ¥é…ç½® nginx</s><a href="https://github.com/nginx/njs/issues/10">çœ‹æ¥ä¸è¡Œï¼Œä¸èƒ½æ‰§è¡Œreload</a></p><p>æ¶æ„å˜åŒ–ä¸€ä¸‹</p><p>golang client å»åšè¿™ä»¶äº‹</p><pre class="mermaid">flowchart TDA[å‰ç«¯é¡µé¢]-->B[golang server]-->C[golang client]-->D[nginx]</pre><h3 id="æµç¨‹">æµç¨‹</h3><p><strong>è¯·æ±‚æµç¨‹</strong></p><pre class="mermaid">flowchart TDA[å¼€å§‹] --> B{æ˜¯å¦ä½¿ç”¨æ’ä»¶?}B --> |æ˜¯| C[ä½¿ç”¨æ’ä»¶æ§åˆ¶]B --> |å¦| D[é»˜è®¤é…ç½®]</pre><p><strong>é…ç½®æ’ä»¶æµç¨‹</strong></p><pre class="mermaid">flowchart TBA[å¼€å¯æ’ä»¶/æ›´æ–°æ’ä»¶] --> B[golang server send a request] --> C[golang client update nginx config]</pre><h3 id="é—®é¢˜">é—®é¢˜</h3><ol><li><p>ç”±äºnjsä¸èƒ½æ‰§è¡Œshï¼Œæ‰€ä»¥njsæ˜¯å­˜åœ¨å±€é™æ€§çš„ï¼Œå¯ä»¥é€šè¿‡å› ä¸ºgolang clientè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯å­˜åœ¨ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼Œå¦‚ä½•æ‹“å±•nginxé…ç½®å‘¢ï¼Ÿ</p><p>å¯¹äºä¸€äº›æ­£åˆ™è¿‡æ»¤å®é™…ä¸Šä¸éœ€è¦njsçš„ï¼Œæ‰€ä»¥éœ€è¦å°†å·²ç»å­˜åœ¨çš„é…ç½®æ ¼å¼åŒ–ï¼Œå·²ç»å­˜åœ¨çš„ä¾¿æ·é…ç½®ä¸éœ€è¦è¿›è¡Œnjså¤„ç†ï¼Œæ¯”å¦‚è¯·æ±‚å¤´æ ‡è¯†ã€‚<br>å¯¹äºä¸å­˜åœ¨çš„é…ç½®éœ€è¦njså¤„ç†ï¼Œæ¯”å¦‚æ·»åŠ æ°´å°ï¼Œæ³¨å…¥js</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> post </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2022/08/31/v2022-08-31-15-15/"/>
      <url>/2022/08/31/v2022-08-31-15-15/</url>
      
        <content type="html"><![CDATA[<p>çœ‹æ¥æ²¡ä»€ä¹ˆå¥½çš„å‘å±•æ–¹å‘ï¼Œä¸å¦‚ä»åˆ«çš„æ–¹é¢æå‡è‡ªå·±ï¼Œæ¯”å¦‚å‡å°‘bugæ•°é‡ï¼Œæé«˜ä»£ç è´¨é‡ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> weibo </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å‘å±•æ–¹å‘</title>
      <link href="/2022/08/31/qian-duan-fa-zhan-fang-xiang-qian-xi/"/>
      <url>/2022/08/31/qian-duan-fa-zhan-fang-xiang-qian-xi/</url>
      
        <content type="html"><![CDATA[<p>é•¿æœŸæ›´æ–°</p><p>æ›´æ–°æ—¶é—´ï¼š20220831</p><p>ä»ç›®å‰çœ‹å‰ç«¯å¤§è‡´åˆ†ä¸ºï¼Œä¼ ç»Ÿæ„ä¹‰çš„å‰ç«¯ï¼Œè¾…åŠ©ä¼ ç»Ÿæ„ä¹‰çš„å‰ç«¯çš„å·¥å…·å±‚ï¼Œçº¯åç«¯ã€‚</p><pre class="mermaid">flowchart BTçº¯åç«¯-->nodeå·¥å…·å±‚-->å‰ç«¯</pre><h2 id="å‰ç«¯">å‰ç«¯</h2><p>å‰ç«¯å°±æ˜¯ä¼ ç»Ÿæ„ä¹‰çš„ç•Œé¢ï¼Œè¿™éƒ¨åˆ†åŒ…å«</p><pre class="mermaid">flowchart TBå‰ç«¯-->ç›‘æ§åŸ‹ç‚¹ & ç»„ä»¶åº“ & å¼€å‘æ¡†æ¶ & æ ·å¼æ¡†æ¶ & å·¥å…·åº“</pre><ul><li>ç›‘æ§åŸ‹ç‚¹<ul><li>æ¥è¯´bç«¯å¯æœ‰å¯æ— ï¼Œä½†æ˜¯ä»éœ€è¦è¯·æ±‚å±‚ç›‘æ§ï¼Œå¦‚æœå‘ç°é—®é¢˜å¯ä»¥å’Œåç«¯å¯¹è´¦</li></ul></li><li>ç»„ä»¶åº“<ul><li>ä¸€èˆ¬éƒ½ä¼šé€‰ä¸ªå¸‚é¢å¼€æºçš„ï¼Œå¸‚é¢ä¸Šæœ‰å¾ˆå¤šå¼€æºç»„ä»¶åº“æ¯”å¦‚antd ç³»åˆ—</li></ul></li><li>å¼€å‘æ¡†æ¶<ul><li>vue react svelet</li><li>å“åº”å¼ï¼Œå‡½æ•°å¼ï¼Œç¼–è¯‘å‹å“åº”å¼è¿™å‡ ç±»</li><li>å¦‚æœæ˜¯æ¶µç›–å°ç¨‹åºå¼€å‘ï¼Œå¯ä½¿ç”¨vueçš„uni app æˆ–è€…react çš„taro</li></ul></li><li>æ ·å¼æ¡†æ¶<ul><li>less sass <code>css in js</code></li><li>ç›®å‰çœ‹å›½å†…lessæ¯”è¾ƒå¤š <code>css in js</code>è¿˜æ˜¯è›®å°‘çš„</li></ul></li><li>å·¥å…·åº“<ul><li>i18n lodash rxjs bignumber moment/dayjs</li></ul></li></ul><h2 id="node-å·¥å…·å±‚">node å·¥å…·å±‚</h2><p>è¾…åŠ©å‰ç«¯å¼€å‘çš„å·¥å…·</p><pre class="mermaid">flowchart TBè¾…åŠ©å·¥å…·-->lint/æ ¼å¼åŒ–å·¥å…· & æ‰“åŒ…å·¥å…· & ç¼–è¯‘å·¥å…·</pre><ul><li>lint/æ ¼å¼åŒ–å·¥å…·<ul><li>eslint prettify</li></ul></li><li>æ‰“åŒ…å·¥å…·<ul><li>webpack vite</li><li>è¿™äº›å·¥å…·å¤§éƒ¨åˆ†å¼€ç®±å³ç”¨</li></ul></li><li>ç¼–è¯‘å·¥å…·<ul><li>esbuild swc babel</li></ul></li></ul><h2 id="çº¯åç«¯">çº¯åç«¯</h2><pre class="mermaid">flowchart TBåç«¯-->æœåŠ¡ç«¯æ¸²æŸ“ & æœåŠ¡ç«¯å¼€å‘</pre><ul><li>æœåŠ¡ç«¯æ¸²æŸ“<ul><li>next nuxt remix</li></ul></li><li>æœåŠ¡ç«¯å¼€å‘<ul><li>æœåŠ¡å±‚ nestjs express koa</li><li>orm å±‚ typeorm prisma</li></ul></li></ul><h2 id="æ¯”è¾ƒç»†åˆ†å‰ç«¯çš„ç±»ç›®">æ¯”è¾ƒç»†åˆ†å‰ç«¯çš„ç±»ç›®</h2><ul><li>æ¸¸æˆå¼€å‘</li><li>éŸ³è§†é¢‘å¼€å‘</li><li>wasmå¼€å‘</li><li>åœ¨çº¿æ–‡æ¡£å¼€å‘</li><li>å¤šç«¯å¼€å‘</li></ul><h2 id="æ€»ç»“">æ€»ç»“</h2><p>æ€»çš„æ¥è®²åŸºæœ¬å¾ˆéš¾åœ¨å‘æ˜é¢ è¦†æ€§çš„ä¸œè¥¿ï¼Œä½†æ˜¯ä»ç„¶å¯ä»¥åŸºäºå·²æœ‰çš„æ€ç»´å»å¢é‡åˆ›æ–°ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> post </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>lua-geneator</title>
      <link href="/2022/06/18/lua-geneator/"/>
      <url>/2022/06/18/lua-geneator/</url>
      
        <content type="html"><![CDATA[<p>ä»£ç ç”Ÿæˆ</p><h3 id="å®šä¹‰å…³é”®å­—åŠç¬¦å·æ˜ å°„">å®šä¹‰å…³é”®å­—åŠç¬¦å·æ˜ å°„</h3><div id="preview-6" class="preview"><div class="preview-box">    <div id="draw-6">    src=lua-lexer.js<script src="/js/lua-lexer.js"></script>    </div>    <div class="preview-box-util">        <span id="expand-6" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-6" class="preview-code false"><pre><code class="hljs"></code></pre></div><script>    const expandCode_6 = document.getElementById('expand-6');    const bindCode_6 = document.getElementById('code-6');    let flag_6 = true;    expandCode_6.onclick = function (){        if(flag_6){            bindCode_6.classList.add('preview-code-active')        }else{            bindCode_6.classList.remove('preview-code-active')         }        flag_6 = !flag_6    }</script></div><div id="preview-7" class="preview"><div class="preview-box">    <div id="draw-7">    src=lua-token.js<script src="/js/lua-token.js"></script>    </div>    <div class="preview-box-util">        <span id="expand-7" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-7" class="preview-code false"><pre><code class="hljs"></code></pre></div><script>    const expandCode_7 = document.getElementById('expand-7');    const bindCode_7 = document.getElementById('code-7');    let flag_7 = true;    expandCode_7.onclick = function (){        if(flag_7){            bindCode_7.classList.add('preview-code-active')        }else{            bindCode_7.classList.remove('preview-code-active')         }        flag_7 = !flag_7    }</script></div><div id="preview-8" class="preview"><div class="preview-box">    <div id="draw-8">    src=lua-parser.js<script src="/js/lua-parser.js"></script>    </div>    <div class="preview-box-util">        <span id="expand-8" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-8" class="preview-code false"><pre><code class="hljs"></code></pre></div><script>    const expandCode_8 = document.getElementById('expand-8');    const bindCode_8 = document.getElementById('code-8');    let flag_8 = true;    expandCode_8.onclick = function (){        if(flag_8){            bindCode_8.classList.add('preview-code-active')        }else{            bindCode_8.classList.remove('preview-code-active')         }        flag_8 = !flag_8    }</script></div><div id="preview-9" class="preview"><div class="preview-box">    <div id="draw-9">    src=lua-gen-js.js<script src="/js/lua-gen-js.js"></script>    </div>    <div class="preview-box-util">        <span id="expand-9" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-9" class="preview-code false"><pre><code class="hljs"></code></pre></div><script>    const expandCode_9 = document.getElementById('expand-9');    const bindCode_9 = document.getElementById('code-9');    let flag_9 = true;    expandCode_9.onclick = function (){        if(flag_9){            bindCode_9.classList.add('preview-code-active')        }else{            bindCode_9.classList.remove('preview-code-active')         }        flag_9 = !flag_9    }</script></div><div id="preview-10" class="preview"><div class="preview-box">    <div id="draw-10">    drawCode<script type="module">                    (function(){                        function drawCode(code, dom, idx) {  let str = `<textarea id="code-${idx}" class="code" rows=6 style="width:100%" readonly>${code}</textarea>`;  dom.innerHTML = str;}window.drawCode = drawCode;                    })(10)                </script>    </div>    <div class="preview-box-util">        <span id="expand-10" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-10" class="preview-code false"><pre><code class="hljs"><span class="hljs-keyword">function</span> <span class="hljs-title function_">drawCode</span>(<span class="hljs-params">code, dom, idx</span>) &#123;  <span class="hljs-keyword">let</span> str = <span class="hljs-string">`&lt;textarea id=&quot;code-<span class="hljs-subst">$&#123;idx&#125;</span>&quot; class=&quot;code&quot; rows=6 style=&quot;width:100%&quot; readonly&gt;<span class="hljs-subst">$&#123;code&#125;</span>&lt;/textarea&gt;`</span>;  dom.<span class="hljs-property">innerHTML</span> = str;&#125;<span class="hljs-variable language_">window</span>.<span class="hljs-property">drawCode</span> = drawCode;</code></pre></div><script>    const expandCode_10 = document.getElementById('expand-10');    const bindCode_10 = document.getElementById('code-10');    let flag_10 = true;    expandCode_10.onclick = function (){        if(flag_10){            bindCode_10.classList.add('preview-code-active')        }else{            bindCode_10.classList.remove('preview-code-active')         }        flag_10 = !flag_10    }</script></div><div id="preview-11" class="preview"><div class="preview-box">    <div id="draw-11">    draw<script type="module">                    (function(){                        function draw(code, ast, idx) {  let e = document.getElementById(`draw-${idx}`);  e.classList.add("box");  let c = document.createElement("div");  c.classList.add("code");  e.appendChild(c);  drawCode(code, c, idx);}window.draw = draw;                    })(11)                </script>    </div>    <div class="preview-box-util">        <span id="expand-11" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-11" class="preview-code false"><pre><code class="hljs"><span class="hljs-keyword">function</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params">code, ast, idx</span>) &#123;  <span class="hljs-keyword">let</span> e = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">`draw-<span class="hljs-subst">$&#123;idx&#125;</span>`</span>);  e.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&quot;box&quot;</span>);  <span class="hljs-keyword">let</span> c = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);  c.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&quot;code&quot;</span>);  e.<span class="hljs-title function_">appendChild</span>(c);  <span class="hljs-title function_">drawCode</span>(code, c, idx);&#125;<span class="hljs-variable language_">window</span>.<span class="hljs-property">draw</span> = draw;</code></pre></div><script>    const expandCode_11 = document.getElementById('expand-11');    const bindCode_11 = document.getElementById('code-11');    let flag_11 = true;    expandCode_11.onclick = function (){        if(flag_11){            bindCode_11.classList.add('preview-code-active')        }else{            bindCode_11.classList.remove('preview-code-active')         }        flag_11 = !flag_11    }</script></div><pre >// ç”Ÿæˆçš„jsä»£ç <div style="    white-space: pre-wrap;" id="js-code"></div><div>//eval æ‰§è¡Œç»“æœ</div><div id="js-eval" ></div></pre><div>source code ğŸ‘‡ğŸ‘‡ğŸ‘‡</div><div id="preview-14" class="preview"><div class="preview-box">    <div id="draw-14">    <script type="module">                    (function(){                        let idx = arguments[0];let code = `local name,age = "jack",18;local jsCode = document.getElementById("js-eval");jsCode.textContent = "hello world!!!, name is".." "..name.." age is "..age;`;let lexer = new Lexer(code);let parser = new Parser(lexer);let ast = parser.parse();draw(code, ast, idx);console.log(ast);let jsCode = gen(ast);document.getElementById("js-code").textContent = jsCode.split(";").join(";\n");console.log(jsCode);eval(jsCode);                    })(14)                </script>    </div>    <div class="preview-box-util">        <span id="expand-14" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-14" class="preview-code false"><pre><code class="hljs"><span class="hljs-keyword">let</span> idx = <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>];<span class="hljs-keyword">let</span> code = <span class="hljs-string">`local name,age = &quot;jack&quot;,18;local jsCode = document.getElementById(&quot;js-eval&quot;);jsCode.textContent = &quot;hello world!!!, name is&quot;..&quot; &quot;..name..&quot; age is &quot;..age;`</span>;<span class="hljs-keyword">let</span> lexer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Lexer</span>(code);<span class="hljs-keyword">let</span> parser = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Parser</span>(lexer);<span class="hljs-keyword">let</span> ast = parser.<span class="hljs-title function_">parse</span>();<span class="hljs-title function_">draw</span>(code, ast, idx);<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ast);<span class="hljs-keyword">let</span> jsCode = <span class="hljs-title function_">gen</span>(ast);<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;js-code&quot;</span>).<span class="hljs-property">textContent</span> = jsCode.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;;&quot;</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot;;\n&quot;</span>);<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(jsCode);<span class="hljs-built_in">eval</span>(jsCode);</code></pre></div><script>    const expandCode_14 = document.getElementById('expand-14');    const bindCode_14 = document.getElementById('code-14');    let flag_14 = true;    expandCode_14.onclick = function (){        if(flag_14){            bindCode_14.classList.add('preview-code-active')        }else{            bindCode_14.classList.remove('preview-code-active')         }        flag_14 = !flag_14    }</script></div><pre><code class="hljs"></code></pre>]]></content>
      
      
      <categories>
          
          <category> post </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2022/06/10/v2022-06-10-15-24/"/>
      <url>/2022/06/10/v2022-06-10-15-24/</url>
      
        <content type="html"><![CDATA[<p>éšæœºæƒ³åˆ°è¦å†™äº›ä»€ä¹ˆï¼Œä½†æ˜¯æ‰‹æ‘¸åˆ°é”®ç›˜åˆä¸çŸ¥é“å†™äº›ä»€ä¹ˆã€‚è¿‘æ¥ä¸€ä½åŒäº‹ç¦»èŒäº†ï¼Œæœ¬èº«ä¸æˆ‘äº¤é›†ç”šå°‘ï¼Œä½†å…¶è®°å½•çš„ä¸€äº›äº‹æƒ…ï¼Œå¯¹æˆ‘æ„Ÿè§¦é¢‡æ·±ï¼Œå†…å®¹å¤§å¤šä¸ºå·¥ä½œä¸­çš„è§è§£ï¼Œæ–‡å­—æ·³æœ´è‡ªç„¶ï¼Œèƒ½å¤Ÿæ„Ÿè§‰åˆ°ä»–ä»æ¯ä»¶äº‹ä¸­è·å¾—çš„æ”¶è·ï¼Œæœ€è¿‘å¬ä¹¦è¯´ï¼šå¤äººå¯¹äºæ™ºå•†çš„åˆ¤æ–­åˆ†3é˜¶æ®µï¼Œä¸€é˜¶æ®µæ˜¯12å²å‰ï¼Œè®°å¿†åŠ›æ˜¯åˆ¤æ–­æ ‡å‡†ï¼›äºŒé˜¶æ®µæ˜¯12-33æˆ–è€…36ï¼ˆè®°ä¸å¤ªæ¸…æ¥šäº†ï¼‰ï¼Œç†è§£åŠ›æ˜¯åˆ¤æ–­æ ‡å‡†ï¼Œéšåæ˜¯åˆ¤æ–­åŠ›ï¼Œå†³ç­–åŠ›ã€‚æƒŠè®¶äºåŒäº‹å¯¹æ¯ä»¶äº‹æƒ…éƒ½æœ‰è‡ªå·±çš„è§è§£ï¼Œæ¯ä»¶äº‹éƒ½èƒ½å¤Ÿæ”¶è·ä¸€äº›ä¸œè¥¿ï¼Œè®°å½•ä¸‹æ¥åƒæ˜¯ä¼ ä¹ å½•ä¸€èˆ¬ï¼Œåé¢çš„äººçœ‹äº†æ„Ÿè§‰ä¹Ÿæ˜¯æ”¶è·é¢‡å¤šï¼Œæƒ³åˆ°è‡ªå·±ä¹Ÿç»å¸¸æœ‰å¥‡æ€å¦™æƒ³ï¼Œä½†ç¯‡å¹…ä¸è¶³ä»¥æˆæ–‡ï¼Œå¤šä»¥ç‰‡æ®µä¸ºä¸»ï¼Œä¸å¦‚å’Œä»–ä¸€èˆ¬éšæƒ³éšè®°ï¼Œä¸ä¸ºä»€ä¹ˆï¼Œåªä¸è¿‡æ˜¯ç•™ä¸ªå°è®°ç½¢äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> weibo </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2022/06/06/v2022-06-06-11-17/"/>
      <url>/2022/06/06/v2022-06-06-11-17/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©çœ‹åˆ°ç™½é¹­å…¬å¸è€æ€»çš„ä¸€å°ä¿¡ï¼Œç›¸ä¿¡ä¸€ä¸ªè¿è¥10å¤šå¹´æ¥çš„å…¬å¸ï¼Œæƒ³å¿…ä¸€å®šä¹Ÿæ›¾é£å…‰è¿‡ï¼Œæ²¡æƒ³åˆ°å°±æ­¤é™¨è½ï¼Œä¸çŸ¥é“èƒ½å¦ä¸œå±±å†èµ·ï¼Œå°±åƒç½—æ°¸æµ©é‚£æ ·èµ·èµ·ä¼ä¼ï¼Œåªèƒ½è¯´äººç”Ÿæ— å¸¸ï¼Œäº‹äº‹å¹¶éå¦‚æ„¿ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> weibo </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>lua-parse</title>
      <link href="/2022/06/05/lua.parser/"/>
      <url>/2022/06/05/lua.parser/</url>
      
        <content type="html"><![CDATA[<p>åŠ¨æ‰‹å†™ä¸ªè¯æ³•è§£æå™¨ï¼Œè¯æ³•è§£æéå¸¸ç®€å•å…¶å…³é”®å¤„ç†é—®é¢˜åœ¨äº</p><ul><li>å­—ç¬¦ä¸²</li><li>æ•°å­—</li><li>å…³é”®å­—ä¸ç¬¦å·</li></ul><h3 id="å®šä¹‰å…³é”®å­—åŠç¬¦å·æ˜ å°„">å®šä¹‰å…³é”®å­—åŠç¬¦å·æ˜ å°„</h3><div id="preview-23" class="preview"><div class="preview-box">    <div id="draw-23">    src=lua-lexer.js<script src="/js/lua-lexer.js"></script>    </div>    <div class="preview-box-util">        <span id="expand-23" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-23" class="preview-code false"><pre><code class="hljs"></code></pre></div><script>    const expandCode_23 = document.getElementById('expand-23');    const bindCode_23 = document.getElementById('code-23');    let flag_23 = true;    expandCode_23.onclick = function (){        if(flag_23){            bindCode_23.classList.add('preview-code-active')        }else{            bindCode_23.classList.remove('preview-code-active')         }        flag_23 = !flag_23    }</script></div><div id="preview-24" class="preview"><div class="preview-box">    <div id="draw-24">    src=lua-token.js<script src="/js/lua-token.js"></script>    </div>    <div class="preview-box-util">        <span id="expand-24" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-24" class="preview-code false"><pre><code class="hljs"></code></pre></div><script>    const expandCode_24 = document.getElementById('expand-24');    const bindCode_24 = document.getElementById('code-24');    let flag_24 = true;    expandCode_24.onclick = function (){        if(flag_24){            bindCode_24.classList.add('preview-code-active')        }else{            bindCode_24.classList.remove('preview-code-active')         }        flag_24 = !flag_24    }</script></div><div id="preview-25" class="preview"><div class="preview-box">    <div id="draw-25">    src=lua-parser.js<script src="/js/lua-parser.js"></script>    </div>    <div class="preview-box-util">        <span id="expand-25" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-25" class="preview-code false"><pre><code class="hljs"></code></pre></div><script>    const expandCode_25 = document.getElementById('expand-25');    const bindCode_25 = document.getElementById('code-25');    let flag_25 = true;    expandCode_25.onclick = function (){        if(flag_25){            bindCode_25.classList.add('preview-code-active')        }else{            bindCode_25.classList.remove('preview-code-active')         }        flag_25 = !flag_25    }</script></div><style>.node{cursor:pointer;}li {list-style-type: none;    position:relative;}.node::before {content: "\25B6";color: var(--color01);display: inline-block;margin-right: 6px;font-size: small;    position: absolute;    left: -16px;}.node[data-active='true']::before {transform: rotate(90deg);}[data-active='true']{display:block;}[data-active='true'] .mini{display:none;}[data-active='false'] ul{display:none;}[data-active='false'] .mini{display:inline;}  .box{    display:flex;    flex-wrap:wrap;    max-height: 400px;    overflow:auto;  }   </style><div id="preview-27" class="preview"><div class="preview-box">    <div id="draw-27">    drawJson<script type="module">                    (function(){                        function drawAttrs(attrs) {  let attrStr = "<ul class='attrs'>";  for (let { key, val } of attrs) {    attrStr += `<li class='attr'>${key}:${val}</li>`;  }  return attrStr + "</ul>";}function drawNode(node,idx) {  let name = "";  if (node?.constructor?.name) {    name = node.constructor.name;  }  let startTag = "";  let endName = "";  if (name === "Object") {    startTag = "{";    endName = "}";  }  if (name === "Array") {    startTag = "[";    endName = "]";  }  let mini = "";  if (endName !== "") {    mini = `<span class="mini"> ${Object.keys(node)} </span>`;    endName = `<span>${endName}</span>`;  }  if (node._n) {    name = `${node._n}:${name}`;  }  let keys = Object.keys(node);  let attrs = [];  let childrenToken = [];  for (let key of keys) {    if (typeof node[key] !== "object" || node[key] == null) {      attrs.push({ key, val: node[key] });    } else {      Object.defineProperty(node[key], "_n", {        enumerable: false,        value: key,      });      childrenToken.push(node[key]);    }  }  let attrStr = "";  if (attrs.length) {    attrStr = drawAttrs(attrs);  }  let childrenStr = "";  if (childrenToken.length) {    childrenStr = drawTree(childrenToken,idx);  }  const printLocation = (node) => {    if (node instanceof Node) {      return `onclick="selectCode(event,${idx})" data-start=${node.location?.start?.offset} data-end=${node.location?.end?.offset}`;    }  };  return `<li class='node' data-active="false"   ${printLocation(    node  )}>${name}${startTag}${attrStr}${childrenStr}${mini}${endName}</li>`;}function drawTree(nodes,idx) {  let children = [];  for (let node of nodes) {    children.push(drawNode(node,idx));  }  return `<ul class="tree"  >${children.join("\n")}</ul>`;}function toggle(e) {  if (e.dataset["active"] === "true") {    e.dataset["active"] = false;  } else {    e.dataset["active"] = true;  }}function drawJson(obj, dom, idx) {  let str = drawTree([obj], idx);  dom.addEventListener(    "click",    (e) => {      if (e.target.tagName === "LI") {        toggle(e.target);      }    },    false  );  dom.innerHTML = `<div>  <button onclick="expandAll(${idx})">å±•å¼€æ‰€æœ‰</button>  <button onclick="foldAll(${idx})">æŠ˜å æ‰€æœ‰</button></div>  ${str}`;}window.drawJson = drawJson;                    })(27)                </script>    </div>    <div class="preview-box-util">        <span id="expand-27" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-27" class="preview-code false"><pre><code class="hljs"><span class="hljs-keyword">function</span> <span class="hljs-title function_">drawAttrs</span>(<span class="hljs-params">attrs</span>) &#123;  <span class="hljs-keyword">let</span> attrStr = <span class="hljs-string">&quot;&lt;ul class=&#x27;attrs&#x27;&gt;&quot;</span>;  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> &#123; key, val &#125; <span class="hljs-keyword">of</span> attrs) &#123;    attrStr += <span class="hljs-string">`&lt;li class=&#x27;attr&#x27;&gt;<span class="hljs-subst">$&#123;key&#125;</span>:<span class="hljs-subst">$&#123;val&#125;</span>&lt;/li&gt;`</span>;  &#125;  <span class="hljs-keyword">return</span> attrStr + <span class="hljs-string">&quot;&lt;/ul&gt;&quot;</span>;&#125;<span class="hljs-keyword">function</span> <span class="hljs-title function_">drawNode</span>(<span class="hljs-params">node,idx</span>) &#123;  <span class="hljs-keyword">let</span> name = <span class="hljs-string">&quot;&quot;</span>;  <span class="hljs-keyword">if</span> (node?.<span class="hljs-property">constructor</span>?.<span class="hljs-property">name</span>) &#123;    name = node.<span class="hljs-property">constructor</span>.<span class="hljs-property">name</span>;  &#125;  <span class="hljs-keyword">let</span> startTag = <span class="hljs-string">&quot;&quot;</span>;  <span class="hljs-keyword">let</span> endName = <span class="hljs-string">&quot;&quot;</span>;  <span class="hljs-keyword">if</span> (name === <span class="hljs-string">&quot;Object&quot;</span>) &#123;    startTag = <span class="hljs-string">&quot;&#123;&quot;</span>;    endName = <span class="hljs-string">&quot;&#125;&quot;</span>;  &#125;  <span class="hljs-keyword">if</span> (name === <span class="hljs-string">&quot;Array&quot;</span>) &#123;    startTag = <span class="hljs-string">&quot;[&quot;</span>;    endName = <span class="hljs-string">&quot;]&quot;</span>;  &#125;  <span class="hljs-keyword">let</span> mini = <span class="hljs-string">&quot;&quot;</span>;  <span class="hljs-keyword">if</span> (endName !== <span class="hljs-string">&quot;&quot;</span>) &#123;    mini = <span class="hljs-string">`&lt;span class=&quot;mini&quot;&gt; <span class="hljs-subst">$&#123;<span class="hljs-built_in">Object</span>.keys(node)&#125;</span> &lt;/span&gt;`</span>;    endName = <span class="hljs-string">`&lt;span&gt;<span class="hljs-subst">$&#123;endName&#125;</span>&lt;/span&gt;`</span>;  &#125;  <span class="hljs-keyword">if</span> (node.<span class="hljs-property">_n</span>) &#123;    name = <span class="hljs-string">`<span class="hljs-subst">$&#123;node._n&#125;</span>:<span class="hljs-subst">$&#123;name&#125;</span>`</span>;  &#125;  <span class="hljs-keyword">let</span> keys = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(node);  <span class="hljs-keyword">let</span> attrs = [];  <span class="hljs-keyword">let</span> childrenToken = [];  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> key <span class="hljs-keyword">of</span> keys) &#123;    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> node[key] !== <span class="hljs-string">&quot;object&quot;</span> || node[key] == <span class="hljs-literal">null</span>) &#123;      attrs.<span class="hljs-title function_">push</span>(&#123; key, <span class="hljs-attr">val</span>: node[key] &#125;);    &#125; <span class="hljs-keyword">else</span> &#123;      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(node[key], <span class="hljs-string">&quot;_n&quot;</span>, &#123;        <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>,        <span class="hljs-attr">value</span>: key,      &#125;);      childrenToken.<span class="hljs-title function_">push</span>(node[key]);    &#125;  &#125;  <span class="hljs-keyword">let</span> attrStr = <span class="hljs-string">&quot;&quot;</span>;  <span class="hljs-keyword">if</span> (attrs.<span class="hljs-property">length</span>) &#123;    attrStr = <span class="hljs-title function_">drawAttrs</span>(attrs);  &#125;  <span class="hljs-keyword">let</span> childrenStr = <span class="hljs-string">&quot;&quot;</span>;  <span class="hljs-keyword">if</span> (childrenToken.<span class="hljs-property">length</span>) &#123;    childrenStr = <span class="hljs-title function_">drawTree</span>(childrenToken,idx);  &#125;  <span class="hljs-keyword">const</span> <span class="hljs-title function_">printLocation</span> = (<span class="hljs-params">node</span>) =&gt; &#123;    <span class="hljs-keyword">if</span> (node <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Node</span>) &#123;      <span class="hljs-keyword">return</span> <span class="hljs-string">`onclick=&quot;selectCode(event,<span class="hljs-subst">$&#123;idx&#125;</span>)&quot; data-start=<span class="hljs-subst">$&#123;node.location?.start?.offset&#125;</span> data-end=<span class="hljs-subst">$&#123;node.location?.end?.offset&#125;</span>`</span>;    &#125;  &#125;;  <span class="hljs-keyword">return</span> <span class="hljs-string">`&lt;li class=&#x27;node&#x27; data-active=&quot;false&quot;   <span class="hljs-subst">$&#123;printLocation(    node  )&#125;</span>&gt;<span class="hljs-subst">$&#123;name&#125;</span><span class="hljs-subst">$&#123;startTag&#125;</span><span class="hljs-subst">$&#123;attrStr&#125;</span><span class="hljs-subst">$&#123;childrenStr&#125;</span><span class="hljs-subst">$&#123;mini&#125;</span><span class="hljs-subst">$&#123;endName&#125;</span>&lt;/li&gt;`</span>;&#125;<span class="hljs-keyword">function</span> <span class="hljs-title function_">drawTree</span>(<span class="hljs-params">nodes,idx</span>) &#123;  <span class="hljs-keyword">let</span> children = [];  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> node <span class="hljs-keyword">of</span> nodes) &#123;    children.<span class="hljs-title function_">push</span>(<span class="hljs-title function_">drawNode</span>(node,idx));  &#125;  <span class="hljs-keyword">return</span> <span class="hljs-string">`&lt;ul class=&quot;tree&quot;  &gt;<span class="hljs-subst">$&#123;children.join(<span class="hljs-string">&quot;\n&quot;</span>)&#125;</span>&lt;/ul&gt;`</span>;&#125;<span class="hljs-keyword">function</span> <span class="hljs-title function_">toggle</span>(<span class="hljs-params">e</span>) &#123;  <span class="hljs-keyword">if</span> (e.<span class="hljs-property">dataset</span>[<span class="hljs-string">&quot;active&quot;</span>] === <span class="hljs-string">&quot;true&quot;</span>) &#123;    e.<span class="hljs-property">dataset</span>[<span class="hljs-string">&quot;active&quot;</span>] = <span class="hljs-literal">false</span>;  &#125; <span class="hljs-keyword">else</span> &#123;    e.<span class="hljs-property">dataset</span>[<span class="hljs-string">&quot;active&quot;</span>] = <span class="hljs-literal">true</span>;  &#125;&#125;<span class="hljs-keyword">function</span> <span class="hljs-title function_">drawJson</span>(<span class="hljs-params">obj, dom, idx</span>) &#123;  <span class="hljs-keyword">let</span> str = <span class="hljs-title function_">drawTree</span>([obj], idx);  dom.<span class="hljs-title function_">addEventListener</span>(    <span class="hljs-string">&quot;click&quot;</span>,    <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> &#123;      <span class="hljs-keyword">if</span> (e.<span class="hljs-property">target</span>.<span class="hljs-property">tagName</span> === <span class="hljs-string">&quot;LI&quot;</span>) &#123;        <span class="hljs-title function_">toggle</span>(e.<span class="hljs-property">target</span>);      &#125;    &#125;,    <span class="hljs-literal">false</span>  );  dom.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`&lt;div&gt;  &lt;button onclick=&quot;expandAll(<span class="hljs-subst">$&#123;idx&#125;</span>)&quot;&gt;å±•å¼€æ‰€æœ‰&lt;/button&gt;  &lt;button onclick=&quot;foldAll(<span class="hljs-subst">$&#123;idx&#125;</span>)&quot;&gt;æŠ˜å æ‰€æœ‰&lt;/button&gt;&lt;/div&gt;  <span class="hljs-subst">$&#123;str&#125;</span>`</span>;&#125;<span class="hljs-variable language_">window</span>.<span class="hljs-property">drawJson</span> = drawJson;</code></pre></div><script>    const expandCode_27 = document.getElementById('expand-27');    const bindCode_27 = document.getElementById('code-27');    let flag_27 = true;    expandCode_27.onclick = function (){        if(flag_27){            bindCode_27.classList.add('preview-code-active')        }else{            bindCode_27.classList.remove('preview-code-active')         }        flag_27 = !flag_27    }</script></div><div id="preview-28" class="preview"><div class="preview-box">    <div id="draw-28">    <script type="module">                    (function(){                        function drawCode(code, dom, idx) {  let str = `<textarea id="code-${idx}" class="code" rows=6 cols=60 readonly>${code}</textarea>`;  dom.innerHTML = str;}function expandAll(idx) {  let nodes = document    .getElementById(`draw-${idx}`)    .querySelectorAll('[data-active="false"]');  Array.from(nodes).forEach((node) => {    node.dataset["active"] = true;  });}function selectCode(event,idx) {  let start = event.target.dataset["start"];  let end = event.target.dataset["end"];  let input = document.getElementById(`code-${idx}`);  input.focus();  input.setSelectionRange(start, end);}function foldAll(idx) {  let nodes = document    .getElementById(`draw-${idx}`)    .querySelectorAll('[data-active="true"]');  Array.from(nodes).forEach((node) => {    node.dataset["active"] = false;  });}window.drawCode = drawCode;window.expandAll = expandAll;window.foldAll = foldAll;window.selectCode = selectCode;                    })(28)                </script>    </div>    <div class="preview-box-util">        <span id="expand-28" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-28" class="preview-code false"><pre><code class="hljs"><span class="hljs-keyword">function</span> <span class="hljs-title function_">drawCode</span>(<span class="hljs-params">code, dom, idx</span>) &#123;  <span class="hljs-keyword">let</span> str = <span class="hljs-string">`&lt;textarea id=&quot;code-<span class="hljs-subst">$&#123;idx&#125;</span>&quot; class=&quot;code&quot; rows=6 cols=60 readonly&gt;<span class="hljs-subst">$&#123;code&#125;</span>&lt;/textarea&gt;`</span>;  dom.<span class="hljs-property">innerHTML</span> = str;&#125;<span class="hljs-keyword">function</span> <span class="hljs-title function_">expandAll</span>(<span class="hljs-params">idx</span>) &#123;  <span class="hljs-keyword">let</span> nodes = <span class="hljs-variable language_">document</span>    .<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">`draw-<span class="hljs-subst">$&#123;idx&#125;</span>`</span>)    .<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">&#x27;[data-active=&quot;false&quot;]&#x27;</span>);  <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(nodes).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">node</span>) =&gt;</span> &#123;    node.<span class="hljs-property">dataset</span>[<span class="hljs-string">&quot;active&quot;</span>] = <span class="hljs-literal">true</span>;  &#125;);&#125;<span class="hljs-keyword">function</span> <span class="hljs-title function_">selectCode</span>(<span class="hljs-params">event,idx</span>) &#123;  <span class="hljs-keyword">let</span> start = event.<span class="hljs-property">target</span>.<span class="hljs-property">dataset</span>[<span class="hljs-string">&quot;start&quot;</span>];  <span class="hljs-keyword">let</span> end = event.<span class="hljs-property">target</span>.<span class="hljs-property">dataset</span>[<span class="hljs-string">&quot;end&quot;</span>];  <span class="hljs-keyword">let</span> input = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">`code-<span class="hljs-subst">$&#123;idx&#125;</span>`</span>);  input.<span class="hljs-title function_">focus</span>();  input.<span class="hljs-title function_">setSelectionRange</span>(start, end);&#125;<span class="hljs-keyword">function</span> <span class="hljs-title function_">foldAll</span>(<span class="hljs-params">idx</span>) &#123;  <span class="hljs-keyword">let</span> nodes = <span class="hljs-variable language_">document</span>    .<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">`draw-<span class="hljs-subst">$&#123;idx&#125;</span>`</span>)    .<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">&#x27;[data-active=&quot;true&quot;]&#x27;</span>);  <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(nodes).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">node</span>) =&gt;</span> &#123;    node.<span class="hljs-property">dataset</span>[<span class="hljs-string">&quot;active&quot;</span>] = <span class="hljs-literal">false</span>;  &#125;);&#125;<span class="hljs-variable language_">window</span>.<span class="hljs-property">drawCode</span> = drawCode;<span class="hljs-variable language_">window</span>.<span class="hljs-property">expandAll</span> = expandAll;<span class="hljs-variable language_">window</span>.<span class="hljs-property">foldAll</span> = foldAll;<span class="hljs-variable language_">window</span>.<span class="hljs-property">selectCode</span> = selectCode;</code></pre></div><script>    const expandCode_28 = document.getElementById('expand-28');    const bindCode_28 = document.getElementById('code-28');    let flag_28 = true;    expandCode_28.onclick = function (){        if(flag_28){            bindCode_28.classList.add('preview-code-active')        }else{            bindCode_28.classList.remove('preview-code-active')         }        flag_28 = !flag_28    }</script></div><div id="preview-29" class="preview"><div class="preview-box">    <div id="draw-29">    <script type="module">                    (function(){                        function draw(code, ast, idx) {  let e = document.getElementById(`draw-${idx}`);  e.classList.add("box");  let c = document.createElement("div");  let j = document.createElement("div");  c.classList.add("code");  j.classList.add("json");  e.appendChild(c);  e.appendChild(j);  drawJson(ast, j, idx);  drawCode(code, c, idx);}window.draw = draw;                    })(29)                </script>    </div>    <div class="preview-box-util">        <span id="expand-29" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-29" class="preview-code false"><pre><code class="hljs"><span class="hljs-keyword">function</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params">code, ast, idx</span>) &#123;  <span class="hljs-keyword">let</span> e = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">`draw-<span class="hljs-subst">$&#123;idx&#125;</span>`</span>);  e.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&quot;box&quot;</span>);  <span class="hljs-keyword">let</span> c = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);  <span class="hljs-keyword">let</span> j = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);  c.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&quot;code&quot;</span>);  j.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&quot;json&quot;</span>);  e.<span class="hljs-title function_">appendChild</span>(c);  e.<span class="hljs-title function_">appendChild</span>(j);  <span class="hljs-title function_">drawJson</span>(ast, j, idx);  <span class="hljs-title function_">drawCode</span>(code, c, idx);&#125;<span class="hljs-variable language_">window</span>.<span class="hljs-property">draw</span> = draw;</code></pre></div><script>    const expandCode_29 = document.getElementById('expand-29');    const bindCode_29 = document.getElementById('code-29');    let flag_29 = true;    expandCode_29.onclick = function (){        if(flag_29){            bindCode_29.classList.add('preview-code-active')        }else{            bindCode_29.classList.remove('preview-code-active')         }        flag_29 = !flag_29    }</script></div><div id="preview-30" class="preview"><div class="preview-box">    <div id="draw-30">    <script type="module">                    (function(){                        let idx = arguments[0];let code = `...niltruefalse1231.123`;let lexer = new Lexer(code);let parser = new Parser(lexer);draw(  code,  [    parser.parseExp0(),    parser.parseExp0(),    parser.parseExp0(),    parser.parseExp0(),    parser.parseExp0(),    parser.parseExp0(),  ],  idx);                    })(30)                </script>    </div>    <div class="preview-box-util">        <span id="expand-30" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-30" class="preview-code false"><pre><code class="hljs"><span class="hljs-keyword">let</span> idx = <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>];<span class="hljs-keyword">let</span> code = <span class="hljs-string">`...niltruefalse1231.123`</span>;<span class="hljs-keyword">let</span> lexer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Lexer</span>(code);<span class="hljs-keyword">let</span> parser = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Parser</span>(lexer);<span class="hljs-title function_">draw</span>(  code,  [    parser.<span class="hljs-title function_">parseExp0</span>(),    parser.<span class="hljs-title function_">parseExp0</span>(),    parser.<span class="hljs-title function_">parseExp0</span>(),    parser.<span class="hljs-title function_">parseExp0</span>(),    parser.<span class="hljs-title function_">parseExp0</span>(),    parser.<span class="hljs-title function_">parseExp0</span>(),  ],  idx);</code></pre></div><script>    const expandCode_30 = document.getElementById('expand-30');    const bindCode_30 = document.getElementById('code-30');    let flag_30 = true;    expandCode_30.onclick = function (){        if(flag_30){            bindCode_30.classList.add('preview-code-active')        }else{            bindCode_30.classList.remove('preview-code-active')         }        flag_30 = !flag_30    }</script></div><div id="preview-31" class="preview"><div class="preview-box">    <div id="draw-31">    <script type="module">                    (function(){                        let idx = arguments[0];let code = `function ()  endfunction (...) endfunction (a,b,c) endfunction (d,e,...) end`;let lexer = new Lexer(code);let parser = new Parser(lexer);draw(  code,  [    parser.parseExp0(),    parser.parseExp0(),    parser.parseExp0(),    parser.parseExp0(),  ],  idx);                    })(31)                </script>    </div>    <div class="preview-box-util">        <span id="expand-31" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-31" class="preview-code false"><pre><code class="hljs"><span class="hljs-keyword">let</span> idx = <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>];<span class="hljs-keyword">let</span> code = <span class="hljs-string">`function ()  endfunction (...) endfunction (a,b,c) endfunction (d,e,...) end`</span>;<span class="hljs-keyword">let</span> lexer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Lexer</span>(code);<span class="hljs-keyword">let</span> parser = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Parser</span>(lexer);<span class="hljs-title function_">draw</span>(  code,  [    parser.<span class="hljs-title function_">parseExp0</span>(),    parser.<span class="hljs-title function_">parseExp0</span>(),    parser.<span class="hljs-title function_">parseExp0</span>(),    parser.<span class="hljs-title function_">parseExp0</span>(),  ],  idx);</code></pre></div><script>    const expandCode_31 = document.getElementById('expand-31');    const bindCode_31 = document.getElementById('code-31');    let flag_31 = true;    expandCode_31.onclick = function (){        if(flag_31){            bindCode_31.classList.add('preview-code-active')        }else{            bindCode_31.classList.remove('preview-code-active')         }        flag_31 = !flag_31    }</script></div><div id="preview-32" class="preview"><div class="preview-box">    <div id="draw-32">    <script type="module">                    (function(){                        let idx = arguments[0];let code = `{}{["a"]=123}{["a"]=123,["b"]=456,c=123}`;let lexer = new Lexer(code);let parser = new Parser(lexer);draw(code, [parser.parseExp0(), parser.parseExp0(), parser.parseExp0()], idx);                    })(32)                </script>    </div>    <div class="preview-box-util">        <span id="expand-32" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-32" class="preview-code false"><pre><code class="hljs"><span class="hljs-keyword">let</span> idx = <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>];<span class="hljs-keyword">let</span> code = <span class="hljs-string">`&#123;&#125;&#123;[&quot;a&quot;]=123&#125;&#123;[&quot;a&quot;]=123,[&quot;b&quot;]=456,c=123&#125;`</span>;<span class="hljs-keyword">let</span> lexer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Lexer</span>(code);<span class="hljs-keyword">let</span> parser = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Parser</span>(lexer);<span class="hljs-title function_">draw</span>(code, [parser.<span class="hljs-title function_">parseExp0</span>(), parser.<span class="hljs-title function_">parseExp0</span>(), parser.<span class="hljs-title function_">parseExp0</span>()], idx);</code></pre></div><script>    const expandCode_32 = document.getElementById('expand-32');    const bindCode_32 = document.getElementById('code-32');    let flag_32 = true;    expandCode_32.onclick = function (){        if(flag_32){            bindCode_32.classList.add('preview-code-active')        }else{            bindCode_32.classList.remove('preview-code-active')         }        flag_32 = !flag_32    }</script></div><div id="preview-33" class="preview"><div class="preview-box">    <div id="draw-33">    <script type="module">                    (function(){                        let idx = arguments[0];let code = `a.b`;let lexer = new Lexer(code);let parser = new Parser(lexer);draw(code, [parser.parseExp0()], idx);                    })(33)                </script>    </div>    <div class="preview-box-util">        <span id="expand-33" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-33" class="preview-code false"><pre><code class="hljs"><span class="hljs-keyword">let</span> idx = <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>];<span class="hljs-keyword">let</span> code = <span class="hljs-string">`a.b`</span>;<span class="hljs-keyword">let</span> lexer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Lexer</span>(code);<span class="hljs-keyword">let</span> parser = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Parser</span>(lexer);<span class="hljs-title function_">draw</span>(code, [parser.<span class="hljs-title function_">parseExp0</span>()], idx);</code></pre></div><script>    const expandCode_33 = document.getElementById('expand-33');    const bindCode_33 = document.getElementById('code-33');    let flag_33 = true;    expandCode_33.onclick = function (){        if(flag_33){            bindCode_33.classList.add('preview-code-active')        }else{            bindCode_33.classList.remove('preview-code-active')         }        flag_33 = !flag_33    }</script></div><div id="preview-34" class="preview"><div class="preview-box">    <div id="draw-34">    <script type="module">                    (function(){                        let idx = arguments[0];let code = `1 or 2 or 31 ^ 2 ^ 3`;let lexer = new Lexer(code);let parser = new Parser(lexer);draw(code, [parser.parseExp(), parser.parseExp()], idx);                    })(34)                </script>    </div>    <div class="preview-box-util">        <span id="expand-34" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-34" class="preview-code false"><pre><code class="hljs"><span class="hljs-keyword">let</span> idx = <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>];<span class="hljs-keyword">let</span> code = <span class="hljs-string">`1 or 2 or 31 ^ 2 ^ 3`</span>;<span class="hljs-keyword">let</span> lexer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Lexer</span>(code);<span class="hljs-keyword">let</span> parser = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Parser</span>(lexer);<span class="hljs-title function_">draw</span>(code, [parser.<span class="hljs-title function_">parseExp</span>(), parser.<span class="hljs-title function_">parseExp</span>()], idx);</code></pre></div><script>    const expandCode_34 = document.getElementById('expand-34');    const bindCode_34 = document.getElementById('code-34');    let flag_34 = true;    expandCode_34.onclick = function (){        if(flag_34){            bindCode_34.classList.add('preview-code-active')        }else{            bindCode_34.classList.remove('preview-code-active')         }        flag_34 = !flag_34    }</script></div><div id="preview-35" class="preview"><div class="preview-box">    <div id="draw-35">    <script type="module">                    (function(){                        let idx = arguments[0];let code = `-- æ³¨é‡Š;break::label::goto preLabelwhile 1 do endrepeat until 1`;let lexer = new Lexer(code);let parser = new Parser(lexer);draw(  code,  [    parser.parseState(),    parser.parseState(),    parser.parseState(),    parser.parseState(),    parser.parseState(),    parser.parseState(),  ],  idx);                    })(35)                </script>    </div>    <div class="preview-box-util">        <span id="expand-35" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-35" class="preview-code false"><pre><code class="hljs"><span class="hljs-keyword">let</span> idx = <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>];<span class="hljs-keyword">let</span> code = <span class="hljs-string">`-- æ³¨é‡Š;break::label::goto preLabelwhile 1 do endrepeat until 1`</span>;<span class="hljs-keyword">let</span> lexer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Lexer</span>(code);<span class="hljs-keyword">let</span> parser = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Parser</span>(lexer);<span class="hljs-title function_">draw</span>(  code,  [    parser.<span class="hljs-title function_">parseState</span>(),    parser.<span class="hljs-title function_">parseState</span>(),    parser.<span class="hljs-title function_">parseState</span>(),    parser.<span class="hljs-title function_">parseState</span>(),    parser.<span class="hljs-title function_">parseState</span>(),    parser.<span class="hljs-title function_">parseState</span>(),  ],  idx);</code></pre></div><script>    const expandCode_35 = document.getElementById('expand-35');    const bindCode_35 = document.getElementById('code-35');    let flag_35 = true;    expandCode_35.onclick = function (){        if(flag_35){            bindCode_35.classList.add('preview-code-active')        }else{            bindCode_35.classList.remove('preview-code-active')         }        flag_35 = !flag_35    }</script></div><div id="preview-36" class="preview"><div class="preview-box">    <div id="draw-36">    <script type="module">                    (function(){                        let idx = arguments[0];let code = `if true then endif true then  elseif true then endif true then  elseif true then  else  end`;let lexer = new Lexer(code);let parser = new Parser(lexer);draw(  code,  [parser.parseState(), parser.parseState(), parser.parseState()],  idx);                    })(36)                </script>    </div>    <div class="preview-box-util">        <span id="expand-36" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-36" class="preview-code false"><pre><code class="hljs"><span class="hljs-keyword">let</span> idx = <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>];<span class="hljs-keyword">let</span> code = <span class="hljs-string">`if true then endif true then  elseif true then endif true then  elseif true then  else  end`</span>;<span class="hljs-keyword">let</span> lexer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Lexer</span>(code);<span class="hljs-keyword">let</span> parser = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Parser</span>(lexer);<span class="hljs-title function_">draw</span>(  code,  [parser.<span class="hljs-title function_">parseState</span>(), parser.<span class="hljs-title function_">parseState</span>(), parser.<span class="hljs-title function_">parseState</span>()],  idx);</code></pre></div><script>    const expandCode_36 = document.getElementById('expand-36');    const bindCode_36 = document.getElementById('code-36');    let flag_36 = true;    expandCode_36.onclick = function (){        if(flag_36){            bindCode_36.classList.add('preview-code-active')        }else{            bindCode_36.classList.remove('preview-code-active')         }        flag_36 = !flag_36    }</script></div><div id="preview-37" class="preview"><div class="preview-box">    <div id="draw-37">    <script type="module">                    (function(){                        let idx = arguments[0];let code = `for i=10,1 do endfor i=10,1,2 do endfor i,v in "a" do end`;let lexer = new Lexer(code);let parser = new Parser(lexer);draw(  code,  [parser.parseState(), parser.parseState(), parser.parseState()],  idx);                    })(37)                </script>    </div>    <div class="preview-box-util">        <span id="expand-37" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-37" class="preview-code false"><pre><code class="hljs"><span class="hljs-keyword">let</span> idx = <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>];<span class="hljs-keyword">let</span> code = <span class="hljs-string">`for i=10,1 do endfor i=10,1,2 do endfor i,v in &quot;a&quot; do end`</span>;<span class="hljs-keyword">let</span> lexer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Lexer</span>(code);<span class="hljs-keyword">let</span> parser = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Parser</span>(lexer);<span class="hljs-title function_">draw</span>(  code,  [parser.<span class="hljs-title function_">parseState</span>(), parser.<span class="hljs-title function_">parseState</span>(), parser.<span class="hljs-title function_">parseState</span>()],  idx);</code></pre></div><script>    const expandCode_37 = document.getElementById('expand-37');    const bindCode_37 = document.getElementById('code-37');    let flag_37 = true;    expandCode_37.onclick = function (){        if(flag_37){            bindCode_37.classList.add('preview-code-active')        }else{            bindCode_37.classList.remove('preview-code-active')         }        flag_37 = !flag_37    }</script></div><div id="preview-38" class="preview"><div class="preview-box">    <div id="draw-38">    <script type="module">                    (function(){                        let idx = arguments[0];let code = `local a = 123local a,b=1,2local alocal function f() end`;let lexer = new Lexer(code);let parser = new Parser(lexer);draw(  code,  [    parser.parseState(),    parser.parseState(),    parser.parseState(),    parser.parseState(),  ],  idx);                    })(38)                </script>    </div>    <div class="preview-box-util">        <span id="expand-38" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-38" class="preview-code false"><pre><code class="hljs"><span class="hljs-keyword">let</span> idx = <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>];<span class="hljs-keyword">let</span> code = <span class="hljs-string">`local a = 123local a,b=1,2local alocal function f() end`</span>;<span class="hljs-keyword">let</span> lexer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Lexer</span>(code);<span class="hljs-keyword">let</span> parser = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Parser</span>(lexer);<span class="hljs-title function_">draw</span>(  code,  [    parser.<span class="hljs-title function_">parseState</span>(),    parser.<span class="hljs-title function_">parseState</span>(),    parser.<span class="hljs-title function_">parseState</span>(),    parser.<span class="hljs-title function_">parseState</span>(),  ],  idx);</code></pre></div><script>    const expandCode_38 = document.getElementById('expand-38');    const bindCode_38 = document.getElementById('code-38');    let flag_38 = true;    expandCode_38.onclick = function (){        if(flag_38){            bindCode_38.classList.add('preview-code-active')        }else{            bindCode_38.classList.remove('preview-code-active')         }        flag_38 = !flag_38    }</script></div><div id="preview-39" class="preview"><div class="preview-box">    <div id="draw-39">    <script type="module">                    (function(){                        let idx = arguments[0];let code = `name[1]name.name1name:name1(1)(2)(3)("name")[1]("name").name1("name"):name(1)`;let lexer = new Lexer(code);let parser = new Parser(lexer);draw(  code,  [    parser.parseExp(),    parser.parseExp(),    parser.parseExp(),    parser.parseExp(),    parser.parseExp(),    parser.parseExp(),  ],  idx);                    })(39)                </script>    </div>    <div class="preview-box-util">        <span id="expand-39" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-39" class="preview-code false"><pre><code class="hljs"><span class="hljs-keyword">let</span> idx = <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>];<span class="hljs-keyword">let</span> code = <span class="hljs-string">`name[1]name.name1name:name1(1)(2)(3)(&quot;name&quot;)[1](&quot;name&quot;).name1(&quot;name&quot;):name(1)`</span>;<span class="hljs-keyword">let</span> lexer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Lexer</span>(code);<span class="hljs-keyword">let</span> parser = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Parser</span>(lexer);<span class="hljs-title function_">draw</span>(  code,  [    parser.<span class="hljs-title function_">parseExp</span>(),    parser.<span class="hljs-title function_">parseExp</span>(),    parser.<span class="hljs-title function_">parseExp</span>(),    parser.<span class="hljs-title function_">parseExp</span>(),    parser.<span class="hljs-title function_">parseExp</span>(),    parser.<span class="hljs-title function_">parseExp</span>(),  ],  idx);</code></pre></div><script>    const expandCode_39 = document.getElementById('expand-39');    const bindCode_39 = document.getElementById('code-39');    let flag_39 = true;    expandCode_39.onclick = function (){        if(flag_39){            bindCode_39.classList.add('preview-code-active')        }else{            bindCode_39.classList.remove('preview-code-active')         }        flag_39 = !flag_39    }</script></div><div id="preview-40" class="preview"><div class="preview-box">    <div id="draw-40">    <script type="module">                    (function(){                        let idx = arguments[0];let code = `;break::label::goto labeldo print('hello') endwhile true do print('hello') endrepeat print('hello') until false`;let lexer = new Lexer(code);let parser = new Parser(lexer);let ast =  parser.parse();console.log(ast)draw(code,ast, idx);                    })(40)                </script>    </div>    <div class="preview-box-util">        <span id="expand-40" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-40" class="preview-code false"><pre><code class="hljs"><span class="hljs-keyword">let</span> idx = <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>];<span class="hljs-keyword">let</span> code = <span class="hljs-string">`;break::label::goto labeldo print(&#x27;hello&#x27;) endwhile true do print(&#x27;hello&#x27;) endrepeat print(&#x27;hello&#x27;) until false`</span>;<span class="hljs-keyword">let</span> lexer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Lexer</span>(code);<span class="hljs-keyword">let</span> parser = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Parser</span>(lexer);<span class="hljs-keyword">let</span> ast =  parser.<span class="hljs-title function_">parse</span>();<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ast)<span class="hljs-title function_">draw</span>(code,ast, idx);</code></pre></div><script>    const expandCode_40 = document.getElementById('expand-40');    const bindCode_40 = document.getElementById('code-40');    let flag_40 = true;    expandCode_40.onclick = function (){        if(flag_40){            bindCode_40.classList.add('preview-code-active')        }else{            bindCode_40.classList.remove('preview-code-active')         }        flag_40 = !flag_40    }</script></div><div id="preview-41" class="preview"><div class="preview-box">    <div id="draw-41">    <script type="module">                    (function(){                        let idx = arguments[0];let code = `local function f() end`;let lexer = new Lexer(code);let parser = new Parser(lexer);let ast =  parser.parse();console.log(ast)draw(code,ast, idx);                    })(41)                </script>    </div>    <div class="preview-box-util">        <span id="expand-41" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-41" class="preview-code false"><pre><code class="hljs"><span class="hljs-keyword">let</span> idx = <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>];<span class="hljs-keyword">let</span> code = <span class="hljs-string">`local function f() end`</span>;<span class="hljs-keyword">let</span> lexer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Lexer</span>(code);<span class="hljs-keyword">let</span> parser = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Parser</span>(lexer);<span class="hljs-keyword">let</span> ast =  parser.<span class="hljs-title function_">parse</span>();<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ast)<span class="hljs-title function_">draw</span>(code,ast, idx);</code></pre></div><script>    const expandCode_41 = document.getElementById('expand-41');    const bindCode_41 = document.getElementById('code-41');    let flag_41 = true;    expandCode_41.onclick = function (){        if(flag_41){            bindCode_41.classList.add('preview-code-active')        }else{            bindCode_41.classList.remove('preview-code-active')         }        flag_41 = !flag_41    }</script></div>]]></content>
      
      
      <categories>
          
          <category> post </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>lua-token</title>
      <link href="/2022/06/02/lua-token/"/>
      <url>/2022/06/02/lua-token/</url>
      
        <content type="html"><![CDATA[<p>ä¸€ä¸ªå˜æˆè¯­è¨€åŸºæœ¬åˆ†ä¸º 4 éƒ¨åˆ†ï¼Œå…¥å£ï¼Œå—ï¼Œè¯­å¥ï¼Œè¡¨è¾¾å¼</p><p>å…¶ä¸­å…¥å£ä¾¿æ˜¯ç¨‹åºå¼€å§‹éƒ¨åˆ†</p><p>çº¦å®š :: ä»£è¡¨å®šä¹‰ï¼Œ {} ä»£è¡¨ 0 æ¬¡æˆ–è€…å¤šæ¬¡, [] ä»£è¡¨ 0 - 1 æ¬¡</p><p>äººç±»è‡ªå·±åˆ¶é€ çš„ç¼–ç¨‹è¯­è¨€ï¼Œä¸åŒäºè‡ªç„¶è¯­è¨€ï¼Œç›¸å¯¹ç®€å•çš„å¤šï¼ŒåŸºæœ¬å°±æ˜¯ä¸€ä¸ªæœ‰ç©·çŠ¶æ€æœºã€‚</p><pre><code class="hljs"><span class="hljs-attribute">gammer</span> <span class="hljs-body"><span class="hljs-operator">::=</span> block</span><span class="hljs-attribute">block</span> <span class="hljs-body"><span class="hljs-operator">::=</span> <span class="hljs-built_in">&#123;</span>stat<span class="hljs-built_in">&#125;</span> <span class="hljs-built_in">[</span>retStat<span class="hljs-built_in">]</span></span><span class="hljs-comment">// è¿”å›</span><span class="hljs-attribute">retStat</span> <span class="hljs-body"><span class="hljs-operator">::=</span> return <span class="hljs-built_in">[</span>expList<span class="hljs-built_in">]</span> <span class="hljs-built_in">[</span><span class="hljs-string">&#x27;;&#x27;</span><span class="hljs-built_in">]</span></span><span class="hljs-comment">// è¯­å¥ï¼Œä¸€å…±æœ‰ 15 ç§ï¼Œè¯­å¥åªèƒ½æ‰§è¡Œï¼Œä¸èƒ½æ±‚å€¼ï¼Œæ¯”å¦‚ if</span><span class="hljs-attribute">stat</span> <span class="hljs-body"><span class="hljs-operator">::=</span> <span class="hljs-string">&#x27;;&#x27;</span></span><span class="hljs-body"><span class="hljs-built_in">|</span> varList <span class="hljs-string">&#x27;=&#x27;</span> expList</span><span class="hljs-body"><span class="hljs-built_in">|</span> functionCall</span><span class="hljs-body"><span class="hljs-built_in">|</span> label</span><span class="hljs-body"><span class="hljs-built_in">|</span> break</span><span class="hljs-body"><span class="hljs-built_in">|</span> goto Name</span><span class="hljs-body"><span class="hljs-built_in">|</span> do block end</span><span class="hljs-body"><span class="hljs-built_in">|</span> while exp do block end</span><span class="hljs-body"><span class="hljs-built_in">|</span> repeat block until exp</span><span class="hljs-body"><span class="hljs-built_in">|</span> if exp then block <span class="hljs-built_in">&#123;</span>elseif exp then block<span class="hljs-built_in">&#125;</span> <span class="hljs-built_in">[</span>else block<span class="hljs-built_in">]</span> end</span><span class="hljs-body"><span class="hljs-built_in">|</span> for Name <span class="hljs-string">&#x27;=&#x27;</span> exp <span class="hljs-string">&#x27;,&#x27;</span> exp <span class="hljs-built_in">[</span><span class="hljs-string">&#x27;,&#x27;</span>,exp<span class="hljs-built_in">]</span> do block end</span><span class="hljs-body"><span class="hljs-built_in">|</span> function funcName funcBody</span><span class="hljs-body"><span class="hljs-built_in">|</span> local function Name funcBody</span><span class="hljs-body"><span class="hljs-built_in">|</span> local nameList <span class="hljs-built_in">[</span><span class="hljs-string">&#x27;=&#x27;</span> expList<span class="hljs-built_in">]</span></span><span class="hljs-comment">// è¡¨è¾¾å¼åªèƒ½æ±‚å€¼ä¸èƒ½æ‰§è¡Œï¼Œæ¯”å¦‚ 123  1 + 2</span><span class="hljs-attribute">expList</span> <span class="hljs-body"><span class="hljs-operator">::=</span> exp <span class="hljs-built_in">&#123;</span><span class="hljs-string">&#x27;,&#x27;</span> exp<span class="hljs-built_in">&#125;</span></span><span class="hljs-attribute">exp</span> <span class="hljs-body"><span class="hljs-operator">::=</span> nil <span class="hljs-built_in">|</span> false <span class="hljs-built_in">|</span> true <span class="hljs-built_in">|</span> Numeral <span class="hljs-built_in">|</span> LiteralString <span class="hljs-built_in">|</span> <span class="hljs-string">&#x27;...&#x27;</span> <span class="hljs-built_in">|</span> functionDef ï½œ prefixExp</span><span class="hljs-body"><span class="hljs-built_in">|</span> tableConstructor <span class="hljs-built_in">|</span> exp binOp exp <span class="hljs-built_in">|</span> unOp exp</span><span class="hljs-comment">// ps: å‡½æ•°è°ƒç”¨æ—¢å¯ä»¥æ˜¯è¡¨è¾¾å¼ä¹Ÿæ˜¯è¯­å¥</span><span class="hljs-comment">// hello() obg[key()] è¿™ç§éƒ½æ˜¯åˆæ³•çš„,å‰è€…å±äºè¯­å¥ï¼Œåè€…å±äºè¡¨è¾¾å¼</span></code></pre><p>é’ˆå¯¹è¯­å¥è¿›è¡Œæ‹†åˆ†<br>è¯­å¥éƒ¨åˆ† ast ç»“æ„</p><pre><code class="hljs"><span class="hljs-comment">// æ‹†åˆ†ä¸€ä¸‹</span><span class="hljs-attribute">emptyStat</span> <span class="hljs-body"><span class="hljs-operator">::=</span> <span class="hljs-string">&#x27;;&#x27;</span></span><span class="hljs-attribute">breakStat</span> <span class="hljs-body"><span class="hljs-operator">::=</span> break</span><span class="hljs-attribute">labelStat</span> <span class="hljs-body"><span class="hljs-operator">::=</span> <span class="hljs-string">&#x27;::&#x27;</span> Name <span class="hljs-string">&#x27;::&#x27;</span></span><span class="hljs-attribute">gotoStat</span> <span class="hljs-body"><span class="hljs-operator">::=</span> goto Name</span><span class="hljs-attribute">doStat</span> <span class="hljs-body"><span class="hljs-operator">::=</span> do block end</span><span class="hljs-attribute">funcCallStat</span> <span class="hljs-body"><span class="hljs-operator">::=</span> FuncCallExp</span><span class="hljs-attribute">whileStat</span>  <span class="hljs-body"><span class="hljs-operator">::=</span> while exp do block end</span><span class="hljs-attribute">repeatStat</span> <span class="hljs-body"><span class="hljs-operator">::=</span> repeat block until exp</span><span class="hljs-comment">// ifStat å¯ä»¥å°†else ç®€åŒ–</span><span class="hljs-attribute">ifStat</span> <span class="hljs-body"><span class="hljs-operator">::=</span> if exp then block <span class="hljs-built_in">&#123;</span>elseif exp then block<span class="hljs-built_in">&#125;</span> <span class="hljs-built_in">[</span>else block<span class="hljs-built_in">]</span> end</span><span class="hljs-comment">// ifStat ::= if exp then block &#123;elseif exp then block&#125; [elseif true then block] end</span><span class="hljs-comment">// ifStat ::= if exp then block &#123;elseif exp then block&#125; end</span><span class="hljs-attribute">forNumStat</span> <span class="hljs-body"><span class="hljs-operator">::=</span> for Name <span class="hljs-string">&#x27;=&#x27;</span> exp <span class="hljs-string">&#x27;,&#x27;</span> exp <span class="hljs-built_in">[</span><span class="hljs-string">&#x27;,&#x27;</span>,exp<span class="hljs-built_in">]</span> do block end</span><span class="hljs-attribute">forInStat</span> <span class="hljs-body"><span class="hljs-operator">::=</span> for nameList in expList do block end</span><span class="hljs-attribute">localVarDeclStat</span> <span class="hljs-body"><span class="hljs-operator">::=</span> local nameList <span class="hljs-string">&#x27;=&#x27;</span> expList</span><span class="hljs-attribute">assignStat</span> <span class="hljs-body"><span class="hljs-operator">::=</span> varList <span class="hljs-string">&#x27;=&#x27;</span> expList</span><span class="hljs-comment">// æ˜¯ assignStat çš„è¯­æ³•ç³–ï¼Œæ‰€ä»¥è¿”å›ç»“æ„å’Œ ä¹Ÿæ˜¯AssignStat.</span><span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> æ²¡å‡†æˆ‘å¯ä»¥ç¾åŒ–ä¸‹</span><span class="hljs-attribute">funcDefStat</span> <span class="hljs-body"><span class="hljs-operator">::=</span> function funcName funcBody</span><span class="hljs-attribute">localFuncDefStat</span> <span class="hljs-body"><span class="hljs-operator">::=</span> local function Name funcBody</span><span class="hljs-comment">// util</span><span class="hljs-attribute">nameList</span> <span class="hljs-body"><span class="hljs-operator">::=</span> Name <span class="hljs-built_in">&#123;</span><span class="hljs-string">&#x27;,&#x27;</span> Name<span class="hljs-built_in">&#125;</span></span><span class="hljs-attribute">expList</span> <span class="hljs-body"><span class="hljs-operator">::=</span> exp <span class="hljs-built_in">&#123;</span><span class="hljs-string">&#x27;,&#x27;</span> exp<span class="hljs-built_in">&#125;</span></span><span class="hljs-attribute">varList</span> <span class="hljs-body"><span class="hljs-operator">::=</span> var <span class="hljs-built_in">&#123;</span><span class="hljs-string">&#x27;,&#x27;</span> var<span class="hljs-built_in">&#125;</span></span><span class="hljs-attribute">var</span> <span class="hljs-body"><span class="hljs-operator">::=</span> Name <span class="hljs-built_in">|</span> prefixExp <span class="hljs-string">&#x27;[&#x27;</span> exp <span class="hljs-string">&#x27;]&#x27;</span> <span class="hljs-built_in">|</span> prefixExp <span class="hljs-string">&#x27;.&#x27;</span> Name</span><span class="hljs-attribute">funcName</span> <span class="hljs-body"><span class="hljs-operator">::=</span> Name <span class="hljs-built_in">&#123;</span><span class="hljs-string">&#x27;.&#x27;</span> Name<span class="hljs-built_in">&#125;</span> <span class="hljs-built_in">[</span><span class="hljs-string">&#x27;:&#x27;</span> Name<span class="hljs-built_in">]</span></span><span class="hljs-attribute">funcBody</span> <span class="hljs-body"><span class="hljs-operator">::=</span> <span class="hljs-string">&#x27;(&#x27;</span> <span class="hljs-built_in">[</span>parList<span class="hljs-built_in">]</span> <span class="hljs-string">&#x27;)&#x27;</span> block end</span><span class="hljs-attribute">parList</span> <span class="hljs-body"><span class="hljs-operator">::=</span> nameList <span class="hljs-built_in">[</span><span class="hljs-string">&#x27;,&#x27;</span> <span class="hljs-string">&#x27;...&#x27;</span><span class="hljs-built_in">]</span> <span class="hljs-built_in">|</span> <span class="hljs-string">&#x27;...&#x27;</span></span><span class="hljs-comment">// æœ€ç»ˆ</span><span class="hljs-attribute">tat</span> <span class="hljs-body"><span class="hljs-operator">::=</span> emptyStat</span><span class="hljs-body"><span class="hljs-built_in">|</span> assignStat</span><span class="hljs-body"><span class="hljs-built_in">|</span> funcCallStat</span><span class="hljs-body"><span class="hljs-built_in">|</span> labelStat</span><span class="hljs-body"><span class="hljs-built_in">|</span> breakStat</span><span class="hljs-body"><span class="hljs-built_in">|</span> gotoStat</span><span class="hljs-body"><span class="hljs-built_in">|</span> doStat</span><span class="hljs-body"><span class="hljs-built_in">|</span> whileStat</span><span class="hljs-body"><span class="hljs-built_in">|</span> repeatStat</span><span class="hljs-body"><span class="hljs-built_in">|</span> ifStat</span><span class="hljs-body"><span class="hljs-built_in">|</span> forNumStat</span><span class="hljs-body"><span class="hljs-built_in">|</span> forInStat</span><span class="hljs-body"><span class="hljs-built_in">|</span> funcDefStat</span><span class="hljs-body"><span class="hljs-built_in">|</span> localFuncDefStat</span><span class="hljs-body"><span class="hljs-built_in">|</span> localVarDeclStat</span></code></pre><p>è¡¨è¾¾å¼éƒ¨åˆ†ç²¾ç®€</p><pre><code class="hljs"><span class="hljs-attribute">nilExp</span> <span class="hljs-body"><span class="hljs-operator">::=</span> nil</span><span class="hljs-attribute">falseExp</span> <span class="hljs-body"><span class="hljs-operator">::=</span> false</span><span class="hljs-attribute">trueExp</span> <span class="hljs-body"><span class="hljs-operator">::=</span> true</span><span class="hljs-attribute">varArgExp</span> <span class="hljs-body"><span class="hljs-operator">::=</span> <span class="hljs-string">&#x27;...&#x27;</span></span><span class="hljs-attribute">integerExp</span> <span class="hljs-body"><span class="hljs-operator">::=</span> Numeral</span><span class="hljs-attribute">floatExp</span> <span class="hljs-body"><span class="hljs-operator">::=</span> Numeral</span><span class="hljs-attribute">stringExp</span> <span class="hljs-body"><span class="hljs-operator">::=</span> LiteralString</span><span class="hljs-attribute">nameExp</span> <span class="hljs-body"><span class="hljs-operator">::=</span> Name</span><span class="hljs-attribute">concatExp</span> <span class="hljs-body"><span class="hljs-operator">::=</span> exp <span class="hljs-string">&#x27;...&#x27;</span> exp</span><span class="hljs-attribute">tableConstructorExp</span> <span class="hljs-body"><span class="hljs-operator">::=</span> <span class="hljs-string">&#x27;&#123;&#x27;</span> <span class="hljs-built_in">[</span>fieldList<span class="hljs-built_in">]</span> <span class="hljs-string">&#x27;&#125;&#x27;</span></span><span class="hljs-attribute">funcDefExp</span> <span class="hljs-body"><span class="hljs-operator">::=</span> function funcBody</span><span class="hljs-comment">// åŸå§‹ç‰ˆæœ¬</span><span class="hljs-attribute">prefixExp</span> <span class="hljs-body"><span class="hljs-operator">::=</span> var <span class="hljs-built_in">|</span> functionCall <span class="hljs-built_in">|</span> <span class="hljs-string">&#x27;(&#x27;</span> exp <span class="hljs-string">&#x27;)&#x27;</span></span><span class="hljs-comment">// èµ‹å€¼è¯­å¥ç­‰å·å·¦ä¾§ã€åå­—è¡¨è¾¾å¼ã€è¡¨è®¿é—®è¡¨è¾¾å¼ã€è®°å½•è®¿é—®è¡¨è¾¾å¼</span><span class="hljs-attribute">var</span> <span class="hljs-body"><span class="hljs-operator">::=</span> Name <span class="hljs-built_in">|</span> prefixExp <span class="hljs-string">&#x27;[&#x27;</span> exp <span class="hljs-string">&#x27;]&#x27;</span> <span class="hljs-built_in">|</span> prefixExp <span class="hljs-string">&#x27;.&#x27;</span> Name</span><span class="hljs-attribute">functionCall</span> <span class="hljs-body"><span class="hljs-operator">::=</span> prefixExp args <span class="hljs-built_in">|</span> prefixExp <span class="hljs-string">&#x27;:&#x27;</span> Name args</span><span class="hljs-comment">// ç²¾ç®€ç‰ˆ</span><span class="hljs-attribute">prefixExp</span> <span class="hljs-body"><span class="hljs-operator">::=</span> Name <span class="hljs-built_in">|</span> parentExp <span class="hljs-built_in">|</span> tableAccessExp <span class="hljs-built_in">|</span> prefixExp <span class="hljs-string">&#x27;.&#x27;</span> Name <span class="hljs-built_in">|</span> functionCallExp</span><span class="hljs-attribute">parentExp</span> <span class="hljs-body"><span class="hljs-operator">::=</span> <span class="hljs-string">&#x27;(&#x27;</span> exp <span class="hljs-string">&#x27;)&#x27;</span></span><span class="hljs-attribute">tableAccessExp</span> <span class="hljs-body"><span class="hljs-operator">::=</span> prefixExp <span class="hljs-string">&#x27;[&#x27;</span> exo <span class="hljs-string">&#x27;]&#x27;</span></span><span class="hljs-attribute">functionCallExp</span> <span class="hljs-body"><span class="hljs-operator">::=</span> prefixExp <span class="hljs-built_in">[</span><span class="hljs-string">&#x27;:&#x27;</span> Name<span class="hljs-built_in">]</span> args</span><span class="hljs-comment">// util</span><span class="hljs-attribute">Name</span> <span class="hljs-body"><span class="hljs-operator">::=</span> <span class="hljs-string">/^[_\d\w]+/</span></span><span class="hljs-attribute">LiteralString</span> <span class="hljs-body"><span class="hljs-operator">::=</span> <span class="hljs-string">/(^&#x27;(\\\\|\\&#x27;|\\\n|\\z\s*|[^&#x27;\n])*&#x27;)|(^&quot;(\\\\|\\&quot;|\\\n|\\z\s*|[^&quot;\n])*&quot;)/</span>;</span><span class="hljs-attribute">Numeral</span> <span class="hljs-body"><span class="hljs-operator">::=</span> <span class="hljs-string">/^0[xX][0-9a-fA-F]*(\.[0-9a-fA-F]*)?([pP][+\-]?[0-9]+)?|^[0-9]*(\.[0-9]*)?([eE][+\-]?[0-9]+)?/</span>;</span><span class="hljs-attribute">fieldList</span> <span class="hljs-body"><span class="hljs-operator">::=</span> field <span class="hljs-built_in">&#123;</span>fieldSep field<span class="hljs-built_in">&#125;</span> <span class="hljs-built_in">[</span>fieldSep<span class="hljs-built_in">]</span></span><span class="hljs-attribute">field</span> <span class="hljs-body"><span class="hljs-operator">::=</span> <span class="hljs-string">&#x27;[&#x27;</span> exp <span class="hljs-string">&#x27;]&#x27;</span> <span class="hljs-string">&#x27;=&#x27;</span> exp <span class="hljs-built_in">|</span> Name <span class="hljs-string">&#x27;=&#x27;</span> exp <span class="hljs-built_in">|</span> exp</span><span class="hljs-attribute">fieldSep</span> <span class="hljs-body"><span class="hljs-operator">::=</span> <span class="hljs-string">&#x27;,&#x27;</span> <span class="hljs-built_in">|</span> <span class="hljs-string">&#x27;;&#x27;</span></span><span class="hljs-attribute">args</span> <span class="hljs-body"><span class="hljs-operator">::=</span> <span class="hljs-string">&#x27;&#123;&#x27;</span> <span class="hljs-built_in">[</span>expList<span class="hljs-built_in">]</span> <span class="hljs-string">&#x27;&#125;&#x27;</span> <span class="hljs-built_in">|</span> tableConstructorExp <span class="hljs-built_in">|</span> LiteralString</span><span class="hljs-comment">// é€šè¿‡ä¼˜å…ˆçº§è§£å†³æ­§ä¹‰é—®é¢˜</span><span class="hljs-attribute">exp</span> <span class="hljs-body"><span class="hljs-operator">::=</span> exp12</span><span class="hljs-attribute">exp12</span> <span class="hljs-body"><span class="hljs-operator">::=</span> epx11 <span class="hljs-built_in">&#123;</span>or exp11<span class="hljs-built_in">&#125;</span></span><span class="hljs-attribute">exp11</span> <span class="hljs-body"><span class="hljs-operator">::=</span> exp10 <span class="hljs-built_in">&#123;</span>and exp10<span class="hljs-built_in">&#125;</span></span><span class="hljs-attribute">exp10</span> <span class="hljs-body"><span class="hljs-operator">::=</span> exp9 <span class="hljs-built_in">&#123;</span>(<span class="hljs-string">&#x27;&lt;&#x27;</span> <span class="hljs-built_in">|</span> <span class="hljs-string">&#x27;&gt;&#x27;</span> <span class="hljs-built_in">|</span> <span class="hljs-string">&#x27;&lt;=&#x27;</span> <span class="hljs-built_in">|</span> <span class="hljs-string">&#x27;&gt;=&#x27;</span> <span class="hljs-built_in">|</span> <span class="hljs-string">&#x27;~=&#x27;</span> <span class="hljs-built_in">|</span> <span class="hljs-string">&#x27;==&#x27;</span>) exp9<span class="hljs-built_in">&#125;</span></span><span class="hljs-attribute">exp9</span> <span class="hljs-body"><span class="hljs-operator">::=</span> exp8 <span class="hljs-built_in">&#123;</span><span class="hljs-string">&#x27;|&#x27;</span> exp8<span class="hljs-built_in">&#125;</span></span><span class="hljs-attribute">exp8</span> <span class="hljs-body"><span class="hljs-operator">::=</span> exp7 <span class="hljs-built_in">&#123;</span><span class="hljs-string">&#x27;~&#x27;</span> exp7<span class="hljs-built_in">&#125;</span></span><span class="hljs-attribute">exp7</span> <span class="hljs-body"><span class="hljs-operator">::=</span> exp6 <span class="hljs-built_in">&#123;</span><span class="hljs-string">&#x27;&amp;&#x27;</span> exp6<span class="hljs-built_in">&#125;</span></span><span class="hljs-attribute">exp6</span> <span class="hljs-body"><span class="hljs-operator">::=</span> exp5 <span class="hljs-built_in">&#123;</span>(<span class="hljs-string">&#x27;&lt;&lt;&#x27;</span> <span class="hljs-built_in">|</span> <span class="hljs-string">&#x27;&gt;&gt;&#x27;</span>) exp5<span class="hljs-built_in">&#125;</span></span><span class="hljs-attribute">exp5</span> <span class="hljs-body"><span class="hljs-operator">::=</span> exp4 <span class="hljs-built_in">&#123;</span><span class="hljs-string">&#x27;..&#x27;</span> exp4<span class="hljs-built_in">&#125;</span></span><span class="hljs-attribute">exp4</span> <span class="hljs-body"><span class="hljs-operator">::=</span> exp3 <span class="hljs-built_in">&#123;</span>(<span class="hljs-string">&#x27;+&#x27;</span> <span class="hljs-built_in">|</span> <span class="hljs-string">&#x27;-&#x27;</span>) exp3<span class="hljs-built_in">&#125;</span></span><span class="hljs-attribute">exp3</span> <span class="hljs-body"><span class="hljs-operator">::=</span> exp2 <span class="hljs-built_in">&#123;</span>( <span class="hljs-string">&#x27;*&#x27;</span> <span class="hljs-built_in">|</span> <span class="hljs-string">&#x27;/&#x27;</span> <span class="hljs-built_in">|</span> <span class="hljs-string">&#x27;//&#x27;</span> <span class="hljs-built_in">|</span> <span class="hljs-string">&#x27;&amp;&#x27;</span>) exp2<span class="hljs-built_in">&#125;</span></span><span class="hljs-attribute">exp2</span> <span class="hljs-body"><span class="hljs-operator">::=</span> <span class="hljs-built_in">&#123;</span>(<span class="hljs-string">&#x27;not&#x27;</span> <span class="hljs-built_in">|</span> <span class="hljs-string">&#x27;#&#x27;</span> <span class="hljs-built_in">|</span> <span class="hljs-string">&#x27;-&#x27;</span> <span class="hljs-built_in">|</span> <span class="hljs-string">&#x27;~&#x27;</span>)<span class="hljs-built_in">&#125;</span> exp1</span><span class="hljs-attribute">exp1</span> <span class="hljs-body"><span class="hljs-operator">::=</span> exp0 (<span class="hljs-string">&#x27;^&#x27;</span> exp2)</span><span class="hljs-attribute">exp0</span> <span class="hljs-body"><span class="hljs-operator">::=</span> nil <span class="hljs-built_in">|</span> false <span class="hljs-built_in">|</span> true <span class="hljs-built_in">|</span> Numeral <span class="hljs-built_in">|</span> LiteralString <span class="hljs-built_in">|</span> <span class="hljs-string">&#x27;...&#x27;</span> <span class="hljs-built_in">|</span> funcDefExp ï½œ prefixExp</span><span class="hljs-body"><span class="hljs-built_in">|</span> tableConstructorExp</span></code></pre><p><a href="https://regexper.com/#%2F%28%5E'%28%5C%5C%5C%5C%7C%5C%5C'%7C%5C%5C%5Cn%7C%5C%5Cz%5Cs*%7C%5B%5E'%5Cn%5D%29*'%29%7C%28%5E%22%28%5C%5C%5C%5C%7C%5C%5C%22%7C%5C%5C%5Cn%7C%5C%5Cz%5Cs*%7C%5B%5E%22%5Cn%5D%29*%22%29%2F">LiteralString</a><br>LiteralString ::= /(^â€˜(\\|\â€™|\\n|\z\s*|[^'\n])<em>')|(^â€œ(\\|\â€|\\n|\z\s</em>|[^â€œ\n])*â€)/;</p><p><a href="https://regexper.com/#%2F%5E0%5BxX%5D%5B0-9a-fA-F%5D*%28%5C.%5B0-9a-fA-F%5D*%29%3F%28%5BpP%5D%5B%2B%5C-%5D%3F%5B0-9%5D%2B%29%3F%7C%5E%5B0-9%5D*%28%5C.%5B0-9%5D*%29%3F%28%5BeE%5D%5B%2B%5C-%5D%3F%5B0-9%5D%2B%29%3F%2F">Numeral</a><br>Numeral ::= /^0[xX][0-9a-fa-f]<em>(.[0-9a-fA-F]</em>)?([pP][+-]?[0-9]+)?|^[0-9]<em>(.[0-9]</em>)?([eE][+-]?[0-9]+)?/;)</p><div id="preview-27" class="preview"><div class="preview-box">    <div id="draw-27">    src=lua-token.js<script src="/js/lua-token.js"></script>    </div>    <div class="preview-box-util">        <span id="expand-27" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-27" class="preview-code false"><pre><code class="hljs"></code></pre></div><script>    const expandCode_27 = document.getElementById('expand-27');    const bindCode_27 = document.getElementById('code-27');    let flag_27 = true;    expandCode_27.onclick = function (){        if(flag_27){            bindCode_27.classList.add('preview-code-active')        }else{            bindCode_27.classList.remove('preview-code-active')         }        flag_27 = !flag_27    }</script></div>]]></content>
      
      
      <categories>
          
          <category> post </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>lua-lexer</title>
      <link href="/2022/05/28/lua-lexer/"/>
      <url>/2022/05/28/lua-lexer/</url>
      
        <content type="html"><![CDATA[<p>åŠ¨æ‰‹å†™ä¸ªè¯æ³•è§£æå™¨ï¼Œè¯æ³•è§£æéå¸¸ç®€å•å…¶å…³é”®å¤„ç†é—®é¢˜åœ¨äº</p><ul><li>å­—ç¬¦ä¸²</li><li>æ•°å­—</li><li>å…³é”®å­—ä¸ç¬¦å·</li></ul><h3 id="å®šä¹‰å…³é”®å­—åŠç¬¦å·æ˜ å°„">å®šä¹‰å…³é”®å­—åŠç¬¦å·æ˜ å°„</h3><div id="preview-23" class="preview"><div class="preview-box">    <div id="draw-23">    src=lua-lexer.js<script src="/js/lua-lexer.js"></script>    </div>    <div class="preview-box-util">        <span id="expand-23" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-23" class="preview-code false"><pre><code class="hljs"></code></pre></div><script>    const expandCode_23 = document.getElementById('expand-23');    const bindCode_23 = document.getElementById('code-23');    let flag_23 = true;    expandCode_23.onclick = function (){        if(flag_23){            bindCode_23.classList.add('preview-code-active')        }else{            bindCode_23.classList.remove('preview-code-active')         }        flag_23 = !flag_23    }</script></div><div id="preview-24" class="preview"><div class="preview-box">    <div id="draw-24">    <style>  .token {    display: inline-block;    padding: 4px;    border: 1px solid var(--base00, transparent);    margin: 2px;    border-radius: 4px;  }</style><div>  <textarea rows="20" style="width:100%" id="input" autofocus>  '\u{1f481}'  '\x61'  '\97'  'a'  [[a]]  1  1.1  1.1e-1  1.1e+1  .1local abc = 123;if(abc="123"){  print(abc)}string='123'-- abc-- [[comment]]--longString = [[too long]]</textarea  >  <button id="generate">generate</button></div><div id="tag" style="width:100%;min-height:200px;font-size:14px;"></div><script>  const input = document.getElementById("input");  const g = document.getElementById("generate");  const t = document.getElementById("tag");  const lexerCom = () => {    console.log("start..");    t.innerHTML = "";    let err = "";    try {      const lexer = new Lexer(input.value, "main.lua");      let d = "";      let token = lexer.nextToken();      while (token[0] !== TOKEN_EOF) {        d += gt(token);        token = lexer.nextToken();      }      d += gt(token);      t.innerHTML = d;    } catch (e) {      console.error(e);      t.innerHTML = `<div style="color:red;font-size:14px;">${e.message}</div>`;    }  };  g.onclick = lexerCom;  lexerCom();  function colorRandom() {    const color = [      "yellow",      "orange",      "red",      "magenta",      "violet",      "blue",      "cyan",      "green",    ];    return color[Math.floor(Math.random() * color.length)];  }  function gt(token) {    let [kind, tok, location] = token;    let printStr = `[${kindToCategory(kind)}] ${tok}`;    return `<div class="token" style="color:var(--${colorRandom()})" data-start=${      location?.start.offset    } data-end=${location?.end.offset}>${printStr}</div>`;  }  // This handler will be executed every time the cursor  // is moved over a different list item  t.addEventListener(    "mouseover",    function (event) {      event.target.style.borderColor = "orange";      let start = event.target.dataset["start"];      let end = event.target.dataset["end"];      setTimeout(() => {        input.setAttribute("readonly", true);        input.focus();        input.setSelectionRange(start, end);      }, 10);      event.preventDefault();    },    false  );  t.addEventListener(    "mouseout",    function (event) {      event.target.style.borderColor = "";      input.removeAttribute("readonly");    },    false  );</script>    </div>    <div class="preview-box-util">        <span id="expand-24" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-24" class="preview-code false"><pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css">  <span class="hljs-selector-class">.token</span> &#123;    <span class="hljs-attribute">display</span>: inline-block;    <span class="hljs-attribute">padding</span>: <span class="hljs-number">4px</span>;    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">var</span>(--base00, transparent);    <span class="hljs-attribute">margin</span>: <span class="hljs-number">2px</span>;    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;  &#125;</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">rows</span>=<span class="hljs-string">&quot;20&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width:100%&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;input&quot;</span> <span class="hljs-attr">autofocus</span>&gt;</span>  &#x27;\u&#123;1f481&#125;&#x27;  &#x27;\x61&#x27;  &#x27;\97&#x27;  &#x27;a&#x27;  [[a]]  1  1.1  1.1e-1  1.1e+1  .1local abc = 123;if(abc=&quot;123&quot;)&#123;  print(abc)&#125;string=&#x27;123&#x27;-- abc-- [[comment]]--longString = [[too long]]&lt;/textarea  &gt;  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;generate&quot;</span>&gt;</span>generate<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;tag&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width:100%;min-height:200px;font-size:14px;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">  <span class="hljs-keyword">const</span> input = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;input&quot;</span>);  <span class="hljs-keyword">const</span> g = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;generate&quot;</span>);  <span class="hljs-keyword">const</span> t = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;tag&quot;</span>);  <span class="hljs-keyword">const</span> <span class="hljs-title function_">lexerCom</span> = (<span class="hljs-params"></span>) =&gt; &#123;    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;start..&quot;</span>);    t.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&quot;&quot;</span>;    <span class="hljs-keyword">let</span> err = <span class="hljs-string">&quot;&quot;</span>;    <span class="hljs-keyword">try</span> &#123;      <span class="hljs-keyword">const</span> lexer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Lexer</span>(input.<span class="hljs-property">value</span>, <span class="hljs-string">&quot;main.lua&quot;</span>);      <span class="hljs-keyword">let</span> d = <span class="hljs-string">&quot;&quot;</span>;      <span class="hljs-keyword">let</span> token = lexer.<span class="hljs-title function_">nextToken</span>();      <span class="hljs-keyword">while</span> (token[<span class="hljs-number">0</span>] !== <span class="hljs-variable constant_">TOKEN_EOF</span>) &#123;        d += <span class="hljs-title function_">gt</span>(token);        token = lexer.<span class="hljs-title function_">nextToken</span>();      &#125;      d += <span class="hljs-title function_">gt</span>(token);      t.<span class="hljs-property">innerHTML</span> = d;    &#125; <span class="hljs-keyword">catch</span> (e) &#123;      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(e);      t.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`&lt;div style=&quot;color:red;font-size:14px;&quot;&gt;<span class="hljs-subst">$&#123;e.message&#125;</span>&lt;/div&gt;`</span>;    &#125;  &#125;;  g.<span class="hljs-property">onclick</span> = lexerCom;  <span class="hljs-title function_">lexerCom</span>();  <span class="hljs-keyword">function</span> <span class="hljs-title function_">colorRandom</span>(<span class="hljs-params"></span>) &#123;    <span class="hljs-keyword">const</span> color = [      <span class="hljs-string">&quot;yellow&quot;</span>,      <span class="hljs-string">&quot;orange&quot;</span>,      <span class="hljs-string">&quot;red&quot;</span>,      <span class="hljs-string">&quot;magenta&quot;</span>,      <span class="hljs-string">&quot;violet&quot;</span>,      <span class="hljs-string">&quot;blue&quot;</span>,      <span class="hljs-string">&quot;cyan&quot;</span>,      <span class="hljs-string">&quot;green&quot;</span>,    ];    <span class="hljs-keyword">return</span> color[<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * color.<span class="hljs-property">length</span>)];  &#125;  <span class="hljs-keyword">function</span> <span class="hljs-title function_">gt</span>(<span class="hljs-params">token</span>) &#123;    <span class="hljs-keyword">let</span> [kind, tok, location] = token;    <span class="hljs-keyword">let</span> printStr = <span class="hljs-string">`[<span class="hljs-subst">$&#123;kindToCategory(kind)&#125;</span>] <span class="hljs-subst">$&#123;tok&#125;</span>`</span>;    <span class="hljs-keyword">return</span> <span class="hljs-string">`&lt;div class=&quot;token&quot; style=&quot;color:var(--<span class="hljs-subst">$&#123;colorRandom()&#125;</span>)&quot; data-start=<span class="hljs-subst">$&#123;      location?.start.offset    &#125;</span> data-end=<span class="hljs-subst">$&#123;location?.end.offset&#125;</span>&gt;<span class="hljs-subst">$&#123;printStr&#125;</span>&lt;/div&gt;`</span>;  &#125;  <span class="hljs-comment">// This handler will be executed every time the cursor</span>  <span class="hljs-comment">// is moved over a different list item</span>  t.<span class="hljs-title function_">addEventListener</span>(    <span class="hljs-string">&quot;mouseover&quot;</span>,    <span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) &#123;      event.<span class="hljs-property">target</span>.<span class="hljs-property">style</span>.<span class="hljs-property">borderColor</span> = <span class="hljs-string">&quot;orange&quot;</span>;      <span class="hljs-keyword">let</span> start = event.<span class="hljs-property">target</span>.<span class="hljs-property">dataset</span>[<span class="hljs-string">&quot;start&quot;</span>];      <span class="hljs-keyword">let</span> end = event.<span class="hljs-property">target</span>.<span class="hljs-property">dataset</span>[<span class="hljs-string">&quot;end&quot;</span>];      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;        input.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&quot;readonly&quot;</span>, <span class="hljs-literal">true</span>);        input.<span class="hljs-title function_">focus</span>();        input.<span class="hljs-title function_">setSelectionRange</span>(start, end);      &#125;, <span class="hljs-number">10</span>);      event.<span class="hljs-title function_">preventDefault</span>();    &#125;,    <span class="hljs-literal">false</span>  );  t.<span class="hljs-title function_">addEventListener</span>(    <span class="hljs-string">&quot;mouseout&quot;</span>,    <span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) &#123;      event.<span class="hljs-property">target</span>.<span class="hljs-property">style</span>.<span class="hljs-property">borderColor</span> = <span class="hljs-string">&quot;&quot;</span>;      input.<span class="hljs-title function_">removeAttribute</span>(<span class="hljs-string">&quot;readonly&quot;</span>);    &#125;,    <span class="hljs-literal">false</span>  );</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div><script>    const expandCode_24 = document.getElementById('expand-24');    const bindCode_24 = document.getElementById('code-24');    let flag_24 = true;    expandCode_24.onclick = function (){        if(flag_24){            bindCode_24.classList.add('preview-code-active')        }else{            bindCode_24.classList.remove('preview-code-active')         }        flag_24 = !flag_24    }</script></div>]]></content>
      
      
      <categories>
          
          <category> post </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2022/03/18/v2022-03-18-11-57/"/>
      <url>/2022/03/18/v2022-03-18-11-57/</url>
      
        <content type="html"><![CDATA[<p>æ˜æ˜æ˜¯å·®å¼‚åŒ–çš„ä¸œè¥¿å­˜åœ¨å¼ºå¤§ç«äº‰åŠ›ä¸ºå•¥æ€»æœ‰äººåŠæˆ‘åšåŒè´¨åŒ–çš„ä¸œè¥¿å‘¢ï¼Ÿçœ‹ä¸æ¸…å½¢åŠ¿å—</p>]]></content>
      
      
      <categories>
          
          <category> weibo </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>scheduler</title>
      <link href="/2022/03/08/scheduler/"/>
      <url>/2022/03/08/scheduler/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹</p><div id="preview-3" class="preview"><div class="preview-box">    <div id="draw-3">    getCurrentTime<script type="module">                    (function(){                        const getCurrentTime = () => performance.now();define("getCurrentTime", getCurrentTime);                    })(3)                </script>    </div>    <div class="preview-box-util">        <span id="expand-3" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-3" class="preview-code false"><pre><code class="hljs"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getCurrentTime</span> = (<span class="hljs-params"></span>) =&gt; performance.<span class="hljs-title function_">now</span>();<span class="hljs-title function_">define</span>(<span class="hljs-string">&quot;getCurrentTime&quot;</span>, getCurrentTime);</code></pre></div><script>    const expandCode_3 = document.getElementById('expand-3');    const bindCode_3 = document.getElementById('code-3');    let flag_3 = true;    expandCode_3.onclick = function (){        if(flag_3){            bindCode_3.classList.add('preview-code-active')        }else{            bindCode_3.classList.remove('preview-code-active')         }        flag_3 = !flag_3    }</script></div><div id="preview-4" class="preview"><div class="preview-box">    <div id="draw-4">    sleep<script type="module">                    (function(){                        const getCurrentTime = require("getCurrentTime");const sleep = (tm) => {  let startTime = getCurrentTime();  while (getCurrentTime() - startTime <= tm) {    // sleep  }};define("sleep", sleep);                    })(4)                </script>    </div>    <div class="preview-box-util">        <span id="expand-4" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-4" class="preview-code false"><pre><code class="hljs"><span class="hljs-keyword">const</span> getCurrentTime = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;getCurrentTime&quot;</span>);<span class="hljs-keyword">const</span> <span class="hljs-title function_">sleep</span> = (<span class="hljs-params">tm</span>) =&gt; &#123;  <span class="hljs-keyword">let</span> startTime = <span class="hljs-title function_">getCurrentTime</span>();  <span class="hljs-keyword">while</span> (<span class="hljs-title function_">getCurrentTime</span>() - startTime &lt;= tm) &#123;    <span class="hljs-comment">// sleep</span>  &#125;&#125;;<span class="hljs-title function_">define</span>(<span class="hljs-string">&quot;sleep&quot;</span>, sleep);</code></pre></div><script>    const expandCode_4 = document.getElementById('expand-4');    const bindCode_4 = document.getElementById('code-4');    let flag_4 = true;    expandCode_4.onclick = function (){        if(flag_4){            bindCode_4.classList.add('preview-code-active')        }else{            bindCode_4.classList.remove('preview-code-active')         }        flag_4 = !flag_4    }</script></div><div id="preview-5" class="preview"><div class="preview-box">    <div id="draw-5">    TaskQueue<script type="module">                    (function(){                        class TaskQueue {  constructor() {    this.queue = [];  }  push(task) {    this.queue.unshift(task);  }  peek() {    return this.queue[this.queue.length - 1];  }  pop() {    return this.queue.pop();  }}define("TaskQueue", TaskQueue);                    })(5)                </script>    </div>    <div class="preview-box-util">        <span id="expand-5" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-5" class="preview-code false"><pre><code class="hljs"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TaskQueue</span> &#123;  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;    <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span> = [];  &#125;  <span class="hljs-title function_">push</span>(<span class="hljs-params">task</span>) &#123;    <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-title function_">unshift</span>(task);  &#125;  <span class="hljs-title function_">peek</span>(<span class="hljs-params"></span>) &#123;    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>];  &#125;  <span class="hljs-title function_">pop</span>(<span class="hljs-params"></span>) &#123;    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-title function_">pop</span>();  &#125;&#125;<span class="hljs-title function_">define</span>(<span class="hljs-string">&quot;TaskQueue&quot;</span>, <span class="hljs-title class_">TaskQueue</span>);</code></pre></div><script>    const expandCode_5 = document.getElementById('expand-5');    const bindCode_5 = document.getElementById('code-5');    let flag_5 = true;    expandCode_5.onclick = function (){        if(flag_5){            bindCode_5.classList.add('preview-code-active')        }else{            bindCode_5.classList.remove('preview-code-active')         }        flag_5 = !flag_5    }</script></div><div id="preview-6" class="preview"><div class="preview-box">    <div id="draw-6">    Scheduler<script type="module">                    (function(){                        const getCurrentTime = require("getCurrentTime");const TaskQueue = require("TaskQueue");const frameInterval = 1000 / 60;class Scheduler {  constructor() {    this.taskQueue = new TaskQueue();    this.taskIdCounter = 0;    //    this.isHostCallbackScheduled = false;    this.isPerformingWork = false;    this.startTime = -1;    this.scheduledHostCallback = null;    this.isMessageLoopRunning = false;    this.cannel = new MessageChannel();    this.cannel.port1.onmessage = this.performWorkUntilDeadline.bind(this);  }  commitTask(callback) {    let currentTime = getCurrentTime();    const startTime = currentTime;    const timeout = 0; // ms    const newTask = {      id: this.taskIdCounter++,      callback,      startTime,    };    this.taskQueue.push(newTask);    if (!this.isHostCallbackScheduled && !this.isPerformingWork) {      this.isHostCallbackScheduled = true;      this.requestHostCallback(this.flushWork);    }  }  requestHostCallback(cb) {    this.scheduledHostCallback = cb;    if (!this.isMessageLoopRunning) {      this.isMessageLoopRunning = true;      this.schedulePerformWorkUntilDeadline();    }  }  // å‘èµ·äº‹ä»¶å¼€å§‹æ‰§è¡Œ  schedulePerformWorkUntilDeadline() {    this.cannel.port2.postMessage(null);  }  flushWork() {    this.isHostCallbackScheduled = false;    try {      return this.workLoop();    } finally {      this.currentTask = null;      this.isPerformingWork = false;    }  }  workLoop() {    this.currentTask = this.taskQueue.peek();    while (this.currentTask != null) {      const shouldCallTask = this.shouldYieldToHost();      if (shouldCallTask) {        break;      }      const callback = this.currentTask.callback;      if (typeof callback === "function") {        const continuationCallback = callback();        if (typeof continuationCallback === "function") {          this.currentTask.callback = continuationCallback;        } else {          if (this.currentTask === this.taskQueue.peek()) {            this.taskQueue.pop();          }        }      } else {        this.taskQueue.pop();      }      this.currentTask = this.taskQueue.peek();    }    if (this.currentTask != null) {      return true;    }    return false;  }  performWorkUntilDeadline() {    if (this.scheduledHostCallback !== null) {      const currentTime = getCurrentTime();      this.startTime = currentTime;      let hasMoreWork = true;      try {        hasMoreWork = this.scheduledHostCallback();      } finally {        if (hasMoreWork) {          this.schedulePerformWorkUntilDeadline();        } else {          this.isMessageLoopRunning = false;          this.scheduledHostCallback = null;        }      }    }  }  shouldYieldToHost() {    const timeElapsed = getCurrentTime() - this.startTime;    if (timeElapsed < frameInterval) {      return false;    }    return true;  }}define("scheduler", Scheduler);                    })(6)                </script>    </div>    <div class="preview-box-util">        <span id="expand-6" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-6" class="preview-code false"><pre><code class="hljs"><span class="hljs-keyword">const</span> getCurrentTime = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;getCurrentTime&quot;</span>);<span class="hljs-keyword">const</span> <span class="hljs-title class_">TaskQueue</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;TaskQueue&quot;</span>);<span class="hljs-keyword">const</span> frameInterval = <span class="hljs-number">1000</span> / <span class="hljs-number">60</span>;<span class="hljs-keyword">class</span> <span class="hljs-title class_">Scheduler</span> &#123;  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;    <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TaskQueue</span>();    <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskIdCounter</span> = <span class="hljs-number">0</span>;    <span class="hljs-comment">//</span>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isHostCallbackScheduled</span> = <span class="hljs-literal">false</span>;    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isPerformingWork</span> = <span class="hljs-literal">false</span>;    <span class="hljs-variable language_">this</span>.<span class="hljs-property">startTime</span> = -<span class="hljs-number">1</span>;    <span class="hljs-variable language_">this</span>.<span class="hljs-property">scheduledHostCallback</span> = <span class="hljs-literal">null</span>;    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isMessageLoopRunning</span> = <span class="hljs-literal">false</span>;    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cannel</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MessageChannel</span>();    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cannel</span>.<span class="hljs-property">port1</span>.<span class="hljs-property">onmessage</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">performWorkUntilDeadline</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);  &#125;  <span class="hljs-title function_">commitTask</span>(<span class="hljs-params">callback</span>) &#123;    <span class="hljs-keyword">let</span> currentTime = <span class="hljs-title function_">getCurrentTime</span>();    <span class="hljs-keyword">const</span> startTime = currentTime;    <span class="hljs-keyword">const</span> timeout = <span class="hljs-number">0</span>; <span class="hljs-comment">// ms</span>    <span class="hljs-keyword">const</span> newTask = &#123;      <span class="hljs-attr">id</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskIdCounter</span>++,      callback,      startTime,    &#125;;    <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>.<span class="hljs-title function_">push</span>(newTask);    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isHostCallbackScheduled</span> &amp;&amp; !<span class="hljs-variable language_">this</span>.<span class="hljs-property">isPerformingWork</span>) &#123;      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isHostCallbackScheduled</span> = <span class="hljs-literal">true</span>;      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">requestHostCallback</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">flushWork</span>);    &#125;  &#125;  <span class="hljs-title function_">requestHostCallback</span>(<span class="hljs-params">cb</span>) &#123;    <span class="hljs-variable language_">this</span>.<span class="hljs-property">scheduledHostCallback</span> = cb;    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isMessageLoopRunning</span>) &#123;      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isMessageLoopRunning</span> = <span class="hljs-literal">true</span>;      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">schedulePerformWorkUntilDeadline</span>();    &#125;  &#125;  <span class="hljs-comment">// å‘èµ·äº‹ä»¶å¼€å§‹æ‰§è¡Œ</span>  <span class="hljs-title function_">schedulePerformWorkUntilDeadline</span>(<span class="hljs-params"></span>) &#123;    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cannel</span>.<span class="hljs-property">port2</span>.<span class="hljs-title function_">postMessage</span>(<span class="hljs-literal">null</span>);  &#125;  <span class="hljs-title function_">flushWork</span>(<span class="hljs-params"></span>) &#123;    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isHostCallbackScheduled</span> = <span class="hljs-literal">false</span>;    <span class="hljs-keyword">try</span> &#123;      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">workLoop</span>();    &#125; <span class="hljs-keyword">finally</span> &#123;      <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentTask</span> = <span class="hljs-literal">null</span>;      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isPerformingWork</span> = <span class="hljs-literal">false</span>;    &#125;  &#125;  <span class="hljs-title function_">workLoop</span>(<span class="hljs-params"></span>) &#123;    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentTask</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>.<span class="hljs-title function_">peek</span>();    <span class="hljs-keyword">while</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentTask</span> != <span class="hljs-literal">null</span>) &#123;      <span class="hljs-keyword">const</span> shouldCallTask = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">shouldYieldToHost</span>();      <span class="hljs-keyword">if</span> (shouldCallTask) &#123;        <span class="hljs-keyword">break</span>;      &#125;      <span class="hljs-keyword">const</span> callback = <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentTask</span>.<span class="hljs-property">callback</span>;      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> callback === <span class="hljs-string">&quot;function&quot;</span>) &#123;        <span class="hljs-keyword">const</span> continuationCallback = <span class="hljs-title function_">callback</span>();        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> continuationCallback === <span class="hljs-string">&quot;function&quot;</span>) &#123;          <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentTask</span>.<span class="hljs-property">callback</span> = continuationCallback;        &#125; <span class="hljs-keyword">else</span> &#123;          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentTask</span> === <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>.<span class="hljs-title function_">peek</span>()) &#123;            <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>.<span class="hljs-title function_">pop</span>();          &#125;        &#125;      &#125; <span class="hljs-keyword">else</span> &#123;        <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>.<span class="hljs-title function_">pop</span>();      &#125;      <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentTask</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">taskQueue</span>.<span class="hljs-title function_">peek</span>();    &#125;    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentTask</span> != <span class="hljs-literal">null</span>) &#123;      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;  &#125;  <span class="hljs-title function_">performWorkUntilDeadline</span>(<span class="hljs-params"></span>) &#123;    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">scheduledHostCallback</span> !== <span class="hljs-literal">null</span>) &#123;      <span class="hljs-keyword">const</span> currentTime = <span class="hljs-title function_">getCurrentTime</span>();      <span class="hljs-variable language_">this</span>.<span class="hljs-property">startTime</span> = currentTime;      <span class="hljs-keyword">let</span> hasMoreWork = <span class="hljs-literal">true</span>;      <span class="hljs-keyword">try</span> &#123;        hasMoreWork = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">scheduledHostCallback</span>();      &#125; <span class="hljs-keyword">finally</span> &#123;        <span class="hljs-keyword">if</span> (hasMoreWork) &#123;          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">schedulePerformWorkUntilDeadline</span>();        &#125; <span class="hljs-keyword">else</span> &#123;          <span class="hljs-variable language_">this</span>.<span class="hljs-property">isMessageLoopRunning</span> = <span class="hljs-literal">false</span>;          <span class="hljs-variable language_">this</span>.<span class="hljs-property">scheduledHostCallback</span> = <span class="hljs-literal">null</span>;        &#125;      &#125;    &#125;  &#125;  <span class="hljs-title function_">shouldYieldToHost</span>(<span class="hljs-params"></span>) &#123;    <span class="hljs-keyword">const</span> timeElapsed = <span class="hljs-title function_">getCurrentTime</span>() - <span class="hljs-variable language_">this</span>.<span class="hljs-property">startTime</span>;    <span class="hljs-keyword">if</span> (timeElapsed &lt; frameInterval) &#123;      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;  &#125;&#125;<span class="hljs-title function_">define</span>(<span class="hljs-string">&quot;scheduler&quot;</span>, <span class="hljs-title class_">Scheduler</span>);</code></pre></div><script>    const expandCode_6 = document.getElementById('expand-6');    const bindCode_6 = document.getElementById('code-6');    let flag_6 = true;    expandCode_6.onclick = function (){        if(flag_6){            bindCode_6.classList.add('preview-code-active')        }else{            bindCode_6.classList.remove('preview-code-active')         }        flag_6 = !flag_6    }</script></div><div id="preview-7" class="preview"><div class="preview-box">    <div id="draw-7">    <script type="module">  const Scheduler = require("scheduler");  const sleep = require("sleep");  const scheduler = new Scheduler();  const runTaskButton = document.getElementById("runTask");  const draw = document.getElementById("draw");  runTaskButton.onclick = () => {    console.log("æäº¤ä»»åŠ¡");    scheduler.commitTask(() => {      console.log("hello world1");      sleep(200);      draw.innerHTML = "task1";    });    scheduler.commitTask(() => {      console.log("hello world2");      sleep(200);      draw.innerHTML = "task2";    });    scheduler.commitTask(() => {      console.log("hello world3");      sleep(200);      draw.innerHTML = "task3";    });    scheduler.commitTask(() => {      console.log("hello world4");      sleep(200);      draw.innerHTML = "task4";    });    scheduler.commitTask(() => {      console.log("hello world5");      sleep(200);      draw.innerHTML = "task5";    });  };</script><button id="runTask">è¿è¡Œä»»åŠ¡</button><div id="draw"></div>    </div>    <div class="preview-box-util">        <span id="expand-7" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-7" class="preview-code false"><pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;module&quot;</span>&gt;</span><span class="language-javascript">  <span class="hljs-keyword">const</span> <span class="hljs-title class_">Scheduler</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;scheduler&quot;</span>);  <span class="hljs-keyword">const</span> sleep = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;sleep&quot;</span>);  <span class="hljs-keyword">const</span> scheduler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scheduler</span>();  <span class="hljs-keyword">const</span> runTaskButton = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;runTask&quot;</span>);  <span class="hljs-keyword">const</span> draw = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;draw&quot;</span>);  runTaskButton.<span class="hljs-property">onclick</span> = <span class="hljs-function">() =&gt;</span> &#123;    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;æäº¤ä»»åŠ¡&quot;</span>);    scheduler.<span class="hljs-title function_">commitTask</span>(<span class="hljs-function">() =&gt;</span> &#123;      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;hello world1&quot;</span>);      <span class="hljs-title function_">sleep</span>(<span class="hljs-number">200</span>);      draw.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&quot;task1&quot;</span>;    &#125;);    scheduler.<span class="hljs-title function_">commitTask</span>(<span class="hljs-function">() =&gt;</span> &#123;      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;hello world2&quot;</span>);      <span class="hljs-title function_">sleep</span>(<span class="hljs-number">200</span>);      draw.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&quot;task2&quot;</span>;    &#125;);    scheduler.<span class="hljs-title function_">commitTask</span>(<span class="hljs-function">() =&gt;</span> &#123;      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;hello world3&quot;</span>);      <span class="hljs-title function_">sleep</span>(<span class="hljs-number">200</span>);      draw.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&quot;task3&quot;</span>;    &#125;);    scheduler.<span class="hljs-title function_">commitTask</span>(<span class="hljs-function">() =&gt;</span> &#123;      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;hello world4&quot;</span>);      <span class="hljs-title function_">sleep</span>(<span class="hljs-number">200</span>);      draw.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&quot;task4&quot;</span>;    &#125;);    scheduler.<span class="hljs-title function_">commitTask</span>(<span class="hljs-function">() =&gt;</span> &#123;      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;hello world5&quot;</span>);      <span class="hljs-title function_">sleep</span>(<span class="hljs-number">200</span>);      draw.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&quot;task5&quot;</span>;    &#125;);  &#125;;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;runTask&quot;</span>&gt;</span>è¿è¡Œä»»åŠ¡<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;draw&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></code></pre></div><script>    const expandCode_7 = document.getElementById('expand-7');    const bindCode_7 = document.getElementById('code-7');    let flag_7 = true;    expandCode_7.onclick = function (){        if(flag_7){            bindCode_7.classList.add('preview-code-active')        }else{            bindCode_7.classList.remove('preview-code-active')         }        flag_7 = !flag_7    }</script></div>]]></content>
      
      
      <categories>
          
          <category> post </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>hookåŸç†</title>
      <link href="/2022/02/27/hook-yuan-li/"/>
      <url>/2022/02/27/hook-yuan-li/</url>
      
        <content type="html"><![CDATA[<div id="preview-0" class="preview"><div class="preview-box">    <div id="draw-0">    hookçš„ä½¿ç”¨ï¼Œå®ç°äº†useStateï¼ŒuseReduceï¼ŒuseEffect<div id="app"></div>    </div>    <div class="preview-box-util">        <span id="expand-0" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-0" class="preview-code false"><pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></code></pre></div><script>    const expandCode_0 = document.getElementById('expand-0');    const bindCode_0 = document.getElementById('code-0');    let flag_0 = true;    expandCode_0.onclick = function (){        if(flag_0){            bindCode_0.classList.add('preview-code-active')        }else{            bindCode_0.classList.remove('preview-code-active')         }        flag_0 = !flag_0    }</script></div><div id="preview-1" class="preview"><div class="preview-box">    <div id="draw-1">    ä»£ç <script type="module">                    (function(){                        let currentComponent;let currentIndex;const components = [];class Component {  __hooks = {    _hookList: [],    _effectHookList: [],    _cleanEffectHookList: [],    _layoutHookList: [],  };  diff() {}  // æ›´æ–°å‡½æ•°  update() {    this.render();  }  beforeRender() {    currentIndex = 0;    currentComponent = this;  }  afterRender() {    this.__hooks._cleanEffectHookList.forEach((fn) => {      fn();    });    this.__hooks._cleanEffectHookList = [];    this.__hooks._effectHookList.forEach((fn) => {      const clean = fn();      if (typeof clean === "function") {        this.__hooks._cleanEffectHookList.push(clean);      }    });    this.__hooks._effectHookList = [];  }  afterDomRender() {    this.__hooks._layoutHookList.forEach((fn) => {      fn();    });    this.__hooks._layoutHookList = [];  }  render() {    this.beforeRender();    const [state, setState] = useState(0);    useEffect(() => {      console.log("useEffect mount");      return () => {        console.log("useEffect clear");      };    }, [state]);    useLayoutEffect(() => {      console.log("useLayout Render");    }, []);    this.afterRender();    const dom = document.getElementById("app");    let text;    if (!(text = document.getElementById("text"))) {      text = document.createElement("h1");      text.id = "text";      dom.appendChild(text);    }    let button;    if (!(button = document.getElementById("button"))) {      button = document.createElement("button");      button.id = "button";      button.textContent = "add";      dom.appendChild(button);    }    let subButton;    if (!(subButton = document.getElementById("button1"))) {      subButton = document.createElement("button");      subButton.id = "button1";      subButton.textContent = "sub";      dom.appendChild(subButton);    }    subButton.onclick = () => {      setState(state - 1);    };    button.onclick = () => {      setState(state + 1);    };    text.textContent = state;    this.afterDomRender();  }}new Component().render();function getHookState(index) {  const hooks = currentComponent.__hooks;  // åŠ å…¥çš„  // []  // [useState,useState,useState]...  if (index >= hooks._hookList.length) {    // æ¯ç§ç±»å‹çš„hookçš„å±æ€§æ˜¯ä¸åŒçš„    hooks._hookList.push({});  }  return hooks._hookList[index];}function useState(initState) {  return useReducer((initState, action) => action, initState);}function useReducer(reducer, initState) {  const hookState = getHookState(currentIndex++);  // hook æ˜¯å¦åˆå§‹åŒ–  if (!hookState.__value) {    hookState.__value = [      // value      initState,      // dispatch      (action) => {        const nextValue = reducer(hookState.__value[0], action);        hookState.__value[0] = nextValue;        hookState._component.update();      },    ];    if (!hookState._component) {      hookState._component = currentComponent;    }  }  return hookState.__value;}function useEffect(cb, deps) {  const hookState = getHookState(currentIndex++);  if (!hookState._value || isChange(deps, hookState.__value[1])) {    hookState.__value = [];    hookState.__value[0] = cb;    hookState.__value[1] = deps;    currentComponent.__hooks._effectHookList.push(hookState.__value[0]);  }}function useLayoutEffect(cb, deps) {  const hookState = getHookState(currentIndex++);  if (!hookState._value || isChange(deps, hookState.__value[1])) {    hookState.__value = [];    hookState.__value[0] = cb;    hookState.__value[1] = deps;    currentComponent.__hooks._layoutHookList.push(hookState.__value[0]);  }}function isChange(oldArgs, newArgs) {  return (    !oldArgs ||    oldArgs.length !== newArgs.length ||    newArgs.some((arg, index) => arg !== oldArgs[index])  );}                    })(1)                </script>    </div>    <div class="preview-box-util">        <span id="expand-1" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-1" class="preview-code false"><pre><code class="hljs"><span class="hljs-keyword">let</span> currentComponent;<span class="hljs-keyword">let</span> currentIndex;<span class="hljs-keyword">const</span> components = [];<span class="hljs-keyword">class</span> <span class="hljs-title class_">Component</span> &#123;  __hooks = &#123;    <span class="hljs-attr">_hookList</span>: [],    <span class="hljs-attr">_effectHookList</span>: [],    <span class="hljs-attr">_cleanEffectHookList</span>: [],    <span class="hljs-attr">_layoutHookList</span>: [],  &#125;;  <span class="hljs-title function_">diff</span>(<span class="hljs-params"></span>) &#123;&#125;  <span class="hljs-comment">// æ›´æ–°å‡½æ•°</span>  <span class="hljs-title function_">update</span>(<span class="hljs-params"></span>) &#123;    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>();  &#125;  <span class="hljs-title function_">beforeRender</span>(<span class="hljs-params"></span>) &#123;    currentIndex = <span class="hljs-number">0</span>;    currentComponent = <span class="hljs-variable language_">this</span>;  &#125;  <span class="hljs-title function_">afterRender</span>(<span class="hljs-params"></span>) &#123;    <span class="hljs-variable language_">this</span>.<span class="hljs-property">__hooks</span>.<span class="hljs-property">_cleanEffectHookList</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">fn</span>) =&gt;</span> &#123;      <span class="hljs-title function_">fn</span>();    &#125;);    <span class="hljs-variable language_">this</span>.<span class="hljs-property">__hooks</span>.<span class="hljs-property">_cleanEffectHookList</span> = [];    <span class="hljs-variable language_">this</span>.<span class="hljs-property">__hooks</span>.<span class="hljs-property">_effectHookList</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">fn</span>) =&gt;</span> &#123;      <span class="hljs-keyword">const</span> clean = <span class="hljs-title function_">fn</span>();      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> clean === <span class="hljs-string">&quot;function&quot;</span>) &#123;        <span class="hljs-variable language_">this</span>.<span class="hljs-property">__hooks</span>.<span class="hljs-property">_cleanEffectHookList</span>.<span class="hljs-title function_">push</span>(clean);      &#125;    &#125;);    <span class="hljs-variable language_">this</span>.<span class="hljs-property">__hooks</span>.<span class="hljs-property">_effectHookList</span> = [];  &#125;  <span class="hljs-title function_">afterDomRender</span>(<span class="hljs-params"></span>) &#123;    <span class="hljs-variable language_">this</span>.<span class="hljs-property">__hooks</span>.<span class="hljs-property">_layoutHookList</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">fn</span>) =&gt;</span> &#123;      <span class="hljs-title function_">fn</span>();    &#125;);    <span class="hljs-variable language_">this</span>.<span class="hljs-property">__hooks</span>.<span class="hljs-property">_layoutHookList</span> = [];  &#125;  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">beforeRender</span>();    <span class="hljs-keyword">const</span> [state, setState] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;useEffect mount&quot;</span>);      <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> &#123;        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;useEffect clear&quot;</span>);      &#125;;    &#125;, [state]);    <span class="hljs-title function_">useLayoutEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;useLayout Render&quot;</span>);    &#125;, []);    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">afterRender</span>();    <span class="hljs-keyword">const</span> dom = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;app&quot;</span>);    <span class="hljs-keyword">let</span> text;    <span class="hljs-keyword">if</span> (!(text = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;text&quot;</span>))) &#123;      text = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;h1&quot;</span>);      text.<span class="hljs-property">id</span> = <span class="hljs-string">&quot;text&quot;</span>;      dom.<span class="hljs-title function_">appendChild</span>(text);    &#125;    <span class="hljs-keyword">let</span> button;    <span class="hljs-keyword">if</span> (!(button = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;button&quot;</span>))) &#123;      button = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;button&quot;</span>);      button.<span class="hljs-property">id</span> = <span class="hljs-string">&quot;button&quot;</span>;      button.<span class="hljs-property">textContent</span> = <span class="hljs-string">&quot;add&quot;</span>;      dom.<span class="hljs-title function_">appendChild</span>(button);    &#125;    <span class="hljs-keyword">let</span> subButton;    <span class="hljs-keyword">if</span> (!(subButton = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;button1&quot;</span>))) &#123;      subButton = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;button&quot;</span>);      subButton.<span class="hljs-property">id</span> = <span class="hljs-string">&quot;button1&quot;</span>;      subButton.<span class="hljs-property">textContent</span> = <span class="hljs-string">&quot;sub&quot;</span>;      dom.<span class="hljs-title function_">appendChild</span>(subButton);    &#125;    subButton.<span class="hljs-property">onclick</span> = <span class="hljs-function">() =&gt;</span> &#123;      <span class="hljs-title function_">setState</span>(state - <span class="hljs-number">1</span>);    &#125;;    button.<span class="hljs-property">onclick</span> = <span class="hljs-function">() =&gt;</span> &#123;      <span class="hljs-title function_">setState</span>(state + <span class="hljs-number">1</span>);    &#125;;    text.<span class="hljs-property">textContent</span> = state;    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">afterDomRender</span>();  &#125;&#125;<span class="hljs-keyword">new</span> <span class="hljs-title class_">Component</span>().<span class="hljs-title function_">render</span>();<span class="hljs-keyword">function</span> <span class="hljs-title function_">getHookState</span>(<span class="hljs-params">index</span>) &#123;  <span class="hljs-keyword">const</span> hooks = currentComponent.<span class="hljs-property">__hooks</span>;  <span class="hljs-comment">// åŠ å…¥çš„</span>  <span class="hljs-comment">// []</span>  <span class="hljs-comment">// [useState,useState,useState]...</span>  <span class="hljs-keyword">if</span> (index &gt;= hooks.<span class="hljs-property">_hookList</span>.<span class="hljs-property">length</span>) &#123;    <span class="hljs-comment">// æ¯ç§ç±»å‹çš„hookçš„å±æ€§æ˜¯ä¸åŒçš„</span>    hooks.<span class="hljs-property">_hookList</span>.<span class="hljs-title function_">push</span>(&#123;&#125;);  &#125;  <span class="hljs-keyword">return</span> hooks.<span class="hljs-property">_hookList</span>[index];&#125;<span class="hljs-keyword">function</span> <span class="hljs-title function_">useState</span>(<span class="hljs-params">initState</span>) &#123;  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useReducer</span>(<span class="hljs-function">(<span class="hljs-params">initState, action</span>) =&gt;</span> action, initState);&#125;<span class="hljs-keyword">function</span> <span class="hljs-title function_">useReducer</span>(<span class="hljs-params">reducer, initState</span>) &#123;  <span class="hljs-keyword">const</span> hookState = <span class="hljs-title function_">getHookState</span>(currentIndex++);  <span class="hljs-comment">// hook æ˜¯å¦åˆå§‹åŒ–</span>  <span class="hljs-keyword">if</span> (!hookState.<span class="hljs-property">__value</span>) &#123;    hookState.<span class="hljs-property">__value</span> = [      <span class="hljs-comment">// value</span>      initState,      <span class="hljs-comment">// dispatch</span>      <span class="hljs-function">(<span class="hljs-params">action</span>) =&gt;</span> &#123;        <span class="hljs-keyword">const</span> nextValue = <span class="hljs-title function_">reducer</span>(hookState.<span class="hljs-property">__value</span>[<span class="hljs-number">0</span>], action);        hookState.<span class="hljs-property">__value</span>[<span class="hljs-number">0</span>] = nextValue;        hookState.<span class="hljs-property">_component</span>.<span class="hljs-title function_">update</span>();      &#125;,    ];    <span class="hljs-keyword">if</span> (!hookState.<span class="hljs-property">_component</span>) &#123;      hookState.<span class="hljs-property">_component</span> = currentComponent;    &#125;  &#125;  <span class="hljs-keyword">return</span> hookState.<span class="hljs-property">__value</span>;&#125;<span class="hljs-keyword">function</span> <span class="hljs-title function_">useEffect</span>(<span class="hljs-params">cb, deps</span>) &#123;  <span class="hljs-keyword">const</span> hookState = <span class="hljs-title function_">getHookState</span>(currentIndex++);  <span class="hljs-keyword">if</span> (!hookState.<span class="hljs-property">_value</span> || <span class="hljs-title function_">isChange</span>(deps, hookState.<span class="hljs-property">__value</span>[<span class="hljs-number">1</span>])) &#123;    hookState.<span class="hljs-property">__value</span> = [];    hookState.<span class="hljs-property">__value</span>[<span class="hljs-number">0</span>] = cb;    hookState.<span class="hljs-property">__value</span>[<span class="hljs-number">1</span>] = deps;    currentComponent.<span class="hljs-property">__hooks</span>.<span class="hljs-property">_effectHookList</span>.<span class="hljs-title function_">push</span>(hookState.<span class="hljs-property">__value</span>[<span class="hljs-number">0</span>]);  &#125;&#125;<span class="hljs-keyword">function</span> <span class="hljs-title function_">useLayoutEffect</span>(<span class="hljs-params">cb, deps</span>) &#123;  <span class="hljs-keyword">const</span> hookState = <span class="hljs-title function_">getHookState</span>(currentIndex++);  <span class="hljs-keyword">if</span> (!hookState.<span class="hljs-property">_value</span> || <span class="hljs-title function_">isChange</span>(deps, hookState.<span class="hljs-property">__value</span>[<span class="hljs-number">1</span>])) &#123;    hookState.<span class="hljs-property">__value</span> = [];    hookState.<span class="hljs-property">__value</span>[<span class="hljs-number">0</span>] = cb;    hookState.<span class="hljs-property">__value</span>[<span class="hljs-number">1</span>] = deps;    currentComponent.<span class="hljs-property">__hooks</span>.<span class="hljs-property">_layoutHookList</span>.<span class="hljs-title function_">push</span>(hookState.<span class="hljs-property">__value</span>[<span class="hljs-number">0</span>]);  &#125;&#125;<span class="hljs-keyword">function</span> <span class="hljs-title function_">isChange</span>(<span class="hljs-params">oldArgs, newArgs</span>) &#123;  <span class="hljs-keyword">return</span> (    !oldArgs ||    oldArgs.<span class="hljs-property">length</span> !== newArgs.<span class="hljs-property">length</span> ||    newArgs.<span class="hljs-title function_">some</span>(<span class="hljs-function">(<span class="hljs-params">arg, index</span>) =&gt;</span> arg !== oldArgs[index])  );&#125;</code></pre></div><script>    const expandCode_1 = document.getElementById('expand-1');    const bindCode_1 = document.getElementById('code-1');    let flag_1 = true;    expandCode_1.onclick = function (){        if(flag_1){            bindCode_1.classList.add('preview-code-active')        }else{            bindCode_1.classList.remove('preview-code-active')         }        flag_1 = !flag_1    }</script></div>]]></content>
      
      
      <categories>
          
          <category> post </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ€åŒ–å»ºç«™</title>
      <link href="/2022/02/10/dong-tai-hua-jian-zhan/"/>
      <url>/2022/02/10/dong-tai-hua-jian-zhan/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡å¯¹å»ºç«™åšäº†ä¸€ç§ demo å®ç°ï¼Œå¹¶ä¸ä»£è¡¨èƒ½å¤Ÿåº”å¯¹çœŸæ­£ç”Ÿäº§ç¯å¢ƒçš„å¤æ‚åœºæ™¯</p><p>è°ƒç ”å¤§é‡å»ºç«™å¹³å°ï¼Œå‘ç°å¤§éƒ¨åˆ†å»ºç«™ç•Œé¢é•¿çš„å‡ ä¹ä¸€è‡´ï¼Œæ•°æ®ç»“æ„å±‚ä¹ŸåŸºæœ¬ä¸€è‡´ï¼Œé‚£ä¹ˆå°±æƒ³åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œèƒ½ä¸èƒ½æŠŠé€šç”¨çš„æ•°æ®å±‚/è§†å›¾å±‚æŠ½ç¦»,ä½œä¸ºåŸºç¡€ï¼Œé€šè¿‡åŠ¨æ€åŠ è½½ç»„ä»¶çš„æ–¹å¼æ»¡è¶³ä¸åŒçš„é¡µé¢æ­å»ºåœºæ™¯ã€‚</p><p>æœ€å¼€å§‹çš„æƒ³æ³•æ˜¯é€šè¿‡ rollup + systemjs çš„æ–¹å¼ï¼Œç¼–è¯‘ç»„ä»¶ï¼Œç„¶ååŠ¨æ€åŠ è½½ç»„ä»¶ï¼Œä½†æ˜¯ä¼šæœ‰ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚ä¾èµ–åº“å…±äº«é—®é¢˜ï¼Œç»„ä»¶é—´ç›¸äº’å¼•ç”¨é—®é¢˜ï¼Œä¸€æ—¶é—´æ²¡ä»€ä¹ˆå¤´ç»ªå°±æ²¡ç»§ç»­æã€‚</p><p>åæ¥å‘ç° webpack çš„æ¨¡å—è”é‚¦å®Œç¾è§£å†³äº†ä¸Šé¢çš„é—®é¢˜ï¼Œç„¶åå¼€å§‹ä¸€é¡¿æŠ˜è…¾ç»ˆäºæˆåŠŸå®Œæˆäº†demoã€‚</p><p>æœ€ç»ˆæ•ˆæœ</p><p><img src="/imgs/editor.png" alt="æ•ˆæœ"></p><p>æ³¨æ„å›¾ä¸­çº¢çº¿çš„éƒ¨åˆ†éƒ½æ˜¯è¿œç«¯çš„ç»„ä»¶ã€‚</p><h3 id="å®ç°">å®ç°</h3><h4 id="ç»“æ„åˆ’åˆ†">ç»“æ„åˆ’åˆ†</h4><p>é€šè¿‡ mobx å°†æ•°æ®å±‚æŠ½ç¦»ï¼Œæ‰€ä»¥æˆ‘çš„å»ºç«™æ˜¯ä¸€ä¸ª monorepo çš„é¡¹ç›®ï¼Œé¡¹ç›®ç»“æ„å¦‚ä¸‹</p><pre><code class="hljs">.â”œâ”€â”€ basicComponents <span class="hljs-regexp">//</span> åŠ¨æ€ç»„ä»¶â”œâ”€â”€ render <span class="hljs-regexp">//</span> æ¸²æŸ“å™¨â”œâ”€â”€ store <span class="hljs-regexp">//</span> æ•°æ®å±‚â””â”€â”€ website <span class="hljs-regexp">//</span> å»ºç«™ç«™ç‚¹</code></pre><p>æ•°æ®å±‚è´Ÿè´£ç»„ä»¶åº“ï¼Œå†å²è®°å½•ï¼Œç¼–è¾‘å™¨çš„æ•°æ®ï¼Œæ¸²æŸ“å™¨çš„æ•°æ®ï¼Œæ¯æ¬¡æ•°æ®å±‚çš„å˜æ›´éƒ½ä¼šè§¦å‘ç›¸å…³æ•°æ®ä¾èµ–çš„ç»„ä»¶æ›´æ–°ã€‚</p><p>æ¸²æŸ“å™¨è´Ÿè´£åˆå§‹åŒ–æ¸²æŸ“å™¨ï¼Œhoc æ³¨å…¥ï¼Œç»„ä»¶ç”Ÿå‘½å‘¨æœŸå›è°ƒï¼Œæä¾›ä¸åŒåœºæ™¯ä¸‹çš„åˆå§‹åŒ–ä¸åŒæ¸²æŸ“</p><p>å»ºç«™ç«™ç‚¹å°±æ˜¯ä¸€ä¸ª demo é¡µé¢äº†ï¼Œä¸»è¦æ˜¯è§†å›¾å¸ƒå±€</p><p>åŠ¨æ€ç»„ä»¶æ˜¯è¿œç«¯ç»„ä»¶</p><h4 id="åŠ¨æ€åŠ è½½">åŠ¨æ€åŠ è½½</h4><p>è¿œç«¯ç»„ä»¶åº“ä»£ç å…¥å£éå¸¸ç®€å•</p><pre><code class="hljs"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Button</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./components/Button&quot;</span>;<span class="hljs-keyword">import</span> <span class="hljs-title class_">Page</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./components/Page&quot;</span>;<span class="hljs-keyword">import</span> <span class="hljs-title class_">Image</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./components/Image&quot;</span>;<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;  <span class="hljs-attr">components</span>: [<span class="hljs-title class_">Button</span>, <span class="hljs-title class_">Page</span>, <span class="hljs-title class_">Image</span>],&#125;;</code></pre><p>åªæ˜¯æš´éœ²ç»„ä»¶åˆ—è¡¨å³å¯</p><p>ç¼–è¾‘å™¨åˆå§‹åŒ– render æ—¶ï¼ŒåŠ¨æ€å¯¼å…¥ç»„ä»¶</p><pre><code class="hljs"><span class="hljs-comment">// è¿™é‡Œä»£ç æœ‰ç‚¹ä¸åˆç† remote/Button æŒ‡çš„æ˜¯è¿œç«¯çš„ç»„ä»¶åº“åé¢æ²¡æ¥å¾—åŠæ”¹ã€‚</span><span class="hljs-keyword">const</span> <span class="hljs-title class_">AButton</span> = <span class="hljs-keyword">await</span> <span class="hljs-title function_">import</span>(<span class="hljs-string">&quot;remote/Button&quot;</span>);<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> <span class="hljs-title class_">Com</span> <span class="hljs-keyword">of</span> <span class="hljs-title class_">AButton</span>.<span class="hljs-property">default</span>.<span class="hljs-property">components</span>) &#123;  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Com</span>.<span class="hljs-property">name</span> === <span class="hljs-string">&quot;container&quot;</span>) &#123;    <span class="hljs-title class_">Page</span> = <span class="hljs-title class_">Com</span>;  &#125;  editorStore.<span class="hljs-property">componentList</span>?.<span class="hljs-title function_">addEditorComponent</span>(<span class="hljs-title class_">Com</span>);&#125;</code></pre><p>å› ä¸ºç¯‡å¹…æœ‰é™å°±ä¸ä»‹ç»å¯¹äºåˆå§‹åŒ– render çš„ä¸€äº›æ“ä½œäº†ã€‚</p><p>è¿™æ ·æˆ‘ä»¬å°±æŠŠè¿œç«¯çš„ç»„ä»¶åº“é€šè¿‡åŠ¨æ€ import çš„æ–¹å¼å¯¼å…¥åˆ°é¡¹ç›®ä¸­äº†ã€‚</p><p>è¾¾åˆ°æˆ‘ä»¬æœ€å¼€å§‹çš„é¢„æœŸï¼ŒåŠ¨æ€åŠ è½½è¿œç«¯ç»„ä»¶åº“çš„ç›®çš„äº†ã€‚</p><h3 id="æ‹“å±•">æ‹“å±•</h3><p>å®é™…ä¸Šç°åœ¨æˆ‘ä»¬åŠ¨æ€åŠ è½½è¿˜å¤„äºéœ€è¦é€šè¿‡é™æ€é…ç½®å»è¯·æ±‚å¯¹åº”è¿œç«¯ç»„ä»¶ä»£ç ã€‚</p><pre><code class="hljs"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;host&quot;</span>,  <span class="hljs-attr">remotes</span>: &#123;    <span class="hljs-attr">remote</span>: <span class="hljs-string">&quot;remote@http://localhost:3001/remoteEntry.js&quot;</span>,  &#125;,  <span class="hljs-attr">shared</span>: &#123;    <span class="hljs-comment">// ...dependencies,</span>    <span class="hljs-attr">react</span>: &#123;      <span class="hljs-attr">singleton</span>: <span class="hljs-literal">true</span>,      <span class="hljs-comment">// requiredVersion: dependencies[&#x27;react&#x27;],</span>    &#125;,    <span class="hljs-string">&quot;react-dom&quot;</span>: &#123;      <span class="hljs-attr">singleton</span>: <span class="hljs-literal">true</span>,      <span class="hljs-comment">// requiredVersion: dependencies[&#x27;react-dom&#x27;],</span>    &#125;,  &#125;,&#125;;</code></pre><p>ä¹Ÿå°±æ˜¯è¿™éƒ¨åˆ†ä»£ç ï¼Œè™½ç„¶æˆ‘ä»¬æŠŠç¼–è¾‘å™¨å’Œç»„ä»¶ä¹‹é—´çš„å…³ç³»è§£è€¦äº†ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯æ˜¯çœŸæ­£æ„ä¹‰çš„æ­è€¦ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡åŠ¨æ€åŠ è½½ç»„ä»¶çš„æ–¹å¼è¿›è¡Œè¿œç«¯ç»„ä»¶çš„åŠ è½½ã€‚</p><p>å…·ä½“é…ç½®å¯ä»¥çœ‹è¿™ä¸ª</p><pre><code class="hljs"><span class="hljs-keyword">function</span> <span class="hljs-title function_">loadComponent</span>(<span class="hljs-params">scope, <span class="hljs-variable language_">module</span></span>) &#123;  <span class="hljs-keyword">return</span> <span class="hljs-keyword">async</span> () =&gt; &#123;    <span class="hljs-comment">// Initializes the shared scope. Fills it with known provided modules from this build and all remotes</span>    <span class="hljs-keyword">await</span> <span class="hljs-title function_">__webpack_init_sharing__</span>(<span class="hljs-string">&#x27;default&#x27;</span>);    <span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">window</span>[scope]; <span class="hljs-comment">// or get the container somewhere else</span>    <span class="hljs-comment">// Initialize the container, it may provide shared modules</span>    <span class="hljs-keyword">await</span> container.<span class="hljs-title function_">init</span>(__webpack_share_scopes__.<span class="hljs-property">default</span>);    <span class="hljs-keyword">const</span> factory = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">window</span>[scope].<span class="hljs-title function_">get</span>(<span class="hljs-variable language_">module</span>);    <span class="hljs-keyword">const</span> <span class="hljs-title class_">Module</span> = <span class="hljs-title function_">factory</span>();    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Module</span>;  &#125;;&#125;<span class="hljs-title function_">loadComponent</span>(<span class="hljs-string">&#x27;abtests&#x27;</span>, <span class="hljs-string">&#x27;test123&#x27;</span>);</code></pre><p><a href="https://webpack.js.org/concepts/module-federation/#dynamic-remote-containers">https://webpack.js.org/concepts/module-federation/#dynamic-remote-containers</a></p><p>é‚£ä¹ˆæœ‰äº†è¿™ä¸ªåŠŸèƒ½ä»¥åï¼Œæˆ‘ä»¬å¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼Œç¼–è¾‘å™¨å’Œç»„ä»¶ä¹‹é—´çš„å…³ç³»çªç„¶ä» 1 - 1 å˜æˆäº† 1 - nã€‚</p><p>æˆ‘å¯ä»¥ä» <a href="http://www.abc.com/components.js">www.abc.com/components.js</a> åŠ è½½ç»„ä»¶åˆ—è¡¨<br>è¿˜å¯ä»¥ä» <a href="http://www.cdf.com/components.js">www.cdf.com/components.js</a> åŠ è½½ç»„ä»¶åˆ—è¡¨</p><p>è¿™æ ·å°±å¯ä»¥ä¸ç”¨æ¯ä¸ªå»ºç«™éƒ½æä¸€å¥—è‡ªå·±çš„å»ºç«™ä»£ç å’Œç»„ä»¶åº“ä»£ç äº†ï¼Œå¯ä»¥ä¸€å¥—å»ºç«™ä»£ç å¤šå¥—ç»„ä»¶åº“ä»£ç ï¼Œå½“ç„¶è¿™åªæ˜¯æˆ‘çš„å‡è±¡ï¼Œç°å®ä¸–ç•Œå¯èƒ½è¿œæ¯”è¿™ä¸ªå¤æ‚ï¼Œæ»¡è¶³ä¸äº†è¿™ä¸ªéœ€æ±‚ã€‚</p><p>åœ¨è¿›ä¸€æ­¥æˆ‘ç”šè‡³å¯ä»¥åšä¸ªæœåŠ¡å™¨åŠ¨æ€åç»„ä»¶åˆ—è¡¨ç»™ç”¨æˆ·ï¼Œç¬é—´è§£å†³ç»„ä»¶ç™½åå•é—®é¢˜ï¼Œè¿˜å¯ä»¥åšç»„ä»¶çš„ç‰ˆæœ¬ç®¡ç†â€¦</p><h3 id="æœ€å">æœ€å</h3><p>ä¸Šè¿°çš„ä»£ç ä»“åº“åœ¨è¿™é‡Œ<br><a href="https://github.com/suxin2017/pixel-editor">https://github.com/suxin2017/pixel-editor</a></p>]]></content>
      
      
      <categories>
          
          <category> post </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æµ…è°ˆå‰ç«¯å¹¶è¡Œå¼€å‘ç—›ç‚¹</title>
      <link href="/2022/01/23/qian-tan-qian-duan-bing-xing-kai-fa-tong-dian/"/>
      <url>/2022/01/23/qian-tan-qian-duan-bing-xing-kai-fa-tong-dian/</url>
      
        <content type="html"><![CDATA[<p>é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹ url è·å–èµ„æºçš„æœ¬è´¨ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸€æ¡ url ä¼šè¯·æ±‚åˆ°ä»£ç†æœåŠ¡å™¨ï¼ˆnginxï¼‰ã€‚</p><p>ä»£ç†æœåŠ¡å™¨ä¼šå¸®åŠ©æˆ‘ä»¬é€‰æ‹©ç›®æ ‡èµ„æºï¼Œæˆ‘å°†ç›®æ ‡èµ„æºåˆ†ä¸ºä¸¤ç±»ã€‚</p><p>ä¸€ç±»æ˜¯é™æ€çš„ï¼ˆå˜æ›´é¢‘ç‡ä½ï¼‰ï¼Œé™æ€çš„ä¸»è¦åŒ…æ‹¬ htmlã€jsã€cssã€å›¾ç‰‡ã€è§†é¢‘</p><p>ä¸€ç±»æ˜¯åŠ¨æ€çš„ï¼ˆå˜æ›´é¢‘ç‡é«˜ï¼‰ï¼ŒåŠ¨æ€æ˜¯å¯å˜çš„ï¼Œæœ€ä¸»è¦ç‰¹ç‚¹æ˜¯ä¸¤æ¬¡è¯·æ±‚è¿”å›ç»“æœå¯èƒ½ä¸åŒï¼Œjsonã€jspã€ssrã€æ–‡ä»¶å¯¼å‡º</p><p>å½“æˆ‘ä»¬é€šè¿‡æµè§ˆå™¨å‘å‡ºä¸€ä¸ªè¯·æ±‚æ—¶å€™ï¼Œä¸€å®šæ˜¯è¿™ä¸¤ç±»ä¸­çš„ä¸€ç±»ï¼Œå’Œå‰ç«¯ç›¸å…³çš„ 80%ä»¥ä¸Šéƒ½æ˜¯åœ¨è¯·æ±‚é™æ€èµ„æºã€‚</p><p>å¦‚ä¸‹å›¾</p><p><img src="/imgs/%E6%B5%81%E7%A8%8B.png" alt="markdown-it ä¸­é—´ä»¶"></p><p>è¿™æ˜¯æˆ‘ä»¬çº¿ä¸Šä¸šåŠ¡çš„ä¸€èˆ¬æ€ï¼Œåœ¨æµ‹è¯•ç¯å¢ƒä¸‹æˆ‘ä»¬é¢ä¸´çš„æŒ‘æˆ˜æ¯”è¿™ä¸ªè¦å¤šä¸€äº›ã€‚</p><h3 id="æµ‹è¯•ç¯èŠ‚é™æ€èµ„æºä¸åŠ¨æ€èµ„æºçš„å…³ç³»">æµ‹è¯•ç¯èŠ‚é™æ€èµ„æºä¸åŠ¨æ€èµ„æºçš„å…³ç³»</h3><h4 id="n-0-å…³ç³»">n - 0 å…³ç³»</h4><p>çº¯é™æ€ç±»èµ„æºçš„å‰ç«¯åœºæ™¯</p><p>è¿™ç±»æŒ‡çš„æ˜¯æ— éœ€è¯·æ±‚åŠ¨æ€æ•°æ®çš„ï¼Œè¿™ç±»ç«™ç‚¹é€šå¸¸æ˜¯æ–‡æ¡£ç«™ï¼Œä½†æ˜¯ä¹Ÿæœ‰ç‰¹æ®Šçš„æ¯”å¦‚ä¸€äº› playground ã€æ­£åˆ™æ ¡éªŒç­‰ã€‚</p><p>æˆ‘ä»¬ä¼šæ ¹æ®éœ€æ±‚åˆ‡æ¢ä¸åŒåˆ†æ”¯ï¼Œè¿›è¡Œå¼€å‘ï¼Œè¿™æ—¶å€™çš„ç‰ˆæœ¬æ˜¯ åŠŸèƒ½é¢„è§ˆç‰ˆ ï¼Œåœ¨æŸç§åœºæ™¯ä¸‹ åŠŸèƒ½é¢„è§ˆç‰ˆ éœ€è¦è‡ªå·±çš„ç«™ç‚¹ã€‚</p><p>é¢ä¸´çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœå¿«é€Ÿé«˜æ•ˆçš„éƒ¨ç½²è‡ªå·±çš„åŠŸèƒ½é¢„è§ˆç«™ç‚¹ï¼Ÿ</p><h4 id="1-n-å…³ç³»">1 - n å…³ç³»</h4><p>è¿™ç±»æŒ‡çš„æ˜¯å‰ç«¯ä¸å˜åç«¯å˜åŒ–ï¼Œåç«¯éœ€è¦ä¸€ä¸ªå’Œçº¿ä¸Šä¸€è‡´çš„æµ‹è¯•ç¯å¢ƒå»éªŒè¯è‡ªå·±çš„ä¿®æ”¹æ˜¯å¦æ­£ç¡®ã€‚</p><p>é¢ä¸´çš„é—®é¢˜æ˜¯ï¼Œéœ€è¦ä¿è¯æµ‹è¯•ç¯å¢ƒä¸€ç›´æœ‰ä¸€ä¸ªç¨³å®šçš„çº¿ä¸Šå‰ç«¯ç¯èŠ‚ã€‚</p><h4 id="n-1-å…³ç³»">n - 1 å…³ç³»</h4><p>åªæ˜¯å‰ç«¯å˜åŠ¨ï¼Œåç«¯æ— éœ€å˜åŠ¨ï¼Œè¿™ä¸ªå’Œ n - 0 å…³ç³»é¢ä¸´çš„é—®é¢˜æ˜¯ä¸€æ ·çš„ã€‚</p><h4 id="n-m-å…³ç³»">n - m å…³ç³»</h4><p>è¿™æ˜¯æµ‹è¯•ç¯å¢ƒä¸‹æœ€å¸¸è§çš„ï¼Œå½“ä¸€ä¸ªéœ€æ±‚å¼€å‘æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦éƒ¨ç½²ä¸€ä»½å‰ç«¯å’Œä¸€ä»½åç«¯ï¼Œæä¾›ç»™æµ‹è¯•åŒå­¦æ£€éªŒã€‚</p><p>è¿™é‡Œé¢ä¸´çš„é—®é¢˜æ—¢åŒ…æ‹¬ n - 0 çš„é—®é¢˜ï¼Œè¿˜å­˜åœ¨å¦‚ä½•å¯¹åº”æŠŠå‰ç«¯ä¸åç«¯å…³è”èµ·æ¥ã€‚</p><p>é’ˆå¯¹ä¸Šé¢çš„å…³ç³»æˆ‘ä»¬æ€»ç»“å‡ºéœ€è¦è§£å†³çš„ä¸¤ä¸ªé—®é¢˜ç‚¹ï¼š</p><ol><li>å¦‚ä½•å¿«é€Ÿéƒ¨ç½²æ–°åŠŸèƒ½å‰ç«¯ç«™ç‚¹</li><li>å¦‚ä½•ç»‘å®šå‰ç«¯ä¸åç«¯</li></ol><h3 id="å¿«ç†Ÿéƒ¨ç½²æ–°åŠŸèƒ½çš„å‰ç«¯ç«™ç«™ç‚¹">å¿«ç†Ÿéƒ¨ç½²æ–°åŠŸèƒ½çš„å‰ç«¯ç«™ç«™ç‚¹</h3><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ¨ç½²å‰ç«¯ç«™ç‚¹ï¼Œéœ€è¦ç”³è¯·ä¸€å°æœºå™¨ï¼ˆå®¹å™¨èŠ‚ç‚¹ï¼‰ï¼Œç„¶åé…ç½® ngï¼Œå°†è¯·æ±‚æŒ‡å‘å¯¹åº”é™æ€èµ„æºç›®å½•ã€‚</p><p>è¿™äº›åŠ¨ä½œæ˜¯é‡å¤çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¼•å…¥ä¸€ä¸ªå¹³å°å»å¸®æˆ‘ä»¬åšè¿™äº›äº‹æƒ…ã€‚</p><p>å‡è®¾å½“å‰æœ‰ä¸€ä¸ªé¡¹ç›® Aï¼Œæ­£åœ¨å¹¶è¡Œå¼€å‘åŠŸèƒ½ Aã€‚</p><p>å¹³å°åŠŸèƒ½ä¸»è¦åŒ…æ‹¬ï¼š</p><ol><li>èµ„æºéš”ç¦»<br>å¯¹äºé¡¹ç›® A çš„åŠŸèƒ½ Aï¼Œéœ€è¦å­˜æ”¾åˆ°èµ„æºç›®å½• /é¡¹ç›®_A/åŠŸèƒ½_Aï¼Œè¿™æ ·åªéœ€è¦æ ¹æ®æŸäº›ç‰¹å¾å€¼å‘é€è¿™äº›æ–‡ä»¶å°±å¯ä»¥å•¦ã€‚</li><li>èµ„æºæ˜ å°„<br>ä¸¤ç§èµ„æºæ˜ å°„æ“ä½œï¼ŒåŠ¨æ€åŸŸåï¼Œç‰¹å¾è·¯ç”±<br>åŠ¨æ€åŸŸåæ˜¯æŒ‡é€šè¿‡å­åŸŸåè¿›è¡ŒåŒºåˆ†ï¼Œæ¯”å¦‚ <a href="http://xn---A---A-ze4jr21vk6ssv7c.ci.com">é¡¹ç›®-A--åŠŸèƒ½-A.ci.com</a><br>é€šè¿‡ç‰¹ç§è·¯ç”±çš„æ–¹å¼ï¼Œé€šè¿‡ header è¿›è¡Œæ ‡è¯†è¦è¯·æ±‚é‚£ä¸ªåŠŸèƒ½ï¼Œæ¯”å¦‚åœ¨ header æ·»åŠ  special-headerï¼šé¡¹ç›®_A-åŠŸèƒ½_A</li></ol><table><thead><tr><th></th><th>åŠ¨æ€åŸŸå</th><th>ç‰¹å¾è·¯ç”±</th></tr></thead><tbody><tr><td>ä¼˜ç‚¹</td><td>ç›¸æ¯”äº header æ–¹å¼ç”¨æˆ·æ›´æ–¹ä¾¿ä½¿ç”¨</td><td>å…¨éƒ¨åœºæ™¯è¦†ç›–</td></tr><tr><td>ç¼ºç‚¹</td><td>å¯¹äºæŸäº›ç‰¹å®šåœºæ™¯åŠ¨æ€åŸŸåæ— æ³•æ”¯æŒï¼Œæ¯”å¦‚åªé’ˆå¯¹ç™½åå•åŸŸåè¿›è¡Œæƒé™æ ¡éªŒç­‰</br>éœ€è¦é…ç½®æ¥å£ä»£ç†ï¼Œè½¬å‘åˆ°æŒ‡å®šåç«¯</td><td>éœ€è¦ä½¿ç”¨æµè§ˆå™¨æ’ä»¶çš„æ–¹å¼æ‰‹åŠ¨æ³¨å…¥ header</td></tr></tbody></table><ol start="3"><li>æ¥å£ä»£ç†ç»‘å®šå‰åç«¯<br>å¦‚æœä½¿ç”¨åŠ¨æ€åŸŸåçš„æ–¹å¼æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨æŒ‡å®šæ¥å£ä»£ç†ï¼Œå¦‚ä½•æ­å»ºä¸€ä¸ªè‡ªå·±çš„ä»£ç†æœåŠ¡ï¼Ÿ<br>ç›®å‰å¯ä»¥æœ‰ä¸‰ç§æ–¹æ¡ˆï¼Œnginx æ‹“å±•ã€http-proxy-middlewareã€whistle<br>å¯¹äºå‰ç«¯æœ€å¥½ä¸Šæ‰‹çš„æ˜¯ http-proxy-middleware å¦å¤–ä¸¤ä¸ªä¹Ÿå¯ä»¥å®ç°ä½†æ˜¯ç›¸å¯¹æˆæœ¬é«˜äº›ã€‚</li></ol><p>é€šè¿‡å¹³å°æä¾›è¿™äº›å¸¸ç”¨çš„èƒ½åŠ›å°±å¯ä»¥æ»¡è¶³ä¸Šé¢æ‰€æœ‰åœºæ™¯å•¦ã€‚</p><p>å¥½äº†ä¸Šé¢å°±æ˜¯å¦‚ä½•é’ˆå¯¹å‰ç«¯å¹¶è¡Œå¼€å‘çš„åœºæ™¯ï¼Œéœ€è¦åšçš„ä¸€åˆ‡äº†ï¼Œä¸‹é¢æ˜¯ä¸€äº›ä¸ªäººæ€è€ƒã€‚</p><h4 id="ä¸€äº›æ€è€ƒ">ä¸€äº›æ€è€ƒ</h4><ol><li>å®¹å™¨åŒ–å‰ç«¯åœºæ™¯æµ‹è¯•ç¯å¢ƒæ˜¯å¦é€‚ç”¨ï¼Ÿ<br>ä¸å¯å¦è®¤å®¹å™¨æŠ€æœ¯å¸¦æ¥çš„ä¾¿åˆ©ï¼ŒåŠ¨æ€æ‰©å®¹ï¼Œç¯å¢ƒéš”ç¦»ç­‰ä¼˜åŠ¿ï¼Œä½†æ˜¯é’ˆå¯¹æµ‹è¯•ç¯å¢ƒçš„å‰ç«¯è¿™äº›ä¼˜åŠ¿æ˜¾ç„¶æ— ç”¨æ­¦ä¹‹åœ°ã€‚<br>æµ‹è¯•ç¯å¢ƒçš„å‰ç«¯æ²¡é‚£ä¹ˆå¤§çš„å‹åŠ›ï¼ŒåŸºæœ¬ä¸Šæ— éœ€æ‰©å®¹ï¼Œéœ€è¦èµ„æºæä½ï¼Œæ›´éœ€è¦çš„æ˜¯å¿«é€Ÿäº¤ä»˜ç»™æµ‹è¯•åŒå­¦æ ¡éªŒã€‚<br>ç„¶åä½¿ç”¨å®¹å™¨ï¼Œéœ€è¦å¯åœï¼Œæ‰“åŒ…é•œåƒï¼Œæ˜¾ç„¶æ‹‰é•¿äº†è¿™ä¸€è¿‡ç¨‹ã€‚</li><li>ä¸€ä¸ªäº§å“èƒ½å¦æ‰“åˆ°100%å®Œç¾ï¼Ÿ<br>ä¸å¯èƒ½ï¼Œæ²¡æœ‰ä¸€ä¸ªäº§å“èƒ½è¾¾åˆ°100%çš„å®Œç¾ï¼Œæ— è®ºè¿™ä¸ªäº§å“ç”¨æˆ·é‡å¤šå¤§ï¼Œéƒ½æ˜¯ä¸å¯èƒ½çš„ï¼ŒåŸå› åœ¨äºå±è‚¡å†³å®šè„‘è¢‹ï¼Œæ¯ä¸ªäººçš„å±è‚¡æ˜¯ä¸ä¸€æ ·çš„ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> post </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2022/01/05/v2022-01-05-10-43/"/>
      <url>/2022/01/05/v2022-01-05-10-43/</url>
      
        <content type="html"><![CDATA[<p>ä»æ¦‚ç‡ä¸Šæ¥è¯´ä¼šæœ‰ä»0åˆ°100çš„èŒƒå›´ï¼Œä½†æ˜¯ä»ä¸ªä½“ä¸Šæ¥è¯´åªæœ‰0å’Œ100ä¸¤ç§æƒ…å†µ</p>]]></content>
      
      
      <categories>
          
          <category> weibo </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å›½é™…åŒ–æ–¹æ¡ˆ</title>
      <link href="/2021/12/31/guo-ji-hua-fang-an/"/>
      <url>/2021/12/31/guo-ji-hua-fang-an/</url>
      
        <content type="html"><![CDATA[<h3 id="å‰ç«¯-i18n-åº“çš„é€‰æ‹©">å‰ç«¯ i18n åº“çš„é€‰æ‹©</h3><p>å¸‚é¢ä¸Šæ¯”è¾ƒæµè¡Œçš„åªæœ‰ä¸¤ç§ï¼Œä¸¤è€…åŠŸèƒ½å·®ä¸å¤ªå¤šã€‚</p><p><a href="https://react.i18next.com/">i18n-next</a></p><ul><li>å¯æ”¯æŒæ’ä»¶æ‹“å±•</li><li>ä¸æ”¯æŒç¼–è¯‘è‡ªåŠ¨ç”Ÿæˆ key ï¼ˆä½†æ˜¯å¯ä»¥ç›´æ¥ç”¨æ–‡æ¡ˆå½“ä½œ keyï¼‰</li></ul><p><a href="https://formatjs.io/docs/react-intl/">react-intl</a></p><ul><li>ä¸æ”¯æŒæ’ä»¶æ‹“å±•ï¼Œä½†æ”¯æŒé«˜é˜¶ hoc çš„æ‹“å±•</li><li>æ”¯æŒç¼–è¯‘æ—¶è‡ªåŠ¨ç”Ÿæˆ key</li></ul><h3 id="i18n-çš„æœ¬è´¨">i18n çš„æœ¬è´¨</h3><p>key - value æ˜ å°„<br>ä¸ç®¡å“ªç§æ–¹æ¡ˆéƒ½æ˜¯ key - value çš„æ˜ å°„ï¼ŒæŠ“ä½æœ¬è´¨ä»–çš„æ¦‚å¿µå°±å¾ˆå¥½ç†è§£ã€‚</p><p>å¦‚ä¸‹</p><pre><code class="hljs"><span class="hljs-comment">// åªæ˜¯åˆ‡æ¢æ—¶å€™åŠ è½½ä¸åŒå¯¹è±¡å†…å®¹ã€‚</span><span class="hljs-keyword">let</span> languages = &#123;  <span class="hljs-attr">en</span>: &#123;    <span class="hljs-string">&quot;common.hello&quot;</span>: <span class="hljs-string">&quot;hello&quot;</span>,  &#125;,  <span class="hljs-attr">zh</span>: &#123;    <span class="hljs-string">&quot;common.hello&quot;</span>: <span class="hljs-string">&quot;ä½ å¥½&quot;</span>,  &#125;,&#125;;</code></pre><h3 id="i18n-éœ€è¦è§£å†³çš„é—®é¢˜">i18n éœ€è¦è§£å†³çš„é—®é¢˜</h3><h4 id="key-çš„é€‰å–">key çš„é€‰å–</h4><p>å¦‚ä¸Šæ‰€è¿° react-intl æ”¯æŒè‡ªåŠ¨ç”Ÿæˆ keyï¼Œä¹Ÿæ”¯æŒæ‰‹å†™ keyã€‚<br>i18n-next è²Œä¼¼åªæ”¯æŒæ‰‹å†™ keyã€‚<br>key çš„å¸¸è§è§„åˆ™å¦‚ä¸‹</p><pre><code class="hljs"><span class="hljs-comment">// è§„åˆ™ä¸€ï¼šæ‰‹å†™ï¼ŒçŸ­è¯­æ‹¼æ¥</span><span class="hljs-keyword">let</span> languages = &#123;  <span class="hljs-attr">en</span>: &#123;    <span class="hljs-comment">// çŸ­è¯­æ–¹å¼å†™key</span>    <span class="hljs-string">&quot;common.hello&quot;</span>: <span class="hljs-string">&quot;hello&quot;</span>,  &#125;,&#125;;<span class="hljs-comment">// è§„åˆ™äºŒï¼š æ‰‹å†™ï¼Œç›´æ¥ç”¨æ–‡æ¡ˆå½“key</span><span class="hljs-keyword">let</span> languages = &#123;  <span class="hljs-attr">en</span>: &#123;    <span class="hljs-comment">// è¿™ç§å¯èƒ½æ–‡æ¡ˆç”Ÿæˆçš„jsonä¼šå¾ˆå¤§</span>    <span class="hljs-string">&quot;hello ,i am fine and you?&quot;</span>: <span class="hljs-string">&quot;hello ,i am fine and you?&quot;</span>,  &#125;,&#125;;<span class="hljs-comment">// è§„åˆ™ä¸‰ï¼š è‡ªåŠ¨ç”Ÿæˆ</span><span class="hljs-comment">//react intl æ”¯æŒè‡ªåŠ¨ç”Ÿæˆ</span><span class="hljs-comment">// ä¸¾ä¾‹</span><span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params"></span>) &#123;  <span class="hljs-keyword">const</span> intl = <span class="hljs-title function_">useIntl</span>();  <span class="hljs-keyword">return</span> intl.<span class="hljs-title function_">formatMessage</span>(&#123; <span class="hljs-attr">defaultMessage</span>: <span class="hljs-string">&quot;hello&quot;</span> &#125;);  <span class="hljs-comment">//                                          ^^^^^^^</span>  <span class="hljs-comment">// åœ¨ç¼–è¯‘æ—¶å€™ä¼šç»™ä½ ç”Ÿæˆ</span>  <span class="hljs-comment">// intl.formatMessage(&#123;id:&#x27;generateKeyRule(&quot;hello&quot;)&#x27;,defaultMessage:&quot;hello&quot;&#125;);</span>  <span class="hljs-comment">// generateKeyRul å¯ä»¥è‡ªå·±æŒ‡å®šï¼Œè¿˜æœ‰ä¸€äº›é¢å¤–ä¸Šä¸‹æ–‡å˜é‡å¯ä»¥ä½¿ç”¨ï¼Œæ¯”å¦‚æ–‡ä»¶è·¯å¾„ã€‚</span>  <span class="hljs-comment">// å¯ä»¥ç”Ÿæˆè¿™ç§å†…å®¹sha1</span>  <span class="hljs-comment">// intl.formatMessage(&#123;id:&#x27;asdjfkasjdfxxx&#x27;,defaultMessage:&quot;hello&quot;&#125;);</span>&#125;</code></pre><p>å¯¹æ¯”ä¸‹ä¸‰ç§è§„åˆ™ä¼˜ç¼ºç‚¹</p><table><thead><tr><th></th><th>æ‰‹å†™çŸ­è¯­</th><th>æ–‡æ¡ˆå°±æ˜¯ key</th><th>è‡ªåŠ¨ç”Ÿæˆ</th></tr></thead><tbody><tr><td>ä¼˜ç‚¹</td><td>æ— æ–‡æ¡ˆä¾èµ–ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒåªä½œä¸ºé¡µé¢çš„ä¸€ä¸ªå ä½ç¬¦ï¼Œä½ æƒ³æ¢æ–‡æ¡ˆå°±å¯ä»¥æ¢æ–‡æ¡ˆ</td><td>æ— æ–‡æ¡ˆä¾èµ–ï¼Œç›¸æ¯”æ‰‹å†™æ›´åŠ æ˜“äºç†è§£</td><td>æ— æ–‡æ¡ˆ key ç»´æŠ¤æˆæœ¬,ç¿»è¯‘æ˜“äºå¤ç”¨</td></tr><tr><td>ç¼ºç‚¹</td><td>ç´¯ï¼Œç»´æŠ¤ key è´¼ç´¯ï¼Œç¿»è¯‘å¯èƒ½ä¸æ˜“å¤ç”¨</td><td>ä»£ç æ˜¾ç¤ºæ–‡æ¡ˆå¯èƒ½ä¸çº¿ä¸Šæ˜¾ç¤ºæ–‡æ¡ˆä¸ç¬¦</td><td>ä¾èµ–æ–‡æ¡ˆç”Ÿæˆ keyï¼Œä¾èµ–æ–‡æ¡ˆçš„å˜æ›´éœ€è¦é‡æ–°ç”Ÿæˆ keyï¼Œé‡æ–°ä¸Šçº¿,æ–‡æ¡ˆå†²çªé¢‘ç‡å˜é«˜ï¼Œéœ€è¦é€‰æ‹©ä¸€ç§åŸºå‡†æ–‡æ¡ˆï¼ˆå»ºè®®é¡¹ç›®æ¯è¯­ï¼Œå˜æ›´é¢‘ç‡æœ€ä½ï¼‰</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>æ–‡æ¡ˆå°‘ï¼Œå˜æ›´é¢‘ç¹ï¼Œå¯è‡ªå®šä¹‰è¦†ç›–ï¼Œc ç«¯ï¼Œç»„ä»¶åº“</td><td>æ²¡æƒ³å¥½</td><td>æ–‡æ¡ˆå¤šï¼Œå˜æ›´ä¸é¢‘ç¹ï¼Œb ç«¯</td></tr></tbody></table><p>ps: æ–‡æ¡ˆå†²çª</p><pre><code class="hljs"><span class="hljs-comment">// è‡ªåŠ¨ç”Ÿæˆkeyçš„æ–‡æ¡ˆå†²çªé—®é¢˜</span><span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params"></span>) &#123;  <span class="hljs-keyword">const</span> intl = <span class="hljs-title function_">useIntl</span>();  <span class="hljs-keyword">return</span> intl.<span class="hljs-title function_">formatMessage</span>(&#123; <span class="hljs-attr">defaultMessage</span>: <span class="hljs-string">&quot;select&quot;</span> &#125;);  <span class="hljs-comment">//                                          ^^^^^^^</span>  <span class="hljs-comment">// å¯¹åº”ä¸­æ–‡å¯èƒ½æ˜¯ é€‰æ‹©å›¾ç‰‡ï¼Œé€‰æ‹©è§†é¢‘</span>  <span class="hljs-comment">// è§£å†³åŠæ³•ï¼Œæ·»åŠ æè¿°æ€§è¯­å¥è¾…åŠ©ç”Ÿæˆkey</span>  <span class="hljs-comment">// return intl.formatMessage(&#123; defaultMessage: &quot;select&quot;,  description: &#x27;image&#x27;, &#125;);</span>  <span class="hljs-comment">// zh: é€‰æ‹©å›¾åƒ key-&gt; select#video (react-intl æ‹¼æ¥è§„åˆ™)</span>  <span class="hljs-comment">// return intl.formatMessage(&#123; defaultMessage: &quot;select&quot;,  description: &#x27;video&#x27;, &#125;);</span>  <span class="hljs-comment">// zh: é€‰æ‹©è§†é¢‘ key-&gt; select#video (react-intl æ‹¼æ¥è§„åˆ™)</span>  <span class="hljs-comment">// return intl.formatMessage(&#123; defaultMessage: &quot;select&quot; &#125;);</span>  <span class="hljs-comment">// zh: é€‰æ‹© key-&gt; select</span>&#125;</code></pre><h3 id="å¯èƒ½é‡è§çš„çŠ¶å†µï¼ˆä½é¢‘ï¼‰">å¯èƒ½é‡è§çš„çŠ¶å†µï¼ˆä½é¢‘ï¼‰</h3><p>è´§å¸ï¼Œæ•°å­—å›½é™…åŒ–ï¼Œi18n æ˜¯æä¾›è¿™ä¸ª api çš„ï¼Œå¯æ”¾å¿ƒé£Ÿç”¨ã€‚</p><h3 id="åŸºç¡€åº“è§£å†³çš„é—®é¢˜">åŸºç¡€åº“è§£å†³çš„é—®é¢˜</h3><ul><li>æ–‡æ¡ˆæå–çš„èƒ½åŠ›ã€‚</li></ul><pre><code class="hljs"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params"></span>) &#123;  <span class="hljs-keyword">const</span> intl = <span class="hljs-title function_">useIntl</span>();  <span class="hljs-keyword">return</span> intl.<span class="hljs-title function_">formatMessage</span>(&#123; <span class="hljs-attr">defaultMessage</span>: <span class="hljs-string">&quot;hello&quot;</span> &#125;);  <span class="hljs-comment">// return intl.formatMessage(&#123; id:&quot;id&quot;, defaultMessage: &quot;hello&quot; &#125;);</span>&#125;<span class="hljs-comment">// ===&gt; æå–json</span><span class="hljs-comment">// ç±»ä¼¼è¿™ç§</span><span class="hljs-comment">// &#123;</span><span class="hljs-comment">// &quot;id || generateKeyRule(text)&quot; : &quot;hello&quot;</span><span class="hljs-comment">// &#125;</span></code></pre><ul><li>key-value æ˜ å°„</li></ul><h3 id="åŸºç¡€åº“æœªè§£å†³çš„é—®é¢˜">åŸºç¡€åº“æœªè§£å†³çš„é—®é¢˜</h3><ul><li>æ–‡æ¡ˆç®¡ç†</li></ul><p>éšç€ä¸šåŠ¡è¿­ä»£ï¼Œæ–‡æ¡ˆè¶Šæ¥è¶Šå¤šï¼Œä¼šæœ‰åºŸå¼ƒæ–‡æ¡ˆï¼Œæ–°å¢æ–‡æ¡ˆçš„æ¦‚å¿µã€‚<br>éœ€è¦ä¸€ä¸ªå¹³å°å­˜å‚¨æ–‡æ¡ˆï¼Œç„¶åå‰ç«¯é¡¹ç›®è·å–æ–‡æ¡ˆï¼Œå¯æ ¹æ®ä»é¡¹ç›®ä¸­æå–çš„æ–‡æ¡ˆä¸å­˜å‚¨æ–‡æ¡ˆçš„åœ°æ–¹åšå¯¹æ¯”ï¼Œç„¶åè·å–æ–‡æ¡ˆã€‚</p><ul><li>æ–‡æ¡ˆå®Œæ•´åº¦</li></ul><p>å¦‚ä½•ç¡®ä¿å¤šå›½ç¿»è¯‘ï¼Œæˆ–è€…éƒ¨åˆ†å›½ç¿»è¯‘ 100%å·²æœ‰ç¿»è¯‘ï¼Œè¿˜æ˜¯éœ€è¦ä»é¡¹ç›®ä¸­è·å–é¡¹ç›®ä¸­ä½¿ç”¨çš„æ–‡æ¡ˆï¼Œç„¶åå¯¹æ¯”è¯­è¨€åŒ…ã€‚</p><ul><li>ç¿»è¯‘æµç¨‹</li></ul><p>ä¸€æ¡æ–‡æ¡ˆçš„äº§ç”Ÿçš„æºå¤´é€šå¸¸ prdï¼Œç„¶åè®¾è®¡å¤åˆ¶ä¸€ä»½å¹¶æ‹“å±•ï¼Œç„¶åç ”å‘æ ¹æ®è®¾è®¡ç¨¿å¼€å‘ï¼Œå½“ææµ‹æ˜¯åº”æäº¤é¡¹ç›®ä¸­çš„æ–‡æ¡ˆåˆ°ï¼Œå¾…ç¿»è¯‘çŠ¶æ€ï¼Œç„¶åç¿»è¯‘ç»„/äº§å“/æœºç¿»ï¼Œè¿›è¡Œç¿»è¯‘ï¼Œç„¶åå‰ç«¯é¡¹ç›®è·å–è¿™äº›æ–‡æ¡ˆï¼Œè¿›è¡Œæ–‡æ¡ˆå®Œæ•´åº¦ä¸Šçº¿å‰æ£€æµ‹å³å¯ã€‚<br>è¿™ä¸ªæ˜¯æœ€éš¾çš„ï¼Œè¦æ‹‰èµ·è®¾è®¡ã€äº§å“ã€ç ”å‘çš„è®¤çŸ¥æ‰èƒ½æã€‚</p><ul><li><p>ç¿»è¯‘æ–‡æ¡ˆ</p><p>å¦‚ä½•ä¿è¯ä¸€æ¡æ–‡æ¡ˆåœ¨è¯­å¢ƒä¸‹çš„æ­£ç¡®æ€§ï¼Ÿ</p><ul><li>æ–¹æ¡ˆä¸€ï¼š<br>æ–‡æ¡ˆ+è®¾è®¡å›¾<br>å®ç°éš¾åº¦ä½</li><li>æ–¹æ¡ˆäºŒï¼š<br>æ–‡æ¡ˆ+é¡µé¢<br>å®ç°éš¾åº¦å¤æ‚</li></ul></li><li><p>æ–‡æ¡ˆå…³è”é¡µé¢</p><p>å¯é€šè¿‡webpack æ’ä»¶å¼€å‘å¤„ç†chunkä¿¡æ¯è·å–</p><p>æ‰€ä»¥éœ€è¦ä¸€ä¸ªå¹³å°/å¹³å°å‘¨è¾¹ç”Ÿæ€å»åšè¿™äº›äº‹</p></li></ul><h3 id="å‚è€ƒ">å‚è€ƒ</h3><p>i18n-next æ–‡æ¡ˆå¹³å°<br><a href="https://locize.com/">https://locize.com/</a><br>vscode i18n all in one æ’ä»¶<br><a href="https://marketplace.visualstudio.com/items?itemName=Lokalise.i18n-ally">https://marketplace.visualstudio.com/items?itemName=Lokalise.i18n-ally</a></p><p>é˜¿é‡Œçš„è½®å­<br><a href="https://github.com/alibaba/react-intl-universal">https://github.com/alibaba/react-intl-universal</a><br><a href="https://github.com/alibaba/kiwi">https://github.com/alibaba/kiwi</a></p>]]></content>
      
      
      <categories>
          
          <category> post </category>
          
          <category> i18n </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2021/12/30/v2021-12-30-14-51/"/>
      <url>/2021/12/30/v2021-12-30-14-51/</url>
      
        <content type="html"><![CDATA[<p>åŸæ¥äº§å“ä¸è®¾è®¡ï¼Œå’Œæˆ‘æ˜¯å¹³ç­‰çš„ä»¥å‰è§‰å¾—ä»–ä»¬å’‹è¯´å’‹æï¼Œçœ‹æ¥ä¸è§å¾—éå¾—è¿™æ ·</p>]]></content>
      
      
      <categories>
          
          <category> weibo </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æµ…è°ˆå‰ç«¯é¡¹ç›®åä½œ</title>
      <link href="/2021/12/03/qian-tan-qian-duan-xiang-mu-xie-zuo/"/>
      <url>/2021/12/03/qian-tan-qian-duan-xiang-mu-xie-zuo/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æˆ‘æ€æ•…æˆ‘åœ¨ã€‚â€”â€”ç¬›å¡å°”</p></blockquote><h3 id="ç›®çš„">ç›®çš„</h3><p>ä¸ºä»€ä¹ˆè¦è°ˆå‰ç«¯åä½œï¼Œåœ¨ä¼ä¸šå¼€å‘ä¸­ä¸€ä¸ªä¸ªé¡¹ç›®å¾€å¾€éƒ½æ˜¯å¤šäººåˆä½œçš„ï¼Œå‚ä¸äººæ•°ä» 2-n äººä¸ç­‰ã€‚<br>å¦‚æœä½ æ˜¯ä¸€ä¸ªæ–°äººï¼Œä½ æ˜¯å¦ç»å†è¿‡åŠ å…¥æ–°é¡¹ç›®æ—¶å€™é—®ä¸œé—®è¥¿ï¼Œå„ç§éªšæ“ä½œï¼ŒèŠ±å¼å°æŠ€å·§ï¼Œåªèƒ½ä»å‰è¾ˆé‚£é‡Œä»¥å˜´çš„æ–¹å¼è·å–ã€‚<br>å¦‚æœä½ æ˜¯ä¸€ä¸ªè€äººï¼Œæ˜¯å¦ç»å†è¿‡æ–°æ¥çš„äººå®Œå…¨ä¸æŒ‰ä½ çš„å¥—è·¯å†™ä»£ç ï¼Œä»£ç ä¹±æ”¾ï¼Œå„ç§ç»„ä»¶cvåˆ¶é€ ï¼Œæœ€ç»ˆå †æˆä¸€åº§å´­æ–°çš„å±å±±ã€‚<br>å¦‚ä½•è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜å‘¢ï¼Ÿ<br>ä½œä¸ºæ–°äººæˆ‘å¸Œæœ›æœ‰ä¸ªæ–‡æ¡£ï¼Œå¿«é€Ÿå‘Šè¯‰æˆ‘é‚£ä¸ªç›®å½•æ˜¯å¹²å•¥çš„ï¼Œæ€ä¹ˆå¯é¡¹ç›®ï¼Œæ€ä¹ˆè°ƒè¯•ã€‚<br>ä½œä¸ºè€äººæˆ‘å¸Œæœ›æœ‰ä¸ªæ–‡æ¡£ï¼Œå‘Šè¯‰æ–°äººç›®å½•çº¦æŸï¼Œç°å­˜çš„å¯å¤ç”¨çš„ä»£ç ã€‚</p><h3 id="ä»£ç ">ä»£ç </h3><p>ä»ä»£ç éƒ¨åˆ†è®²ï¼Œå¯å¤ç”¨çš„æ˜¯çº¯ç²¹çš„ï¼Œæ²¡æœ‰å‰¯ä½œç”¨çš„ï¼Œè¦è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œä¸€ä¸ªæ˜¯ä¿è¯æ•°æ®è¾“å…¥ä¸ä¾èµ–äºæ¥å£ï¼Œè®©ç»„ä»¶æ›´åŠ çº¯ç²¹ã€‚<br>é€šè¿‡åˆ†æè§‚å¯Ÿä¸€ä¸ªä¸šåŠ¡çš„ç»„ä»¶èƒ½å¤Ÿåˆ†ä¸º2ç±»</p><ul><li>ä¸šåŠ¡ç»„ä»¶ï¼ˆé¡µé¢ï¼Œè¡¨å•ï¼‰ç‰¹å¾æ˜¯å­˜åœ¨å¤§é‡æ¥å£æ•°æ®ä¾èµ–</li><li>çº¯ç»„ä»¶ (ä¸ä¾èµ–å­˜åœ¨å‰¯ä½œç”¨çš„æ•°æ®) æœ€é€‚åˆå°†è¿™éƒ¨åˆ†ç»„ä»¶æŠ½ç¦»å‡ºæ¥äº†ï¼Œä½œä¸ºç»„ä»¶èµ„äº§æ²‰æ·€<br>ä»ä»£ç é£æ ¼ä¸Šï¼Œå¯ä»¥ç¼–å†™ä»£ç é£æ ¼æŒ‡å—ä¹Ÿå°±æ˜¯æ–°äºº101ï¼Œå»ä»‹ç»åº”è¯¥å†™ä»€ä¹ˆæ ·çš„ä»£ç ï¼Œè¿™ç‚¹å¾ˆé‡è¦ï¼Œå› ä¸ºåªæœ‰ä¸€å¼€å§‹è®©å¤§å®¶é‡è§†è¿™ä¸ªï¼Œæ‰ä¼šåŸ¹å…»å‡ºè‰¯å¥½çš„ç”¨æˆ·ä¹ æƒ¯ã€‚<br>å¦‚æœåŸ¹å…»äº†ä¸€ä¸ªç†Ÿæ‚‰çš„ç”¨æˆ·ä¹ æƒ¯ï¼Œåé¢ä½†å‡¡ä¸€äº›ç»†å¾®çš„æ”¹åŠ¨ä¹Ÿä¼šå¼•èµ·ç”¨æˆ·çš„æŠµè§¦å¿ƒç†ã€‚</li></ul><h3 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h3><p>æ–¹æ¡ˆä¸€ï¼š<br>å°†æ–‡æ¡£ä¸ä»£ç ç»‘å®šåˆ°ä¸€èµ·ï¼Œä½¿ç”¨storybookç­‰ä½œä¸ºé¡¹ç›®æ–‡æ¡£ï¼Œå¥½å¤„æ˜¯ä»£ç ä¸æ–‡æ¡£æ˜¯ç»‘å®šçš„ï¼Œå¯ä»¥å¯è§†åŒ–å±•ç¤ºç»„ä»¶ï¼Œå¯ä»¥æ²‰æ·€ä¸šåŠ¡èµ„äº§ï¼Œæ–¹ä¾¿ä»£ç å¤ç”¨ã€‚<br>æ–¹æ¡ˆäºŒï¼š<br>å°†è¿™äº›èƒ½åŠ›ç»Ÿä¸€åˆ°æ‰‹è„šæ¶ä¸­ç±»ä¼¼umiï¼Œé€šè¿‡çº¦å®šçš„æ–¹å¼è¿›è¡Œå¼€å‘ï¼Œè¿™æ–¹é¢æ„Ÿè§‰javaåšçš„å¾ˆå®Œç¾ï¼ŒåŸºæœ¬ä¸Šçš„ç›®å½•ç»“æ„éƒ½å·®ä¸å¤šã€‚</p>]]></content>
      
      
      <categories>
          
          <category> post </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2021/11/28/v2021-11-28-10-48/"/>
      <url>/2021/11/28/v2021-11-28-10-48/</url>
      
        <content type="html"><![CDATA[<p>ä¸»é¢˜æ•´ä½“å­—å·ä»14pxå‡çº§åˆ°16pxï¼Œä¹‹å‰è§‰å¾—å°ç‚¹é¡µé¢æ‰¿è½½çš„å†…å®¹å°±ä¼šå¤šäº›ã€‚<br>åæ¥å‘ç°å°çš„æ–‡å­—å®é™…ä¸Šä¸åˆ©äºé˜…è¯»ï¼Œå¤ªè¿‡ç´§å‡‘å®¹æ˜“äº§ç”Ÿè§†è§‰ç–²åŠ³ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> weibo </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å¹´ç»ˆæ‚è°ˆ</title>
      <link href="/2021/11/28/zong-jie-dang-xia-si-kao-wei-lai/"/>
      <url>/2021/11/28/zong-jie-dang-xia-si-kao-wei-lai/</url>
      
        <content type="html"><![CDATA[<p>è¿™ä¸ªæ–‡ç« æ˜¯ä» 11 æœˆå»ºç«‹çš„æ²¡æƒ³åˆ° 12 æœˆæ‰å†™å®Œï¼Œæ‹–å»¶ç—‡æ‹–äº†ä¸€ä¸ªæœˆâ€¦</p><h3 id="æ€è€ƒ">æ€è€ƒ</h3><p>æˆ‘æ€»æ˜¯èƒ½æœ‰å¾ˆå¤šæ–°å¥‡çš„ç‚¹å­ï¼Œå¾ˆå¤šéƒ½æ¥æºäºå®½å¹¿çš„è®¤çŸ¥ï¼Œæˆ‘è§‰å¾—è¿™ä¹Ÿå¯èƒ½æ˜¯æˆ‘æœ€å¤§çš„ç«äº‰åŠ›ã€‚</p><p>æ¯”å¦‚æˆ‘è§‰å¾— next çš„æ³¨å…¥æ–¹å¼ä¸ç¬¦åˆ spring çš„æ–¹å¼ï¼Œæˆ‘å°±æäº†ä¸€å¥—æ–°çš„æ³¨è§£ apiï¼Œç”¨èµ·æ¥ä¹Ÿå¾ˆçˆ½ã€‚</p><p>è¿™ä»¶äº‹å®é™…ä¸Šå¾ˆç®€å•ï¼Œæ¨¡ä»¿ spring çš„ api å°±è¡Œï¼Œä½†æ˜¯è¿™ä¸€åˆ‡éƒ½æ¥æºäºä¸€ä¸ªæƒ³æ³•ï¼Œæ‰€ä»¥è¯´æ²¡äº†æƒ³æ³•å°±ç®—ä½ ä¼šæœ€å¿«çš„ç®—æ³•åˆèƒ½æ€æ ·å‘¢ï¼Œæ¯«æ— æ–½å±•å…¶èƒ½åŠ›çš„åœ°æ–¹ã€‚</p><p>ä¸€å®šè¦ä¸åœçš„æ€è€ƒï¼Œå½“ä½ ç”¨ä»€ä¹ˆä¸œè¥¿ä¸çˆ½çš„æ—¶å€™ï¼Œå°±åº”è¯¥æ€è€ƒæ€ä¹ˆè®©ä»–å˜å¾—æ›´çˆ½ï¼Œè‡ªå·±çˆ½äº†ä¹‹åï¼Œå†å»çœ‹åŒæ ·å’Œä½ ç›¸åŒçš„äººæ˜¯ä¸æ˜¯ä¹Ÿæœ‰è¿™ç§ä¸çˆ½çš„æ„Ÿè§‰ã€‚</p><p>æ‹¿æä½ ä¿©ä¸€æ ·çš„ç—›ç‚¹åšé€‚å½“çš„æ‹“å±•ï¼Œè¿›è€Œæ¨å¹¿ä½ çš„å·¥å…·ï¼Œéšç€æ‹“å±•çš„ä¸æ–­åŠ å¼ºï¼Œç›®æ ‡ç”¨æˆ·ç¾¤ä½“ä¹Ÿå°±è¶Šæ¥è¶Šå¤§ï¼Œä¸€ä¸ªæ–°çš„äº§å“å°±ä¼šæ¸æ¸æµ®ç°å‡ºæ°´é¢.</p><p>è€Œè¿™ä¸€åˆ‡æ˜¯é¡ºå…¶è‡ªç„¶çš„ï¼Œå½“ç„¶å¦‚æœæœ‰äººå’Œä½ ç«äº‰å¦ç®—ã€‚</p><h3 id="æ ¼å±€">æ ¼å±€</h3><p>ä¸çŸ¥ä¸è§‰å·²ç»æ¯•ä¸šä¸¤å¹´åŠäº†ï¼Œæ•´ä½“è®¤çŸ¥å­˜åœ¨è¿™å·¨å˜ï¼Œæ ¼å±€ä¹Ÿè¶Šæ¥è¶Šå¤§ã€‚</p><p>ä¸€å¼€å§‹åªä»æŠ€æœ¯çš„è§’åº¦çœ‹é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯ä½ ç»™æˆ‘å›¾æˆ‘èƒ½ä¸èƒ½å®ç°ï¼Œè¿™ä¸ªåŠŸèƒ½æˆ‘æ€ä¹ˆå»å®ç°ï¼Œè¿™ä¸ªæ€ç»´å¤§æ¦‚è·Ÿéšäº†æˆ‘ä¸¤å¹´å¤šï¼Œåšä¸šåŠ¡æˆ‘ä¸€ç›´æ˜¯è¿™ç§æƒ³æ³•ã€‚</p><p>è€Œä¸”ç»å¸¸å»é’»ç‰›è§’å°–ï¼Œå’Œæˆ‘èŠ 3 åˆ†é’Ÿæˆ‘å°±ä¼šå‘Šè¯‰ä½ è¿™ä¸ªåŠŸèƒ½æˆ‘è¦æ€ä¹ˆå®ç°ï¼Œåæ¥å¬ä¸€ä½å‰è¾ˆè¯´çš„è¯ï¼Œæ·±å—å¯å‘ã€‚</p><blockquote><p>æœ‰é™çš„ç²¾åŠ›è¦ç”¨åœ¨å€¼å¾—æ°æ‰¯çš„äº‹æƒ…ä¸Šï¼Œæ— å…³ç´§è¦çš„ç»†èŠ‚å°±ä¸ç”¨å¤ªçº ç»“</p></blockquote><p>ä¸Šé¢çš„æ€ç»´æ–¹å¼æˆ‘è§‰å¾—åšä¸€åç ”å‘å·¥ç¨‹å¸ˆäº‹æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯ä½œä¸ºä¸€ä¸ªæœ‰ç«äº‰åŠ›çš„ç ”å‘å·¥ç¨‹å¸ˆæ˜¯è¿œè¿œä¸å¤Ÿçš„ã€‚</p><p>åšä»€ä¹ˆäº‹ä¸€å®šè¦æœ‰æœ€å¼€å§‹çš„ç›®æ ‡ï¼Œæ‰ä¼šæœ‰è¿›è¡Œä¸‹å»çš„åŠ¨åŠ›ã€‚</p><p>åœ¨åšä¸€ä»¶äº‹å‰ï¼Œå¤šé—®é—®è‡ªå·±è¿™ä»¶äº‹èƒ½å¸¦æ¥ä»€ä¹ˆï¼Œå¿«ä¹ã€èƒ½åŠ›çš„æå‡ã€é‡‘é’±è¿˜æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>æœ‰äº†æœ€åˆåˆå¿ƒåï¼Œå½“é¢å¯¹åˆ«äººçš„ä¸è§£ä½ ä¹Ÿèƒ½å¾ˆå¿«é‡Šæ€€ï¼Œå› ä¸ºäººå’Œäººä¹‹é—´çš„è®¤çŸ¥æ˜¯å¾ˆéš¾æ‹‰é½çš„ï¼Œä¹Ÿå°±æ˜¯ä½ æƒ³è¦çš„ä¸æ˜¯ä»–æƒ³è¦çš„ã€‚</p><p>å¯ä»¥æ ¹æ®åˆå§‹ç›®æ ‡ï¼Œå»è¡¡é‡è¿™ä»¶äº‹æœ‰æ²¡æœ‰åšæˆåŠŸã€‚</p><p>ä¸è¿‡æ°¸è¿œä¸å˜çš„å°±æ˜¯å˜åŒ–ï¼Œå½“ä½ å‘ç°è¿™ä»¶äº‹æƒ…æ²¡æœ‰å¯èƒ½å¸¦æ¥ä½ æƒ³è¦çš„æ—¶å€™ï¼Œå°±è¦æœæ–­å°†å®ƒæ”¾å¼ƒï¼Œå°†ç²¾åŠ›æ”¾åˆ°æ”¶ç›Šå¤§çš„åœ°æ–¹ã€‚</p><h3 id="ä¿¡æ¯çˆ†ç‚¸">ä¿¡æ¯çˆ†ç‚¸</h3><p>äº’è”ç½‘æ—¶ä»£,ä¿¡æ¯é‡è¶…çº§å¤§ï¼ŒçŸ­ä¿¡æ¯ä¸çŸ­è§†é¢‘å¸¦æ¥çš„å¿«æ„Ÿè®©äººä¸Šç˜¾ã€‚</p><p>å¸Œæœ›æ˜å¹´èƒ½å¤Ÿé€æ­¥çš„ä¸å…³æ³¨è¿™äº›ç®€è®¯ä¿¡æ¯ï¼Œè¿™äº›ç¢ç‰‡åŒ–ä¿¡æ¯å¯¹ä¸ªäººçš„æå‡æ¯«æ— æ„ä¹‰ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> post </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2021/11/04/v2021-11-04-14-49/"/>
      <url>/2021/11/04/v2021-11-04-14-49/</url>
      
        <content type="html"><![CDATA[<p>æŠ€æœ¯äººå‘˜å¾€å¾€ç»å¸¸è®¨è®ºæŠ€æœ¯ï¼Œè€Œå¿½ç•¥äº†æŠ€æœ¯å…¶ä»·å€¼æ˜¯è¾…ä½ä¸šåŠ¡ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†äººæ˜¯æƒ³ä¸å‡ºæˆ–è€…ä¸å»æƒ³å¦‚ä½•åˆ›æ–°çš„ï¼Œä¸€æ–¹é¢æ˜¯å®‰äºèˆ’é€‚ï¼Œå¦ä¸€æ–¹é¢æ˜¯ç«äº‰ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> weibo </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>audioå¯è§†åŒ–</title>
      <link href="/2021/10/24/audio-ke-shi-hua/"/>
      <url>/2021/10/24/audio-ke-shi-hua/</url>
      
        <content type="html"><![CDATA[<div id="preview-0" class="preview"><div class="preview-box">    <div id="draw-0">    å¦‚æœæ²¡æœ‰æ’­æ”¾ç‚¹å‡»playå¯è§†åŒ–<div><audio id="audio" controls autoplay><source src="/imgs/demo.m4a" type="audio/mp4" /></audio></div><div style="display: flex;    flex-wrap: wrap; gap:20px"><div><div>æ³¢å½¢</div><canvas id="canvas" width="200px" height='200px'></canvas></div><div><div>é¢‘ç‡</div><canvas id="canvas1" width="200px" height='200px'></canvas></div></div><script type="module">const audio = document.getElementById('audio');const canvas = document.getElementById("canvas");const canvasCtx = canvas.getContext("2d");const canvas1 = document.getElementById("canvas1");const canvas1Ctx = canvas1.getContext("2d");let play = false;audio.addEventListener('play', function () {play = true;const audioCtx = new (window.AudioContext || window.webkitAudioContext)();const source = audioCtx.createMediaElementSource(audio);const analyser = audioCtx.createAnalyser();const gainNode = audioCtx.createGain();gainNode.gain.value = 0.4;// source -> analysersource.connect(analyser);// analyser -> gainNodeanalyser.connect(gainNode);// gainNode -> æ‰¬å£°å™¨gainNode.connect(audioCtx.destination);const bufferLength = analyser.frequencyBinCount;const domainArray = new Uint8Array(bufferLength);const frequencyArray = new Uint8Array(bufferLength);analyser.getByteTimeDomainData(domainArray);let time = 0;function draw() {window.requestAnimationFrame(draw);if (play) {// analyser.getByteTimeDomainData(domainArray);// console.log('data', domainArray);// console.log('frequency', frequencyArray);// time++analyser.getByteTimeDomainData(domainArray);canvasCtx.fillStyle = "rgb(220, 220, 220)";canvasCtx.fillRect(0, 0, canvas.width, canvas.height);canvasCtx.lineWidth = 2;canvasCtx.strokeStyle = "rgb(0, 0, 0)";canvasCtx.beginPath();let skip = 2 ** 4;var sliceWidth = canvas.width * 1.0 / bufferLength * skip;var x = 0;for (let i = 0; i < bufferLength; i++) {var v = domainArray[i] / 128.0;var y = v * canvas.height / 2;if (i === 0) {canvasCtx.moveTo(x, y);} else {canvasCtx.lineTo(x, y);}x += sliceWidth;}canvasCtx.lineTo(canvas.width, canvas.height / 2);canvasCtx.stroke();// é¢‘ç‡analyser.getByteFrequencyData(frequencyArray);canvas1Ctx.fillStyle = 'rgb(220, 220, 220)';canvas1Ctx.fillRect(0, 0, canvas1.width, canvas1.height);var barWidth = (canvas1.width / bufferLength * skip) * 2.5;var barHeight;var x = 0;for (let i = 0; i < bufferLength; i++) {barHeight = frequencyArray[i];canvas1Ctx.fillStyle = 'rgb(' + (barHeight + 100) + '50,50,50)';canvas1Ctx.fillRect(x, canvas1.height - barHeight / 2, barWidth, barHeight / 2);x += barWidth + 1;}}}draw()})</script>    </div>    <div class="preview-box-util">        <span id="expand-0" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-0" class="preview-code false"><pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">audio</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;audio&quot;</span> <span class="hljs-attr">controls</span> <span class="hljs-attr">autoplay</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/imgs/demo.m4a&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;audio/mp4&quot;</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">audio</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;display: flex;    flex-wrap: wrap; gap:20px&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>æ³¢å½¢<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;canvas&quot;</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;200px&quot;</span> <span class="hljs-attr">height</span>=<span class="hljs-string">&#x27;200px&#x27;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>é¢‘ç‡<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;canvas1&quot;</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;200px&quot;</span> <span class="hljs-attr">height</span>=<span class="hljs-string">&#x27;200px&#x27;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;module&quot;</span>&gt;</span><span class="language-javascript"><span class="hljs-keyword">const</span> audio = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;audio&#x27;</span>);<span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;canvas&quot;</span>);<span class="hljs-keyword">const</span> canvasCtx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">&quot;2d&quot;</span>);<span class="hljs-keyword">const</span> canvas1 = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;canvas1&quot;</span>);<span class="hljs-keyword">const</span> canvas1Ctx = canvas1.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">&quot;2d&quot;</span>);<span class="hljs-keyword">let</span> play = <span class="hljs-literal">false</span>;audio.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;play&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;play = <span class="hljs-literal">true</span>;<span class="hljs-keyword">const</span> audioCtx = <span class="hljs-keyword">new</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">AudioContext</span> || <span class="hljs-variable language_">window</span>.<span class="hljs-property">webkitAudioContext</span>)();<span class="hljs-keyword">const</span> source = audioCtx.<span class="hljs-title function_">createMediaElementSource</span>(audio);<span class="hljs-keyword">const</span> analyser = audioCtx.<span class="hljs-title function_">createAnalyser</span>();<span class="hljs-keyword">const</span> gainNode = audioCtx.<span class="hljs-title function_">createGain</span>();gainNode.<span class="hljs-property">gain</span>.<span class="hljs-property">value</span> = <span class="hljs-number">0.4</span>;<span class="hljs-comment">// source -&gt; analyser</span>source.<span class="hljs-title function_">connect</span>(analyser);<span class="hljs-comment">// analyser -&gt; gainNode</span>analyser.<span class="hljs-title function_">connect</span>(gainNode);<span class="hljs-comment">// gainNode -&gt; æ‰¬å£°å™¨</span>gainNode.<span class="hljs-title function_">connect</span>(audioCtx.<span class="hljs-property">destination</span>);<span class="hljs-keyword">const</span> bufferLength = analyser.<span class="hljs-property">frequencyBinCount</span>;<span class="hljs-keyword">const</span> domainArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(bufferLength);<span class="hljs-keyword">const</span> frequencyArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(bufferLength);analyser.<span class="hljs-title function_">getByteTimeDomainData</span>(domainArray);<span class="hljs-keyword">let</span> time = <span class="hljs-number">0</span>;<span class="hljs-keyword">function</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params"></span>) &#123;<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">requestAnimationFrame</span>(draw);<span class="hljs-keyword">if</span> (play) &#123;<span class="hljs-comment">// analyser.getByteTimeDomainData(domainArray);</span><span class="hljs-comment">// console.log(&#x27;data&#x27;, domainArray);</span><span class="hljs-comment">// console.log(&#x27;frequency&#x27;, frequencyArray);</span><span class="hljs-comment">// time++</span>analyser.<span class="hljs-title function_">getByteTimeDomainData</span>(domainArray);canvasCtx.<span class="hljs-property">fillStyle</span> = <span class="hljs-string">&quot;rgb(220, 220, 220)&quot;</span>;canvasCtx.<span class="hljs-title function_">fillRect</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, canvas.<span class="hljs-property">width</span>, canvas.<span class="hljs-property">height</span>);canvasCtx.<span class="hljs-property">lineWidth</span> = <span class="hljs-number">2</span>;canvasCtx.<span class="hljs-property">strokeStyle</span> = <span class="hljs-string">&quot;rgb(0, 0, 0)&quot;</span>;canvasCtx.<span class="hljs-title function_">beginPath</span>();<span class="hljs-keyword">let</span> skip = <span class="hljs-number">2</span> ** <span class="hljs-number">4</span>;<span class="hljs-keyword">var</span> sliceWidth = canvas.<span class="hljs-property">width</span> * <span class="hljs-number">1.0</span> / bufferLength * skip;<span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>;<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bufferLength; i++) &#123;<span class="hljs-keyword">var</span> v = domainArray[i] / <span class="hljs-number">128.0</span>;<span class="hljs-keyword">var</span> y = v * canvas.<span class="hljs-property">height</span> / <span class="hljs-number">2</span>;<span class="hljs-keyword">if</span> (i === <span class="hljs-number">0</span>) &#123;canvasCtx.<span class="hljs-title function_">moveTo</span>(x, y);&#125; <span class="hljs-keyword">else</span> &#123;canvasCtx.<span class="hljs-title function_">lineTo</span>(x, y);&#125;x += sliceWidth;&#125;canvasCtx.<span class="hljs-title function_">lineTo</span>(canvas.<span class="hljs-property">width</span>, canvas.<span class="hljs-property">height</span> / <span class="hljs-number">2</span>);canvasCtx.<span class="hljs-title function_">stroke</span>();<span class="hljs-comment">// é¢‘ç‡</span>analyser.<span class="hljs-title function_">getByteFrequencyData</span>(frequencyArray);canvas1Ctx.<span class="hljs-property">fillStyle</span> = <span class="hljs-string">&#x27;rgb(220, 220, 220)&#x27;</span>;canvas1Ctx.<span class="hljs-title function_">fillRect</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, canvas1.<span class="hljs-property">width</span>, canvas1.<span class="hljs-property">height</span>);<span class="hljs-keyword">var</span> barWidth = (canvas1.<span class="hljs-property">width</span> / bufferLength * skip) * <span class="hljs-number">2.5</span>;<span class="hljs-keyword">var</span> barHeight;<span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>;<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bufferLength; i++) &#123;barHeight = frequencyArray[i];canvas1Ctx.<span class="hljs-property">fillStyle</span> = <span class="hljs-string">&#x27;rgb(&#x27;</span> + (barHeight + <span class="hljs-number">100</span>) + <span class="hljs-string">&#x27;50,50,50)&#x27;</span>;canvas1Ctx.<span class="hljs-title function_">fillRect</span>(x, canvas1.<span class="hljs-property">height</span> - barHeight / <span class="hljs-number">2</span>, barWidth, barHeight / <span class="hljs-number">2</span>);x += barWidth + <span class="hljs-number">1</span>;&#125;&#125;&#125;<span class="hljs-title function_">draw</span>()&#125;)</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div><script>    const expandCode_0 = document.getElementById('expand-0');    const bindCode_0 = document.getElementById('code-0');    let flag_0 = true;    expandCode_0.onclick = function (){        if(flag_0){            bindCode_0.classList.add('preview-code-active')        }else{            bindCode_0.classList.remove('preview-code-active')         }        flag_0 = !flag_0    }</script></div>]]></content>
      
      
      <categories>
          
          <category> post </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>htmlè§£æ</title>
      <link href="/2021/10/23/html-jie-xi/"/>
      <url>/2021/10/23/html-jie-xi/</url>
      
        <content type="html"><![CDATA[<div id="preview-0" class="preview"><div class="preview-box">    <div id="draw-0">    <script type="module">                    (function(){                        var string = `<div >fff ddd<span style="123 fff"data-size=12 data-width='20px' >123</span><br style="fff" />ddd</div>`;var offset = 0;// <div> or </div> or <div > function getTagName(str) {    var start = offset;    var reg = /[a-zA-Z]/;    while (reg.test(str[offset]) && offset < str.length) {        offset++;    }    return str.substring(start, offset);}function parse(str) {    var stack = [{            tagName: 'root',            children: []        }];    var root;    while (offset < str.length) {        switch (str[offset]) {            case '<':                offset++;                if (str[offset] === '/') {                    var node = stack.pop();                    if (stack.length === 0) {                        root = node;                    }                    offset++;                    var tagName = getTagName(str);                    if (tagName !== (node === null || node === void 0 ? void 0 : node.tagName)) {                        console.error(tagName + "\u4E0D\u5339\u914D");                    }                    else {                        while (str[offset] !== '>') {                            offset++;                        }                        node.end = offset;                    }                }                else {                    var node = {                        start: offset                    };                    var tagName = getTagName(str);                    node.tagName = tagName;                    if (stack[stack.length - 1]) {                        if (!stack[stack.length - 1].children) {                            stack[stack.length - 1].children = [];                        }                        stack[stack.length - 1].children.push(node);                    }                    while (str[offset] !== '/' && str[offset] !== '>') {                        if (!node.attrSource) {                            node.attrSource = '';                        }                        node.attrSource += str[offset];                        offset++;                    }                    node.attr = parseAttribute(node.attrSource);                    node.end = offset;                    stack.push(node);                }                break;            case '>':                if (str[offset - 1] === '/') {                    var node = stack.pop();                    if (stack.length === 0) {                        root = node;                    }                    node.end = offset;                }                break;            default:                if (stack.length > 0) {                    stack.push({                        tagName: 'text',                        value: ''                    });                    var start = offset;                    while (!/[<>]/.test(str[offset]) && offset < str.length) {                        offset++;                    }                    var textNode = stack.pop();                    textNode.value = str.substring(start, offset);                    if (!stack[stack.length - 1].children) {                        stack[stack.length - 1].children = [];                    }                    stack[stack.length - 1].children.push(textNode);                    offset--;                }        }        offset++;    }    console.log(stack);}// parseAttribute(' style= "123 1ff" data-v = 123')function parseAttribute(str) {    var index = 0;    var open = false;    var qOpen = false;    var stack = [];    while (index < (str === null || str === void 0 ? void 0 : str.length)) {        var currentCode = str[index];        if (!/\s/.test(currentCode)) {            if (!open) {                var start = index;                while (currentCode !== '=' && index < str.length) {                    index++;                    currentCode = str[index];                }                var key = str.substring(start, index);                stack.push({                    key: key,                    value: ''                });                open = true;            }            else {                var start = index;                if (/["']/.test(currentCode)) {                    qOpen = true;                    index++;                    currentCode = str[index];                }                if (qOpen) {                    while (!/["']/.test(currentCode) && index < str.length) {                        index++;                        currentCode = str[index];                    }                    qOpen = false;                }                else {                    // number                    while (!/\s/.test(currentCode) && index < str.length) {                        index++;                        currentCode = str[index];                    }                }                var node = stack[stack.length - 1];                node.value = str.substring(start, index);                open = false;            }        }        index++;    }    // console.log(stack)    return stack;}parse(string);                    })(0)                </script>    </div>    <div class="preview-box-util">        <span id="expand-0" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-0" class="preview-code preview-code-active"><pre><code class="hljs"><span class="hljs-keyword">var</span> string = <span class="hljs-string">`&lt;div &gt;fff ddd&lt;span style=&quot;123 fff&quot;data-size=12 data-width=&#x27;20px&#x27; &gt;123&lt;/span&gt;&lt;br style=&quot;fff&quot; /&gt;ddd&lt;/div&gt;`</span>;<span class="hljs-keyword">var</span> offset = <span class="hljs-number">0</span>;<span class="hljs-comment">// &lt;div&gt; or &lt;/div&gt; or &lt;div &gt; </span><span class="hljs-keyword">function</span> <span class="hljs-title function_">getTagName</span>(<span class="hljs-params">str</span>) &#123;    <span class="hljs-keyword">var</span> start = offset;    <span class="hljs-keyword">var</span> reg = <span class="hljs-regexp">/[a-zA-Z]/</span>;    <span class="hljs-keyword">while</span> (reg.<span class="hljs-title function_">test</span>(str[offset]) &amp;&amp; offset &lt; str.<span class="hljs-property">length</span>) &#123;        offset++;    &#125;    <span class="hljs-keyword">return</span> str.<span class="hljs-title function_">substring</span>(start, offset);&#125;<span class="hljs-keyword">function</span> <span class="hljs-title function_">parse</span>(<span class="hljs-params">str</span>) &#123;    <span class="hljs-keyword">var</span> stack = [&#123;            <span class="hljs-attr">tagName</span>: <span class="hljs-string">&#x27;root&#x27;</span>,            <span class="hljs-attr">children</span>: []        &#125;];    <span class="hljs-keyword">var</span> root;    <span class="hljs-keyword">while</span> (offset &lt; str.<span class="hljs-property">length</span>) &#123;        <span class="hljs-keyword">switch</span> (str[offset]) &#123;            <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>:                offset++;                <span class="hljs-keyword">if</span> (str[offset] === <span class="hljs-string">&#x27;/&#x27;</span>) &#123;                    <span class="hljs-keyword">var</span> node = stack.<span class="hljs-title function_">pop</span>();                    <span class="hljs-keyword">if</span> (stack.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) &#123;                        root = node;                    &#125;                    offset++;                    <span class="hljs-keyword">var</span> tagName = <span class="hljs-title function_">getTagName</span>(str);                    <span class="hljs-keyword">if</span> (tagName !== (node === <span class="hljs-literal">null</span> || node === <span class="hljs-keyword">void</span> <span class="hljs-number">0</span> ? <span class="hljs-keyword">void</span> <span class="hljs-number">0</span> : node.<span class="hljs-property">tagName</span>)) &#123;                        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(tagName + <span class="hljs-string">&quot;\u4E0D\u5339\u914D&quot;</span>);                    &#125;                    <span class="hljs-keyword">else</span> &#123;                        <span class="hljs-keyword">while</span> (str[offset] !== <span class="hljs-string">&#x27;&gt;&#x27;</span>) &#123;                            offset++;                        &#125;                        node.<span class="hljs-property">end</span> = offset;                    &#125;                &#125;                <span class="hljs-keyword">else</span> &#123;                    <span class="hljs-keyword">var</span> node = &#123;                        <span class="hljs-attr">start</span>: offset                    &#125;;                    <span class="hljs-keyword">var</span> tagName = <span class="hljs-title function_">getTagName</span>(str);                    node.<span class="hljs-property">tagName</span> = tagName;                    <span class="hljs-keyword">if</span> (stack[stack.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>]) &#123;                        <span class="hljs-keyword">if</span> (!stack[stack.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>].<span class="hljs-property">children</span>) &#123;                            stack[stack.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>].<span class="hljs-property">children</span> = [];                        &#125;                        stack[stack.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>].<span class="hljs-property">children</span>.<span class="hljs-title function_">push</span>(node);                    &#125;                    <span class="hljs-keyword">while</span> (str[offset] !== <span class="hljs-string">&#x27;/&#x27;</span> &amp;&amp; str[offset] !== <span class="hljs-string">&#x27;&gt;&#x27;</span>) &#123;                        <span class="hljs-keyword">if</span> (!node.<span class="hljs-property">attrSource</span>) &#123;                            node.<span class="hljs-property">attrSource</span> = <span class="hljs-string">&#x27;&#x27;</span>;                        &#125;                        node.<span class="hljs-property">attrSource</span> += str[offset];                        offset++;                    &#125;                    node.<span class="hljs-property">attr</span> = <span class="hljs-title function_">parseAttribute</span>(node.<span class="hljs-property">attrSource</span>);                    node.<span class="hljs-property">end</span> = offset;                    stack.<span class="hljs-title function_">push</span>(node);                &#125;                <span class="hljs-keyword">break</span>;            <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>:                <span class="hljs-keyword">if</span> (str[offset - <span class="hljs-number">1</span>] === <span class="hljs-string">&#x27;/&#x27;</span>) &#123;                    <span class="hljs-keyword">var</span> node = stack.<span class="hljs-title function_">pop</span>();                    <span class="hljs-keyword">if</span> (stack.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) &#123;                        root = node;                    &#125;                    node.<span class="hljs-property">end</span> = offset;                &#125;                <span class="hljs-keyword">break</span>;            <span class="hljs-attr">default</span>:                <span class="hljs-keyword">if</span> (stack.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) &#123;                    stack.<span class="hljs-title function_">push</span>(&#123;                        <span class="hljs-attr">tagName</span>: <span class="hljs-string">&#x27;text&#x27;</span>,                        <span class="hljs-attr">value</span>: <span class="hljs-string">&#x27;&#x27;</span>                    &#125;);                    <span class="hljs-keyword">var</span> start = offset;                    <span class="hljs-keyword">while</span> (!<span class="hljs-regexp">/[&lt;&gt;]/</span>.<span class="hljs-title function_">test</span>(str[offset]) &amp;&amp; offset &lt; str.<span class="hljs-property">length</span>) &#123;                        offset++;                    &#125;                    <span class="hljs-keyword">var</span> textNode = stack.<span class="hljs-title function_">pop</span>();                    textNode.<span class="hljs-property">value</span> = str.<span class="hljs-title function_">substring</span>(start, offset);                    <span class="hljs-keyword">if</span> (!stack[stack.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>].<span class="hljs-property">children</span>) &#123;                        stack[stack.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>].<span class="hljs-property">children</span> = [];                    &#125;                    stack[stack.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>].<span class="hljs-property">children</span>.<span class="hljs-title function_">push</span>(textNode);                    offset--;                &#125;        &#125;        offset++;    &#125;    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(stack);&#125;<span class="hljs-comment">// parseAttribute(&#x27; style= &quot;123 1ff&quot; data-v = 123&#x27;)</span><span class="hljs-keyword">function</span> <span class="hljs-title function_">parseAttribute</span>(<span class="hljs-params">str</span>) &#123;    <span class="hljs-keyword">var</span> index = <span class="hljs-number">0</span>;    <span class="hljs-keyword">var</span> open = <span class="hljs-literal">false</span>;    <span class="hljs-keyword">var</span> qOpen = <span class="hljs-literal">false</span>;    <span class="hljs-keyword">var</span> stack = [];    <span class="hljs-keyword">while</span> (index &lt; (str === <span class="hljs-literal">null</span> || str === <span class="hljs-keyword">void</span> <span class="hljs-number">0</span> ? <span class="hljs-keyword">void</span> <span class="hljs-number">0</span> : str.<span class="hljs-property">length</span>)) &#123;        <span class="hljs-keyword">var</span> currentCode = str[index];        <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/\s/</span>.<span class="hljs-title function_">test</span>(currentCode)) &#123;            <span class="hljs-keyword">if</span> (!open) &#123;                <span class="hljs-keyword">var</span> start = index;                <span class="hljs-keyword">while</span> (currentCode !== <span class="hljs-string">&#x27;=&#x27;</span> &amp;&amp; index &lt; str.<span class="hljs-property">length</span>) &#123;                    index++;                    currentCode = str[index];                &#125;                <span class="hljs-keyword">var</span> key = str.<span class="hljs-title function_">substring</span>(start, index);                stack.<span class="hljs-title function_">push</span>(&#123;                    <span class="hljs-attr">key</span>: key,                    <span class="hljs-attr">value</span>: <span class="hljs-string">&#x27;&#x27;</span>                &#125;);                open = <span class="hljs-literal">true</span>;            &#125;            <span class="hljs-keyword">else</span> &#123;                <span class="hljs-keyword">var</span> start = index;                <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/[&quot;&#x27;]/</span>.<span class="hljs-title function_">test</span>(currentCode)) &#123;                    qOpen = <span class="hljs-literal">true</span>;                    index++;                    currentCode = str[index];                &#125;                <span class="hljs-keyword">if</span> (qOpen) &#123;                    <span class="hljs-keyword">while</span> (!<span class="hljs-regexp">/[&quot;&#x27;]/</span>.<span class="hljs-title function_">test</span>(currentCode) &amp;&amp; index &lt; str.<span class="hljs-property">length</span>) &#123;                        index++;                        currentCode = str[index];                    &#125;                    qOpen = <span class="hljs-literal">false</span>;                &#125;                <span class="hljs-keyword">else</span> &#123;                    <span class="hljs-comment">// number</span>                    <span class="hljs-keyword">while</span> (!<span class="hljs-regexp">/\s/</span>.<span class="hljs-title function_">test</span>(currentCode) &amp;&amp; index &lt; str.<span class="hljs-property">length</span>) &#123;                        index++;                        currentCode = str[index];                    &#125;                &#125;                <span class="hljs-keyword">var</span> node = stack[stack.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>];                node.<span class="hljs-property">value</span> = str.<span class="hljs-title function_">substring</span>(start, index);                open = <span class="hljs-literal">false</span>;            &#125;        &#125;        index++;    &#125;    <span class="hljs-comment">// console.log(stack)</span>    <span class="hljs-keyword">return</span> stack;&#125;<span class="hljs-title function_">parse</span>(string);</code></pre></div><script>    const expandCode_0 = document.getElementById('expand-0');    const bindCode_0 = document.getElementById('code-0');    let flag_0 = false;    expandCode_0.onclick = function (){        if(flag_0){            bindCode_0.classList.add('preview-code-active')        }else{            bindCode_0.classList.remove('preview-code-active')         }        flag_0 = !flag_0    }</script></div>]]></content>
      
      
      <categories>
          
          <category> post </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2021/10/15/v2021-10-15-08-48/"/>
      <url>/2021/10/15/v2021-10-15-08-48/</url>
      
        <content type="html"><![CDATA[<p>æ–°äº†ä¸€è½®å­¦ä¹ è¦å¼€å§‹å•¦</p>]]></content>
      
      
      <categories>
          
          <category> weibo </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2021/10/13/v2021-10-13-16-02/"/>
      <url>/2021/10/13/v2021-10-13-16-02/</url>
      
        <content type="html"><![CDATA[<p>åšå®¢æ–°å¢å¾®åšåŠŸèƒ½äº†ï¼Œå…¶å®æœ‰æ—¶å€™æ²¡é‚£ä¹ˆå¤šé•¿ç¯‡å¤§è®ºå¾€å¾€æ˜¯å¾ˆç²¾çŸ­çš„å‡ å¥è¯å°±èƒ½è¡¨è¾¾è‡ªå·±çš„æƒ³æ³•ï¼Œå’Œå½“æ—¶å†…å¿ƒåŠ¨æ€ï¼Œæ‰€ä»¥æ–°å¢å¾®åšåŠŸèƒ½ï¼Œåç»­æœ€å¥½æä¸ªvscodeæ’ä»¶è¿™æ ·æˆ‘å°±å¯ä»¥ä¸ç”¨å¼€é¡¹ç›®å°±èƒ½å‘æˆ‘çš„å¾®åšäº†âœŒï¸ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> weibo </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>nodeè¿›ç¨‹ç®¡ç†é›†ç¾¤</title>
      <link href="/2021/06/19/node-jin-cheng-guan-li-ji-qun/"/>
      <url>/2021/06/19/node-jin-cheng-guan-li-ji-qun/</url>
      
        <content type="html"><![CDATA[<style>.dark .post img{filter: contrast(0);}</style><blockquote><p>æœ‰äººçš„åœ°æ–¹å°±æœ‰æ±Ÿæ¹–ï¼Œæœ‰æ±Ÿæ¹–çš„åœ°æ–¹å°±æœ‰åŒ…å·¥å¤´<br>â€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒ--å°¼å¤æ‹‰æ–¯å¼ ä¸‰</p></blockquote><h3 id="å•æœºè¿›ç¨‹ç®¡ç†çš„ç¼ºç‚¹">å•æœºè¿›ç¨‹ç®¡ç†çš„ç¼ºç‚¹</h3><p>ä¸€ä¸ªäººçš„åŠ›é‡æ¯•ç«Ÿæ˜¯æœ‰é™çš„ï¼Œå•æœºè¿›ç¨‹ç®¡ç†åƒä¸‹å›¾è¿™æ ·ã€‚</p><p><img src="/imgs/%E5%8D%95%E6%9C%BA%E5%AE%9E%E4%BE%8B.png" alt="image" width="150"></p><p>çœ‹è¿™ä¸ªå›¾ä¼šå‘ç°ä¸¤ä¸ªé—®é¢˜ï¼š</p><ol><li>ä»»åŠ¡åˆ†å‘å’Œè¿›ç¨‹ç®¡ç†ä¸¤ä¸ªæœåŠ¡æ”¾åœ¨ä¸€å—è€¦åˆè¿‡äºä¸¥é‡ï¼Œä¸€ä¸Šçº¿æŸä¸€ä¸ªåŠŸèƒ½å°±éœ€è¦é‡å¯æ‰€æœ‰è¿›ç¨‹</li><li>å•æœºèµ„æºæ˜¯æœ‰é™çš„ï¼Œéšç€è¿›ç¨‹å¢åŠ ï¼Œå°±ä¼šå‡ºç°èµ„æºä¸å¤Ÿç”¨çš„æƒ…å†µ</li></ol><h3 id="è¿›ç¨‹ç®¡ç†é›†ç¾¤">è¿›ç¨‹ç®¡ç†é›†ç¾¤</h3><p>ä¸ºäº†è§£å†³ä¸Šé¢ä¸¤ä¸ªé—®é¢˜ï¼Œåº”è¯¥å¼•å…¥é›†ç¾¤æ€ç»´ï¼Œä¸€ä¸ªä¸»æœºç®¡ç†ä¸‹é¢å…¶ä»–è¿›ç¨‹ç®¡ç†æœºå™¨ï¼Œè¿™æ ·ä¸»æœºä¸Šçº¿ä¸ä¼šå½±å“ node æœåŠ¡ï¼Œè€Œä¸”é›†ç¾¤èµ„æºæ˜¯ä¸°å¯Œçš„é…åˆ docker è¿˜æ˜¯å¯ä»¥åŠ¨æ€æ‰©å®¹çš„ã€‚</p><p>å…·ä½“æ¶æ„åº”è¯¥æ˜¯è¿™æ ·çš„</p><p><img src="/imgs/%E9%9B%86%E7%BE%A4%E6%9E%B6%E6%9E%84.png" alt="image"></p><ul><li><p>å¯åŠ¨</p><ul><li>å½“é›†ç¾¤ B çš„å·¥ä½œèŠ‚ç‚¹å¯åŠ¨æ—¶å€™ï¼Œä¼šå‘ä»»åŠ¡åˆ†é…èŠ‚ç‚¹æ³¨å†Œæœºå™¨ä¿¡æ¯ï¼Œå¹¶æŒ‰åˆ†é’Ÿå‘é€å¿ƒè·³ï¼ˆæœºå™¨ä¿¡æ¯ï¼‰ã€‚</li><li>é›†ç¾¤ A ä¼šä¿å­˜è¿™äº›èŠ‚ç‚¹ä¿¡æ¯ï¼Œä¾›åé¢ä»»åŠ¡åˆ†å‘ä½¿ç”¨ã€‚</li></ul></li><li><p>å¯åŠ¨æœåŠ¡</p><ul><li>å½“ä¸€ä¸ªè¿›ç¨‹éœ€è¦å¯åŠ¨æ—¶å€™ï¼Œä¼šæ£€æŸ¥å½“å‰èŠ‚ç‚¹ä¿¡æ¯ï¼Œåˆ†é…ç»™ç›¸å¯¹ç©ºé—²çš„æœºå™¨ã€‚</li><li>æ­¤æ—¶å°† node è¿›ç¨‹å’Œå·¥ä½œèŠ‚ç‚¹è¿›è¡Œç»‘å®šï¼Œä»¥ä¾›åç»­é‡å¯æš‚åœæ“ä½œã€‚</li></ul></li><li><p>ä¸Šçº¿ç®¡ç†èŠ‚ç‚¹</p><ul><li>ä¸Šçº¿ç®¡ç†èŠ‚ç‚¹æ—¶å€™æˆ‘ä»¬æ— éœ€é‡å¯ node è¿›ç¨‹èŠ‚ç‚¹ï¼Œå„èŠ‚ç‚¹å‡å¯æ­£å¸¸è®¿é—®</li></ul></li><li><p>ä¸Šçº¿å·¥ä½œèŠ‚ç‚¹</p><ul><li>å·¥ä½œèŠ‚ç‚¹ä¼šä¸å†å‘é€å¿ƒè·³ï¼Œç®¡ç†èŠ‚ç‚¹è®¤ä¸ºå·¥ä½œèŠ‚ç‚¹æŒ‚æ‰ã€‚</li><li>å¹¶å‘æ–°ä¸€è½®çš„æ³¨å†ŒèŠ‚ç‚¹è¿›è¡Œæ–°ä¸€è½®çš„ä»»åŠ¡åˆ†é…ï¼Œå¹¶é‡å¯å¯¹åº” node è¿›ç¨‹</li></ul></li></ul><p>è¿™æ ·å°±è§£å†³äº†å•æœºå®ä¾‹çš„é—®é¢˜ï¼Œå¹¶ä¸”æœåŠ¡é«˜å¯ç”¨ï¼Œå·¥ä½œèŒè´£æ˜ç¡®ã€‚</p><h4 id="node-è¿›ç¨‹é«˜å¯ç”¨è°æ¥ç®¡ç†ï¼Ÿ">node è¿›ç¨‹é«˜å¯ç”¨è°æ¥ç®¡ç†ï¼Ÿ</h4><p>ä¹Ÿå¯æ•´åˆåˆ°èŠ‚ç‚¹æœåŠ¡ä¸­ï¼Œé‚£ä¹ˆå¯èƒ½èŠ‚ç‚¹åˆ†é…å¯èƒ½æ˜¯è¿™æ ·çš„</p><p><img src="/imgs/%E5%A4%9A%E8%BF%9B%E7%A8%8B%E7%BB%84.png" alt="image"></p><p>å¯ä»¥çœ‹åˆ°æ¯ä¸ªå·¥ä½œèŠ‚ç‚¹éƒ½ä¼šå­˜åœ¨è¿›ç¨‹ 1ï¼Œä¸ºä»€ä¹ˆæœ‰çš„è¿›ç¨‹æ˜¯å•ä¸ªæœ‰çš„è¿›ç¨‹æ˜¯å¤šä¸ªèŠ‚ç‚¹éƒ½å­˜åœ¨å‘¢ã€‚</p><p>è¿™éƒ¨åˆ†æ˜¯å› ä¸ºè¿›ç¨‹åŠŸèƒ½ä¸ç›¸åŒ</p><p>å¯¹äºä¸šåŠ¡èŠ‚ç‚¹æ¯”å¦‚ ssrï¼Œnode æµ‹è¯•æœåŠ¡å¯èƒ½åªéœ€è¦ä¸€ä¸ªè¿›ç¨‹å°±å¤Ÿäº†ã€‚</p><p>ä½†æ˜¯å¯¹äºæƒ³è¦æŠŠ gitlab runner çš„èƒ½åŠ›ä¹Ÿæè¿‡æ¥ï¼Œå°±éœ€è¦å¤šä¸ªå·¥ä½œèŠ‚ç‚¹å¹²ä¸€æ ·çš„æ´»äº†ã€‚</p><h4 id="æ€»ç»“">æ€»ç»“</h4><p>å•èŠ‚ç‚¹è¿˜æ˜¯å¾ˆè„†å¼±çš„ï¼Œé›†ç¾¤ä¸å…¶å¯¹æ¯”ä¼˜åŠ¿å±•ç°çš„ååˆ†æ˜æ˜¾ï¼Œä¸è¿‡éœ€è¦ç»´æŠ¤èŠ‚ç‚¹ä¿¡æ¯ï¼Œåˆ†å‘ä»»åŠ¡ç­‰ç»†èŠ‚çš„å¤„ç†ï¼Œå®ç°èµ·æ¥ç›¸å¯¹å¤æ‚äº›ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> node </category>
          
          <category> post </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>simple-proxy</title>
      <link href="/2021/05/22/simple-prosy/"/>
      <url>/2021/05/22/simple-prosy/</url>
      
        <content type="html"><![CDATA[<script>    function $(id) {        return document.getElementById(id)    }  x</script><p>ç®€å•çš„ä»£ç†å¯¹è±¡</p><p>ç»™count æœ€åŸå§‹çš„æ–¹å¼ç»‘å®šæ•°æ®</p><div id="preview-7" class="preview"><div class="preview-box">    <div id="draw-7">    <div id="count_0"> </div><button id="add_0">add</button><script type="module">    let countNode;    let addButton;    countNode = $('count_0');    addButton = $('add_0');    let value = { count: 1 };    countNode.textContent = value.count;    addButton.onclick = () => {        value.count++;        countNode.textContent = value.count;    }</script>    </div>    <div class="preview-box-util">        <span id="expand-7" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-7" class="preview-code preview-code-active"><pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;count_0&quot;</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;add_0&quot;</span>&gt;</span>add<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;module&quot;</span>&gt;</span><span class="language-javascript">    <span class="hljs-keyword">let</span> countNode;    <span class="hljs-keyword">let</span> addButton;    countNode = $(<span class="hljs-string">&#x27;count_0&#x27;</span>);    addButton = $(<span class="hljs-string">&#x27;add_0&#x27;</span>);    <span class="hljs-keyword">let</span> value = &#123; <span class="hljs-attr">count</span>: <span class="hljs-number">1</span> &#125;;    countNode.<span class="hljs-property">textContent</span> = value.<span class="hljs-property">count</span>;    addButton.<span class="hljs-property">onclick</span> = <span class="hljs-function">() =&gt;</span> &#123;        value.<span class="hljs-property">count</span>++;        countNode.<span class="hljs-property">textContent</span> = value.<span class="hljs-property">count</span>;    &#125;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div><script>    const expandCode_7 = document.getElementById('expand-7');    const bindCode_7 = document.getElementById('code-7');    let flag_7 = false;    expandCode_7.onclick = function (){        if(flag_7){            bindCode_7.classList.add('preview-code-active')        }else{            bindCode_7.classList.remove('preview-code-active')         }        flag_7 = !flag_7    }</script></div><p>é€šè¿‡setç»‘å®šæ•°æ®</p><div id="preview-11" class="preview"><div class="preview-box">    <div id="draw-11">    <div id="count_1"> </div><button id="add_1">add</button><!-- proxy æ–¹å¼ --><script type="module">    let countNode;    let addButton;    countNode = $('count_1');    addButton = $('add_1');    let value1 = new Proxy({ count: 1 }, {        set(target, prop, value, receiver) {            target[prop] = value;            countNode.textContent = value;        }    });    // mount    countNode.textContent = value1.count;    // update    addButton.onclick = () => {        value1.count++;    }</script>    </div>    <div class="preview-box-util">        <span id="expand-11" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-11" class="preview-code preview-code-active"><pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;count_1&quot;</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;add_1&quot;</span>&gt;</span>add<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-comment">&lt;!-- proxy æ–¹å¼ --&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;module&quot;</span>&gt;</span><span class="language-javascript">    <span class="hljs-keyword">let</span> countNode;    <span class="hljs-keyword">let</span> addButton;    countNode = $(<span class="hljs-string">&#x27;count_1&#x27;</span>);    addButton = $(<span class="hljs-string">&#x27;add_1&#x27;</span>);    <span class="hljs-keyword">let</span> value1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(&#123; <span class="hljs-attr">count</span>: <span class="hljs-number">1</span> &#125;, &#123;        <span class="hljs-title function_">set</span>(<span class="hljs-params">target, prop, value, receiver</span>) &#123;            target[prop] = value;            countNode.<span class="hljs-property">textContent</span> = value;        &#125;    &#125;);    <span class="hljs-comment">// mount</span>    countNode.<span class="hljs-property">textContent</span> = value1.<span class="hljs-property">count</span>;    <span class="hljs-comment">// update</span>    addButton.<span class="hljs-property">onclick</span> = <span class="hljs-function">() =&gt;</span> &#123;        value1.<span class="hljs-property">count</span>++;    &#125;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div><script>    const expandCode_11 = document.getElementById('expand-11');    const bindCode_11 = document.getElementById('code-11');    let flag_11 = false;    expandCode_11.onclick = function (){        if(flag_11){            bindCode_11.classList.add('preview-code-active')        }else{            bindCode_11.classList.remove('preview-code-active')         }        flag_11 = !flag_11    }</script></div><p>å¾ªç¯ä»£ç†+åŠ¨æ€æ¸²æŸ“</p><div id="preview-15" class="preview"><div class="preview-box">    <div id="draw-15">    <div id="app">    <div>data.count</div>    <div id="count_2"></div>    <div>data.data.count</div>    <div id="count_3"></div>    <button id="add_2">add</button></div><script type="module">    const app = $("app")    const map = new WeakMap();    function generatorProxy(obj, vm) {        const proxy = map.get(obj) ?? new Proxy(obj, {            get: (target, prop) => {                if (typeof target[prop] === 'object') {                    return generatorProxy(target[prop], vm)                }                return Reflect.get(target, prop);            },            set: (target, prop, value, receiver) => {                if (target[prop] === value) {                    return;                }                const result = Reflect.set(target, prop, value);                vm.render()                return result;            }        })        map.set(proxy, obj)        return proxy;    }    const count_2 = $('count_2');    const count_3 = $('count_3');    const add_2 = $('add_2');    function Component() {        const data = generatorProxy({            count: 0, data: {                count: 0            }        }, this);        this.render = () => {            count_2.textContent = data.count;            count_3.textContent = data.data.count;            add_2.onclick = () => {                console.log('click', data)                ++data.count;                ++data.data.count;            }        }        this.render()    }     // åˆ›å»ºæ–°çš„ç»„ä»¶    new Component();</script>    </div>    <div class="preview-box-util">        <span id="expand-15" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-15" class="preview-code preview-code-active"><pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>data.count<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;count_2&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>data.data.count<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;count_3&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;add_2&quot;</span>&gt;</span>add<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;module&quot;</span>&gt;</span><span class="language-javascript">    <span class="hljs-keyword">const</span> app = $(<span class="hljs-string">&quot;app&quot;</span>)    <span class="hljs-keyword">const</span> map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>();    <span class="hljs-keyword">function</span> <span class="hljs-title function_">generatorProxy</span>(<span class="hljs-params">obj, vm</span>) &#123;        <span class="hljs-keyword">const</span> proxy = map.<span class="hljs-title function_">get</span>(obj) ?? <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(obj, &#123;            <span class="hljs-attr">get</span>: <span class="hljs-function">(<span class="hljs-params">target, prop</span>) =&gt;</span> &#123;                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> target[prop] === <span class="hljs-string">&#x27;object&#x27;</span>) &#123;                    <span class="hljs-keyword">return</span> <span class="hljs-title function_">generatorProxy</span>(target[prop], vm)                &#125;                <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, prop);            &#125;,            <span class="hljs-attr">set</span>: <span class="hljs-function">(<span class="hljs-params">target, prop, value, receiver</span>) =&gt;</span> &#123;                <span class="hljs-keyword">if</span> (target[prop] === value) &#123;                    <span class="hljs-keyword">return</span>;                &#125;                <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(target, prop, value);                vm.<span class="hljs-title function_">render</span>()                <span class="hljs-keyword">return</span> result;            &#125;        &#125;)        map.<span class="hljs-title function_">set</span>(proxy, obj)        <span class="hljs-keyword">return</span> proxy;    &#125;    <span class="hljs-keyword">const</span> count_2 = $(<span class="hljs-string">&#x27;count_2&#x27;</span>);    <span class="hljs-keyword">const</span> count_3 = $(<span class="hljs-string">&#x27;count_3&#x27;</span>);    <span class="hljs-keyword">const</span> add_2 = $(<span class="hljs-string">&#x27;add_2&#x27;</span>);    <span class="hljs-keyword">function</span> <span class="hljs-title function_">Component</span>(<span class="hljs-params"></span>) &#123;        <span class="hljs-keyword">const</span> data = <span class="hljs-title function_">generatorProxy</span>(&#123;            <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">data</span>: &#123;                <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>            &#125;        &#125;, <span class="hljs-variable language_">this</span>);        <span class="hljs-variable language_">this</span>.<span class="hljs-property">render</span> = <span class="hljs-function">() =&gt;</span> &#123;            count_2.<span class="hljs-property">textContent</span> = data.<span class="hljs-property">count</span>;            count_3.<span class="hljs-property">textContent</span> = data.<span class="hljs-property">data</span>.<span class="hljs-property">count</span>;            add_2.<span class="hljs-property">onclick</span> = <span class="hljs-function">() =&gt;</span> &#123;                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;click&#x27;</span>, data)                ++data.<span class="hljs-property">count</span>;                ++data.<span class="hljs-property">data</span>.<span class="hljs-property">count</span>;            &#125;        &#125;        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>()    &#125;     <span class="hljs-comment">// åˆ›å»ºæ–°çš„ç»„ä»¶</span>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Component</span>();</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div><script>    const expandCode_15 = document.getElementById('expand-15');    const bindCode_15 = document.getElementById('code-15');    let flag_15 = false;    expandCode_15.onclick = function (){        if(flag_15){            bindCode_15.classList.add('preview-code-active')        }else{            bindCode_15.classList.remove('preview-code-active')         }        flag_15 = !flag_15    }</script></div>]]></content>
      
      
      <categories>
          
          <category> post </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>mac-é”®ç›˜æ˜ å°„</title>
      <link href="/2021/05/12/mac-jian-pan-ying-she/"/>
      <url>/2021/05/12/mac-jian-pan-ying-she/</url>
      
        <content type="html"><![CDATA[<p>ä½¿ç”¨ karabiner-elemenet è¿›è¡Œmacé”®ç›˜æ˜ å°„çš„ä¿®æ”¹</p><p>ä¿®æ”¹ å¤§å†™æŒ‰é”® -&gt; esc<br>ä¿®æ”¹ control + hjkl -&gt; æ–¹å‘æŒ‰é”®<br>ä¿®æ”¹ shift -&gt; åˆ‡æ¢è¾“å…¥æ³•<br>ä¿®æ”¹ shift + shift vscode ä¸‹ -&gt; command + p</p><script src="https://gist.github.com/suxin2017/5d1285d9f738e71c2228ade05ee6773a.js"></script>]]></content>
      
      
      <categories>
          
          <category> post </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>koaåŠ¨æ€ä¸­é—´ä»¶</title>
      <link href="/2021/05/09/koa-dong-tai-zhong-jian-jian/"/>
      <url>/2021/05/09/koa-dong-tai-zhong-jian-jian/</url>
      
        <content type="html"><![CDATA[<p>koa åŠ¨æ€åŠ è½½åˆ é™¤ä¸­é—´ä»¶ã€‚</p><p>å½“æˆ‘ä»¬å»ºç«‹ä¸€ä¸ªå…·æœ‰æ’ä»¶æœºåˆ¶çš„åº”ç”¨çš„æ—¶å€™éœ€è¦åŠ¨æ€ç®¡ç†ä¸­é—´ä»¶ã€‚</p><p>å¯¹äºkoaå¯ä»¥é€šè¿‡ä¸‹é¢ä»£ç åŠ¨æ€ç®¡ç†ä¸­é—´ä»¶ã€‚</p><pre><code class="hljs"><span class="hljs-comment">// pluginManages.ts</span><span class="hljs-keyword">import</span> <span class="hljs-title class_">Koa</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;koa&#x27;</span><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PluginManags</span> &#123;    <span class="hljs-keyword">static</span> <span class="hljs-attr">app</span>: <span class="hljs-title class_">Koa</span>&lt;<span class="hljs-title class_">Koa</span>.<span class="hljs-property">DefaultContext</span>, <span class="hljs-title class_">Koa</span>.<span class="hljs-property">DefaultState</span>&gt;;    <span class="hljs-attr">middlewareList</span>: &#123; <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">middleware</span>: <span class="hljs-title class_">Koa</span>.<span class="hljs-property">Middleware</span> &#125;[];    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>)&#123;        <span class="hljs-variable language_">this</span>.<span class="hljs-property">middlewareList</span>=[];    &#125;    <span class="hljs-title function_">registMiddleware</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, middleware: Koa.Middleware</span>) &#123;        <span class="hljs-variable language_">this</span>.<span class="hljs-property">middlewareList</span>.<span class="hljs-title function_">push</span>(&#123;            name,            middleware,        &#125;)        <span class="hljs-title class_">PluginManags</span>.<span class="hljs-property">app</span>.<span class="hljs-property">middleware</span>.<span class="hljs-title function_">push</span>(middleware);    &#125;    <span class="hljs-title function_">removeMiddleware</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) &#123;        <span class="hljs-keyword">const</span> middlewareIndex =  <span class="hljs-variable language_">this</span>.<span class="hljs-property">middlewareList</span>.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">middleware</span>=&gt;</span>middleware.<span class="hljs-property">name</span> === name);        <span class="hljs-variable language_">this</span>.<span class="hljs-property">middlewareList</span>.<span class="hljs-title function_">splice</span>(middlewareIndex,<span class="hljs-number">1</span>);        <span class="hljs-title class_">PluginManags</span>.<span class="hljs-property">app</span>.<span class="hljs-property">middleware</span>.<span class="hljs-title function_">splice</span>(middlewareIndex,<span class="hljs-number">1</span>);    &#125;&#125;<span class="hljs-keyword">let</span> <span class="hljs-attr">pluginInstance</span>:<span class="hljs-title class_">PluginManags</span>;<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getPluginManages</span>(<span class="hljs-params">app:Koa&lt;Koa.DefaultContext,Koa.DefaultState&gt;</span>)&#123;    <span class="hljs-keyword">if</span>(!pluginInstance)&#123;        <span class="hljs-title class_">PluginManags</span>.<span class="hljs-property">app</span> = app;        pluginInstance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PluginManags</span>();    &#125;    <span class="hljs-keyword">return</span> pluginInstance &#125;</code></pre><pre><code class="hljs"><span class="hljs-comment">// index.ts</span><span class="hljs-keyword">import</span> <span class="hljs-title class_">Koa</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;koa&#x27;</span>;<span class="hljs-keyword">import</span> &#123; join &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;path&#x27;</span>;<span class="hljs-keyword">import</span> &#123; getPluginManages &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./pluginManage&#x27;</span>;<span class="hljs-keyword">const</span> port = <span class="hljs-number">3001</span>;<span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Koa</span>();<span class="hljs-keyword">const</span> pluginManages = <span class="hljs-title function_">getPluginManages</span>(app);pluginManages.<span class="hljs-title function_">registMiddleware</span>(<span class="hljs-string">&#x27;hello&#x27;</span>,<span class="hljs-keyword">async</span> (ctx,next)=&gt;&#123;    ctx.<span class="hljs-property">body</span> = <span class="hljs-string">&#x27;Hello World&#x27;</span>;    <span class="hljs-title function_">next</span>()&#125;)pluginManages.<span class="hljs-title function_">registMiddleware</span>(<span class="hljs-string">&#x27;dyna&#x27;</span>,<span class="hljs-keyword">async</span> (ctx,next)=&gt;&#123;    ctx.<span class="hljs-property">body</span> = <span class="hljs-string">&#x27;åŠ¨æ€åŠ è½½&#x27;</span>    <span class="hljs-title function_">next</span>()&#125;)<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()=&gt;</span>&#123;    pluginManages.<span class="hljs-title function_">removeMiddleware</span>(<span class="hljs-string">&#x27;dyna&#x27;</span>)&#125;,<span class="hljs-number">1000</span>)app.<span class="hljs-title function_">listen</span>(port,<span class="hljs-function">()=&gt;</span>&#123;    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;http://127.0.0.1:&quot;</span>+port)&#125;);</code></pre>]]></content>
      
      
      <categories>
          
          <category> post </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>flexå¸ƒå±€</title>
      <link href="/2021/05/09/flex-bu-ju/"/>
      <url>/2021/05/09/flex-bu-ju/</url>
      
        <content type="html"><![CDATA[<p><strong>flex</strong> å¸ƒå±€æœ‰ <code>align-self</code> è¿›è¡Œå‚ç›´ä¸ªä½“å¸ƒå±€ï¼Œä½†æ˜¯<code>justify-self</code>åªåœ¨ <strong>grid</strong> å¸ƒå±€ä¸Šé¢ç”Ÿæ•ˆ</p><p>é€šè¿‡æŸ¥é˜…èµ„æ–™å‘ç°åœ¨<strong>flex</strong> ä¸­å¯ä»¥é€šè¿‡ <strong>marginï¼šauto</strong> çš„æ–¹å¼å®ç°å•ä¸ªå…ƒç´ çš„å¸ƒå±€;</p><p>å®ç°å•ä¸ªå…ƒç´ ç›¸å¯¹å‰©ä½™ä½ç½®å±…ä¸­å¸ƒå±€</p><div id="preview-9" class="preview"><div class="preview-box">    <div id="draw-9">    <div class="flex-box">    <div class="item "></div>    <div class="item flex-item-center">        ç›¸å¯¹äºåé¢ä½ç½®å±…ä¸­    </div></div><style>    .flex-box{        display: flex    }    .item{        width: 80px;        height: 80px;        background-color: aquamarine;    }    .flex-item-center{        margin:0 auto;    }</style>    </div>    <div class="preview-box-util">        <span id="expand-9" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-9" class="preview-code false"><pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex-box&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item &quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item flex-item-center&quot;</span>&gt;</span>        ç›¸å¯¹äºåé¢ä½ç½®å±…ä¸­    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css">    <span class="hljs-selector-class">.flex-box</span>&#123;        <span class="hljs-attribute">display</span>: flex    &#125;    <span class="hljs-selector-class">.item</span>&#123;        <span class="hljs-attribute">width</span>: <span class="hljs-number">80px</span>;        <span class="hljs-attribute">height</span>: <span class="hljs-number">80px</span>;        <span class="hljs-attribute">background-color</span>: aquamarine;    &#125;    <span class="hljs-selector-class">.flex-item-center</span>&#123;        <span class="hljs-attribute">margin</span>:<span class="hljs-number">0</span> auto;    &#125;</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></code></pre></div><script>    const expandCode_9 = document.getElementById('expand-9');    const bindCode_9 = document.getElementById('code-9');    let flag_9 = true;    expandCode_9.onclick = function (){        if(flag_9){            bindCode_9.classList.add('preview-code-active')        }else{            bindCode_9.classList.remove('preview-code-active')         }        flag_9 = !flag_9    }</script></div><div id="preview-10" class="preview"><div class="preview-box">    <div id="draw-10">    <div class="flex-box">    <div class="item "></div>    <div class="item flex-item-right">        ç›¸å¯¹äºç©ºä½™ä½å±…å³    </div></div><style>    .flex-box{        display: flex    }    .item{        width: 80px;        height: 80px;        background-color: aquamarine;    }    .flex-item-right{        margin-left:auto;    }</style>    </div>    <div class="preview-box-util">        <span id="expand-10" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-10" class="preview-code false"><pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex-box&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item &quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item flex-item-right&quot;</span>&gt;</span>        ç›¸å¯¹äºç©ºä½™ä½å±…å³    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css">    <span class="hljs-selector-class">.flex-box</span>&#123;        <span class="hljs-attribute">display</span>: flex    &#125;    <span class="hljs-selector-class">.item</span>&#123;        <span class="hljs-attribute">width</span>: <span class="hljs-number">80px</span>;        <span class="hljs-attribute">height</span>: <span class="hljs-number">80px</span>;        <span class="hljs-attribute">background-color</span>: aquamarine;    &#125;    <span class="hljs-selector-class">.flex-item-right</span>&#123;        <span class="hljs-attribute">margin-left</span>:auto;    &#125;</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></code></pre></div><script>    const expandCode_10 = document.getElementById('expand-10');    const bindCode_10 = document.getElementById('code-10');    let flag_10 = true;    expandCode_10.onclick = function (){        if(flag_10){            bindCode_10.classList.add('preview-code-active')        }else{            bindCode_10.classList.remove('preview-code-active')         }        flag_10 = !flag_10    }</script></div><div id="preview-11" class="preview"><div class="preview-box">    <div id="draw-11">    <div class="flex-box">    <div class="item flex-item-right">        flex å±…å³    </div></div><style>    .flex-box{        display: flex    }    .item{        width: 80px;        height: 80px;        background-color: aquamarine;    }    .flex-item-right{        margin-left:auto;    }</style>    </div>    <div class="preview-box-util">        <span id="expand-11" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-11" class="preview-code false"><pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex-box&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item flex-item-right&quot;</span>&gt;</span>        flex å±…å³    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css">    <span class="hljs-selector-class">.flex-box</span>&#123;        <span class="hljs-attribute">display</span>: flex    &#125;    <span class="hljs-selector-class">.item</span>&#123;        <span class="hljs-attribute">width</span>: <span class="hljs-number">80px</span>;        <span class="hljs-attribute">height</span>: <span class="hljs-number">80px</span>;        <span class="hljs-attribute">background-color</span>: aquamarine;    &#125;    <span class="hljs-selector-class">.flex-item-right</span>&#123;        <span class="hljs-attribute">margin-left</span>:auto;    &#125;</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></code></pre></div><script>    const expandCode_11 = document.getElementById('expand-11');    const bindCode_11 = document.getElementById('code-11');    let flag_11 = true;    expandCode_11.onclick = function (){        if(flag_11){            bindCode_11.classList.add('preview-code-active')        }else{            bindCode_11.classList.remove('preview-code-active')         }        flag_11 = !flag_11    }</script></div><div id="preview-12" class="preview"><div class="preview-box">    <div id="draw-12">    <div class="flex-box">    <div class="item flex-item-center">        flex å±…ä¸­    </div></div><style>    .flex-box{        display: flex    }    .item{        width: 80px;        height: 80px;        background-color: aquamarine;    }    .flex-item-center{        margin-left:auto;    }</style>    </div>    <div class="preview-box-util">        <span id="expand-12" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-12" class="preview-code false"><pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex-box&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item flex-item-center&quot;</span>&gt;</span>        flex å±…ä¸­    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css">    <span class="hljs-selector-class">.flex-box</span>&#123;        <span class="hljs-attribute">display</span>: flex    &#125;    <span class="hljs-selector-class">.item</span>&#123;        <span class="hljs-attribute">width</span>: <span class="hljs-number">80px</span>;        <span class="hljs-attribute">height</span>: <span class="hljs-number">80px</span>;        <span class="hljs-attribute">background-color</span>: aquamarine;    &#125;    <span class="hljs-selector-class">.flex-item-center</span>&#123;        <span class="hljs-attribute">margin-left</span>:auto;    &#125;</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></code></pre></div><script>    const expandCode_12 = document.getElementById('expand-12');    const bindCode_12 = document.getElementById('code-12');    let flag_12 = true;    expandCode_12.onclick = function (){        if(flag_12){            bindCode_12.classList.add('preview-code-active')        }else{            bindCode_12.classList.remove('preview-code-active')         }        flag_12 = !flag_12    }</script></div>]]></content>
      
      
      <categories>
          
          <category> post </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯ä»£ç è§„èŒƒ</title>
      <link href="/2021/04/29/qian-duan-dai-ma-gui-fan/"/>
      <url>/2021/04/29/qian-duan-dai-ma-gui-fan/</url>
      
        <content type="html"><![CDATA[<p>éšç€å¼€å‘ç´¯è®¡æ—¶é•¿çš„å˜é•¿ï¼Œæ„ˆå‘è§‰å¾—å†™å¾—å¿«ä¸æ˜¯è¯æ˜ç¼–ç¨‹èƒ½åŠ›çš„å¥½åã€‚</p><p>ä»£ç è´¨é‡ä¹Ÿæ˜¯éå¸¸éœ€è¦æ³¨é‡çš„ï¼Œå†™ä»£ç å’Œå†™ä½œæ–‡æ˜¯ä¸€æ ·çš„ã€‚</p><p>æ‰€ä»¥éœ€è¦å›è¿‡å¤´å»çœ‹çœ‹ä»£ç æ€ä¹ˆå†™ï¼Œè¿™ä¸ªè¿‡ç¨‹æœ¬èº«ä¹Ÿæ˜¯ä¸€ç§ä»£ç èƒ½åŠ›çš„æå‡ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> weibo </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æµ‹è¯•</title>
      <link href="/2021/04/27/preview/"/>
      <url>/2021/04/27/preview/</url>
      
        <content type="html"><![CDATA[<div id="preview-0" class="preview"><div class="preview-box">    <div id="draw-0">    è¯·æ‰“å¼€consoleæŸ¥çœ‹ç»“æœ<script type="module">                    (function(){                        function sayHello(){    console.log('hello')}sayHello()                    })(0)                </script>    </div>    <div class="preview-box-util">        <span id="expand-0" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-0" class="preview-code false"><pre><code class="hljs"><span class="hljs-keyword">function</span> <span class="hljs-title function_">sayHello</span>(<span class="hljs-params"></span>)&#123;    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;hello&#x27;</span>)&#125;<span class="hljs-title function_">sayHello</span>()</code></pre></div><script>    const expandCode_0 = document.getElementById('expand-0');    const bindCode_0 = document.getElementById('code-0');    let flag_0 = true;    expandCode_0.onclick = function (){        if(flag_0){            bindCode_0.classList.add('preview-code-active')        }else{            bindCode_0.classList.remove('preview-code-active')         }        flag_0 = !flag_0    }</script></div><div id="preview-1" class="preview"><div class="preview-box">    <div id="draw-1">    <div id="btn">button</div><style>    #btn{        width: 20px;        height: 20px;        background: red;    }</style><script>function btnSayHello(){    console.log('hello btn')}document.getElementById('btn').onclick = btnSayHello</script>    </div>    <div class="preview-box-util">        <span id="expand-1" class="preview-box-util-code" style="background-image:url(/imgs/code.svg)"></span>    </div></div><div id="code-1" class="preview-code false"><pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span>button<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css">    <span class="hljs-selector-id">#btn</span>&#123;        <span class="hljs-attribute">width</span>: <span class="hljs-number">20px</span>;        <span class="hljs-attribute">height</span>: <span class="hljs-number">20px</span>;        <span class="hljs-attribute">background</span>: red;    &#125;</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">btnSayHello</span>(<span class="hljs-params"></span>)&#123;    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;hello btn&#x27;</span>)&#125;<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;btn&#x27;</span>).<span class="hljs-property">onclick</span> = btnSayHello</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div><script>    const expandCode_1 = document.getElementById('expand-1');    const bindCode_1 = document.getElementById('code-1');    let flag_1 = true;    expandCode_1.onclick = function (){        if(flag_1){            bindCode_1.classList.add('preview-code-active')        }else{            bindCode_1.classList.remove('preview-code-active')         }        flag_1 = !flag_1    }</script></div><pre><code class="hljs"><span class="hljs-keyword">type</span> A = <span class="hljs-built_in">string</span>;</code></pre>]]></content>
      
      
      <categories>
          
          <category> post </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>è§£ç :reduxçš„å¥¥ç§˜</title>
      <link href="/2021/01/30/jie-ma-redux-mei-xiang-xiang-zhong-de-fu-za/"/>
      <url>/2021/01/30/jie-ma-redux-mei-xiang-xiang-zhong-de-fu-za/</url>
      
        <content type="html"><![CDATA[<h3 id="redux">redux</h3><p>redux æ˜¯ä¸€ä¸ªå‡½æ•°å¼çš„æ•°æ®æµç®¡ç†åº“ï¼Œä½†æ˜¯æˆ‘ä¸€ç›´éƒ½ä¸äº†è§£å…¶å®ç°åŸç†ï¼Œä¹‹å‰ä¸€ç›´ç”¨äººå®¶å°è£…å¥½çš„ã€‚</p><p>æ ¹æ®å®˜ç½‘å¤§è‡´ç†è§£å…¶è¿è¡Œæ–¹å¼æ˜¯ä¸‹å›¾è¿™æ ·çš„ã€‚<strong>é€šè¿‡ store dispatch ä¼ å…¥ action ç„¶åç»ç”± reducer è¿›è¡Œæ•°æ®å¤„ç†è¿”å›æ–°çš„ stateã€‚</strong></p><p><img src="/imgs/redux.png" alt="reduxè¿è¡Œæ–¹å¼"></p><p>æˆ‘è§‰å¾—è¿™åƒè§‚å¯Ÿè€…æ¨¡å¼ï¼Œç„¶ååœ¨å†…éƒ¨ç»‘å®šäº†ä¸€ä¸ªæ•°æ®ã€‚</p><h3 id="éªŒè¯">éªŒè¯</h3><p>ä¸ºäº†éªŒè¯æˆ‘çš„æƒ³æ³•æˆ‘ç¿»çœ‹äº† redux çš„æºç ï¼Œç²¾ç®€ä¹‹åä»–çš„ä»£ç å¤§æ¦‚æ˜¯è¿™æ ·çš„.</p><pre><code class="hljs"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createState</span>(<span class="hljs-params">reducer, initState,</span>)  <span class="hljs-keyword">let</span> currentState = initState;  <span class="hljs-keyword">let</span> currentReducer = reducer;  <span class="hljs-keyword">let</span> currentListeners = [];  <span class="hljs-keyword">let</span> isDispatching = <span class="hljs-literal">false</span>;  <span class="hljs-keyword">function</span> <span class="hljs-title function_">dispatch</span>(<span class="hljs-params">action</span>) &#123;    <span class="hljs-keyword">try</span> &#123;      isDispatching = <span class="hljs-literal">true</span>;      currentState = <span class="hljs-title function_">currentReducer</span>(currentState, action);    &#125; <span class="hljs-keyword">finally</span> &#123;      isDispatching = <span class="hljs-literal">false</span>;    &#125;    <span class="hljs-keyword">const</span> listeners = currentListeners;    listeners.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">listener</span>) =&gt;</span> &#123;      <span class="hljs-title function_">listener</span>();    &#125;);  &#125;  <span class="hljs-keyword">function</span> <span class="hljs-title function_">getCurrentState</span>(<span class="hljs-params"></span>) &#123;    <span class="hljs-keyword">return</span> currentState;  &#125;  <span class="hljs-keyword">function</span> <span class="hljs-title function_">subscribe</span>(<span class="hljs-params">listener</span>) &#123;    <span class="hljs-keyword">if</span> (isDispatching) &#123;      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;æ­£åœ¨è§¦å‘äº‹ä»¶ä¸èƒ½æ·»åŠ æ–°çš„ç›‘å¬å™¨&quot;</span>);      <span class="hljs-keyword">return</span>;    &#125;    currentListeners.<span class="hljs-title function_">push</span>(listener);    <span class="hljs-keyword">let</span> isSubscribed = <span class="hljs-literal">true</span>;    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">unSubscribe</span>(<span class="hljs-params"></span>) &#123;      <span class="hljs-keyword">if</span> (!isSubscribed) &#123;        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;å·²ç»å–æ¶ˆè¿‡äº†&quot;</span>);        <span class="hljs-keyword">return</span>;      &#125;      <span class="hljs-keyword">const</span> index = currentListeners.<span class="hljs-title function_">indexOf</span>(listener);      currentListeners.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);    &#125;;  &#125;  <span class="hljs-title function_">dispatch</span>(&#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;init&quot;</span> &#125;);  <span class="hljs-keyword">return</span> &#123;    <span class="hljs-attr">getState</span>: getCurrentState,    subscribe,    dispatch,  &#125;;&#125;</code></pre><h2 id="è‡ªå·±åŠ¨æ‰‹æä¸€ä¸ª">è‡ªå·±åŠ¨æ‰‹æä¸€ä¸ª</h2><p>è·Ÿæˆ‘æƒ³çš„å·®ä¸å¤ªå¤š</p><p>é¦–å…ˆåˆ›é€ ä¸€ä¸ªè§‚å¯Ÿè€…</p><pre><code class="hljs"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createObserver</span>(<span class="hljs-params"></span>) &#123;  <span class="hljs-keyword">let</span> listeners = [];  <span class="hljs-keyword">function</span> <span class="hljs-title function_">dispatch</span>(<span class="hljs-params">eventType, data</span>) &#123;    listeners.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">listener</span>) =&gt;</span> &#123;      <span class="hljs-title function_">listener</span>(eventType, data);    &#125;);  &#125;  <span class="hljs-keyword">function</span> <span class="hljs-title function_">addEventListener</span>(<span class="hljs-params">eventType, listener</span>) &#123;    listeners.<span class="hljs-title function_">push</span>(listener);  &#125;  <span class="hljs-keyword">return</span> &#123;    <span class="hljs-attr">dispatch</span>: dispatch,    addEventListener,  &#125;;&#125;<span class="hljs-keyword">const</span> observer = <span class="hljs-title function_">createObserver</span>();observer.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;add&quot;</span>, <span class="hljs-function">(<span class="hljs-params">type, data</span>) =&gt;</span> &#123;  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);&#125;);observer.<span class="hljs-title function_">dispatch</span>(<span class="hljs-string">&quot;add&quot;</span>, <span class="hljs-number">1</span>);</code></pre><p>é€šè¿‡åˆ›å»ºä¸€ä¸ªå¯è§‚å¯Ÿçš„å¯¹è±¡ï¼Œç„¶åå‘å¯¹è±¡å‘å¸ƒäº‹ä»¶ï¼Œè°ƒç”¨æ‰€æœ‰ç›‘å¬äº‹ä»¶çš„æ–¹æ³•ã€‚</p><p>è¿™å°±æ˜¯è§‚å¯Ÿè€…æ¨¡å¼ï¼Œè¿›ä¸€æ­¥æ”¹é€ ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå…¨å±€å˜é‡ä½œä¸ºæˆ‘ä»¬çš„ state;</p><p>é‚£ä¹ˆåœ¨ä½¿ç”¨çš„æ—¶å€™éœ€è¦åšè¿™ä»¶äº‹ã€‚</p><pre><code class="hljs"><span class="hljs-keyword">let</span> state = <span class="hljs-number">0</span>;<span class="hljs-keyword">const</span> observer = <span class="hljs-title function_">createObserver</span>();observer.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;add&quot;</span>, <span class="hljs-function">(<span class="hljs-params">type</span>) =&gt;</span> &#123;  state = state + <span class="hljs-number">1</span>;&#125;);observer.<span class="hljs-title function_">dispatch</span>(<span class="hljs-string">&quot;add&quot;</span>);</code></pre><p>è¿™æ ·å°±å®Œæˆäº†å¯¹ state çš„æ“ä½œï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œå¯¹æ•°æ®çš„æ“ä½œå’Œä½¿ç”¨æ•°æ®é€šå¸¸ä¸åœ¨ä¸€èµ·ã€‚</p><p>ä¸ºäº†ä»£ç æ›´å¥½çš„å¤ç”¨ï¼Œéœ€è¦æå–æ•°æ®æ“ä½œçš„éƒ¨åˆ†ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„å†…å®¹ï¼Œåªæ“ä½œæ•°æ®ã€‚</p><p>å¹¶ä¸”æˆ‘ä»¬æŠŠ state æ”¾åˆ°åˆ° createObserver ä¸­ï¼Œä½œä¸º observer çš„æˆå‘˜ã€‚</p><pre><code class="hljs"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createObserver</span>(<span class="hljs-params"></span>) &#123;  <span class="hljs-comment">// å…¨å±€å”¯ä¸€</span>  <span class="hljs-keyword">let</span> state = <span class="hljs-number">0</span>;  <span class="hljs-keyword">let</span> operateDataFunc = [];  <span class="hljs-comment">// å‘é€äº‹ä»¶</span>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">dispatch</span>(<span class="hljs-params">eventType, data</span>) &#123;    <span class="hljs-comment">// æ“ä½œæ•°æ®çš„æ–¹æ³•</span>    state = operateDataFunc.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">data, operateFunc</span>) =&gt;</span> &#123;      <span class="hljs-keyword">return</span> <span class="hljs-title function_">operateFunc</span>(data, eventType);    &#125;, state);    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(state);  &#125;  <span class="hljs-comment">// æ·»åŠ æ“ä½œæ•°æ®çš„æ–¹æ³•</span>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">addOperateFunc</span>(<span class="hljs-params">eventType, listener</span>) &#123;    operateDataFunc.<span class="hljs-title function_">push</span>(listener);  &#125;  <span class="hljs-keyword">function</span> <span class="hljs-title function_">getState</span>(<span class="hljs-params"></span>) &#123;    <span class="hljs-keyword">return</span> state;  &#125;  <span class="hljs-keyword">return</span> &#123;    <span class="hljs-attr">getState</span>: getState,    <span class="hljs-attr">dispatch</span>: dispatch,    <span class="hljs-attr">addOperateFunc</span>: addOperateFunc,  &#125;;&#125;<span class="hljs-keyword">const</span> observer = <span class="hljs-title function_">createObserver</span>();observer.<span class="hljs-title function_">addOperateFunc</span>(<span class="hljs-string">&quot;add&quot;</span>, <span class="hljs-function">(<span class="hljs-params">prevState</span>) =&gt;</span> &#123;  <span class="hljs-keyword">return</span> prevState + <span class="hljs-number">1</span>;&#125;);observer.<span class="hljs-title function_">dispatch</span>(<span class="hljs-string">&quot;add&quot;</span>);</code></pre><p>ç°åœ¨æ•°æ®æ“ä½œæå®šäº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯æ•°æ®ä½¿ç”¨æ–¹äº†ï¼Œéœ€è¦å¯¹æ•°æ®è¿›è¡Œæ“ä½œåé€šçŸ¥æ‰€æœ‰çš„æ•°æ®ä½¿ç”¨æ–¹ï¼Œstate æ•°æ®å‘ç”Ÿå˜åŠ¨ã€‚</p><p>ç»§ç»­æ”¹é€  dispatch æ–¹æ³•</p><pre><code class="hljs"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createObserver</span>(<span class="hljs-params"></span>) &#123;  <span class="hljs-keyword">let</span> state = <span class="hljs-number">0</span>;  <span class="hljs-keyword">let</span> operateDataFunc = [];  <span class="hljs-keyword">let</span> users = [];  <span class="hljs-comment">// å‘é€äº‹ä»¶</span>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">dispatch</span>(<span class="hljs-params">eventType, data</span>) &#123;    <span class="hljs-comment">// æ“ä½œæ•°æ®çš„æ–¹æ³•</span>    state = operateDataFunc.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">data, operateFunc</span>) =&gt;</span> &#123;      <span class="hljs-keyword">return</span> <span class="hljs-title function_">operateFunc</span>(data, eventType);    &#125;, state);    <span class="hljs-title function_">notifyUser</span>();  &#125;  <span class="hljs-comment">// æ·»åŠ æ“ä½œæ•°æ®çš„æ–¹æ³•</span>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">addOperateFunc</span>(<span class="hljs-params">eventType, listener</span>) &#123;    operateDataFunc.<span class="hljs-title function_">push</span>(listener);  &#125;  <span class="hljs-comment">// é€šçŸ¥ä½¿ç”¨æ•°æ®çš„ç”¨æˆ·ï¼Œæ•°æ®æ”¹å˜äº†</span>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">notifyUser</span>(<span class="hljs-params"></span>) &#123;    users.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> <span class="hljs-title function_">user</span>());  &#125;  <span class="hljs-comment">// æ·»åŠ æ•°æ®ä½¿ç”¨è€…</span>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">addUser</span>(<span class="hljs-params">user</span>) &#123;    users.<span class="hljs-title function_">push</span>(user);  &#125;  <span class="hljs-keyword">function</span> <span class="hljs-title function_">getState</span>(<span class="hljs-params"></span>) &#123;    <span class="hljs-keyword">return</span> state;  &#125;  <span class="hljs-keyword">return</span> &#123;    <span class="hljs-attr">getState</span>: getState,    <span class="hljs-attr">dispatch</span>: dispatch,    <span class="hljs-attr">addOperateFunc</span>: addOperateFunc,    <span class="hljs-attr">addUser</span>: addUser,  &#125;;&#125;<span class="hljs-keyword">const</span> observer = <span class="hljs-title function_">createObserver</span>();observer.<span class="hljs-title function_">addUser</span>(<span class="hljs-function">() =&gt;</span> &#123;  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;æ•°æ®å‘ç”Ÿå˜åŒ–&quot;</span>, observer.<span class="hljs-title function_">getState</span>());&#125;);observer.<span class="hljs-title function_">addOperateFunc</span>(<span class="hljs-string">&quot;add&quot;</span>, <span class="hljs-function">(<span class="hljs-params">prevState</span>) =&gt;</span> &#123;  <span class="hljs-keyword">return</span> prevState + <span class="hljs-number">1</span>;&#125;);observer.<span class="hljs-title function_">dispatch</span>(<span class="hljs-string">&quot;add&quot;</span>);</code></pre><p>ok åˆ°è¿™é‡Œ mini-redux å®Œæˆä¸€å¤§åŠäº†ï¼Œæ£€éªŒä¸€ä¸‹</p><pre><code class="hljs"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createObserver</span>(<span class="hljs-params"></span>) &#123;  <span class="hljs-keyword">let</span> state = <span class="hljs-number">0</span>;  <span class="hljs-keyword">let</span> operateDataFunc = &#123;&#125;;  <span class="hljs-keyword">let</span> users = [];  <span class="hljs-comment">// å‘é€äº‹ä»¶</span>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">dispatch</span>(<span class="hljs-params">eventType, data</span>) &#123;    <span class="hljs-comment">// æ“ä½œæ•°æ®çš„æ–¹æ³•</span>    state = operateDataFunc[eventType].<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">data, operateFunc</span>) =&gt;</span> &#123;      <span class="hljs-keyword">return</span> <span class="hljs-title function_">operateFunc</span>(data, eventType);    &#125;, state);    <span class="hljs-title function_">notifyUser</span>();  &#125;  <span class="hljs-comment">// æ·»åŠ æ“ä½œæ•°æ®çš„æ–¹æ³•</span>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">addOperateFunc</span>(<span class="hljs-params">eventType, listener</span>) &#123;    <span class="hljs-keyword">if</span> (!operateDataFunc[eventType]) &#123;      operateDataFunc[eventType] = [];    &#125;    operateDataFunc[eventType].<span class="hljs-title function_">push</span>(listener);  &#125;  <span class="hljs-comment">// é€šçŸ¥ä½¿ç”¨æ•°æ®çš„ç”¨æˆ·ï¼Œæ•°æ®æ”¹å˜äº†</span>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">notifyUser</span>(<span class="hljs-params"></span>) &#123;    users.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> <span class="hljs-title function_">user</span>());  &#125;  <span class="hljs-keyword">function</span> <span class="hljs-title function_">addUser</span>(<span class="hljs-params">user</span>) &#123;    users.<span class="hljs-title function_">push</span>(user);  &#125;  <span class="hljs-keyword">function</span> <span class="hljs-title function_">getState</span>(<span class="hljs-params"></span>) &#123;    <span class="hljs-keyword">return</span> state;  &#125;  <span class="hljs-keyword">return</span> &#123;    <span class="hljs-attr">getState</span>: getState,    <span class="hljs-attr">dispatch</span>: dispatch,    <span class="hljs-attr">addOperateFunc</span>: addOperateFunc,    <span class="hljs-attr">addUser</span>: addUser,  &#125;;&#125;<span class="hljs-keyword">const</span> observer = <span class="hljs-title function_">createObserver</span>();observer.<span class="hljs-title function_">addOperateFunc</span>(<span class="hljs-string">&quot;add&quot;</span>, <span class="hljs-function">(<span class="hljs-params">prevState</span>) =&gt;</span> &#123;  <span class="hljs-keyword">return</span> prevState + <span class="hljs-number">1</span>;&#125;);observer.<span class="hljs-title function_">addOperateFunc</span>(<span class="hljs-string">&quot;subtraction&quot;</span>, <span class="hljs-function">(<span class="hljs-params">prevState</span>) =&gt;</span> &#123;  <span class="hljs-keyword">return</span> prevState - <span class="hljs-number">1</span>;&#125;);<span class="hljs-keyword">let</span> result = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;result&quot;</span>);result.<span class="hljs-property">textContent</span> = <span class="hljs-string">&quot;result: &quot;</span> + observer.<span class="hljs-title function_">getState</span>();observer.<span class="hljs-title function_">addUser</span>(<span class="hljs-function">() =&gt;</span> &#123;  result.<span class="hljs-property">textContent</span> = <span class="hljs-string">&quot;result: &quot;</span> + observer.<span class="hljs-title function_">getState</span>();&#125;);<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;add&quot;</span>).<span class="hljs-property">onclick</span> = <span class="hljs-function">() =&gt;</span> &#123;  observer.<span class="hljs-title function_">dispatch</span>(<span class="hljs-string">&quot;add&quot;</span>);&#125;;<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;subtraction&quot;</span>).<span class="hljs-property">onclick</span> = <span class="hljs-function">() =&gt;</span> &#123;  observer.<span class="hljs-title function_">dispatch</span>(<span class="hljs-string">&quot;subtraction&quot;</span>);&#125;;</code></pre><p class="codepen" data-height="265" data-theme-id="light" data-default-tab="js,result" data-user="angelname" data-slug-hash="jOVOQMK" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="observer æ¨¡å¼">  <span>See the Pen <a href="https://codepen.io/angelname/pen/jOVOQMK">  observer æ¨¡å¼</a> by bxer (<a href="https://codepen.io/angelname">@angelname</a>)  on <a href="https://codepen.io">CodePen</a>.</span>  å¦‚æœä½ çœ‹ä¸åˆ°è¿™ä¸ªæ¼”ç¤ºï¼Œè¯´æ˜å½“å‰ç½‘ç«™ä¸æ”¯æŒ codepen ï¼Œå¯ä»¥åˆ° <a href="https://www.suxin.2017.cn">è‹é‘«çš„åšå®¢</a></p><script async src="https://cpwebassets.codepen.io/assets/embed/ei.js"></script><p>ç°åœ¨å®Œæˆäº†æ— å‰¯ä½œç”¨çš„ reduxï¼Œå‡½æ•°ç›¸åŒçš„å‚æ•°è¿”å›å€¼ä¸€å®šæ˜¯ç›¸åŒçš„ï¼Œä½†æ˜¯å‰æ®µç»å¸¸é€šè¿‡è¯·æ±‚æ¥è·å–æ•°æ®ã€‚</p><p>å‡è®¾æˆ‘ä»¬å¯¹ result çš„æ“ä½œï¼ŒåŠ  1 æˆ–è€…å‡ 1ï¼Œæ¥è‡³äºæœåŠ¡å™¨ã€‚</p><pre><code class="hljs"><span class="hljs-comment">// mock server</span><span class="hljs-keyword">function</span> <span class="hljs-title function_">getOperate</span>(<span class="hljs-params"></span>) &#123;  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">r</span>) =&gt;</span> &#123;    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;      <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() &lt; <span class="hljs-number">0.5</span>) &#123;        <span class="hljs-title function_">r</span>(<span class="hljs-string">&quot;add&quot;</span>);      &#125; <span class="hljs-keyword">else</span> &#123;        <span class="hljs-title function_">r</span>(<span class="hljs-string">&quot;subtraction&quot;</span>);      &#125;    &#125;, <span class="hljs-number">500</span>);  &#125;);&#125;</code></pre><p>å’ŒåŒæ­¥ä»£ç ä¸€æ ·ï¼Œéœ€è¦æ·»åŠ ä¸€ä¸ªä¸“é—¨å­˜æ”¾å‰¯ä½œç”¨å‡½æ•°çš„å¯¹è±¡ã€‚<br>åªéœ€è¦å‘é€ç»™å‰¯ä½œç”¨äº‹ä»¶çš„æ—¶å€™ï¼ŒæŠŠ dispatch ä¼ ç»™å‰¯ä½œç”¨çš„å¤„ç†æ•°æ®çš„å‡½æ•°å°±å¯ä»¥äº†ã€‚</p><p>æœ€ç»ˆç»“æœ</p><pre><code class="hljs"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createObserver</span>(<span class="hljs-params"></span>) &#123;  <span class="hljs-keyword">let</span> state = <span class="hljs-number">0</span>;  <span class="hljs-keyword">let</span> operateDataFunc = &#123;&#125;;  <span class="hljs-keyword">let</span> users = [];  <span class="hljs-keyword">let</span> effectOperateDataFunc = &#123;&#125;;  <span class="hljs-comment">// å‘é€äº‹ä»¶</span>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">dispatch</span>(<span class="hljs-params">eventType, data</span>) &#123;    <span class="hljs-comment">// æ“ä½œæ•°æ®çš„æ–¹æ³•</span>    state = operateDataFunc[eventType].<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">data, operateFunc</span>) =&gt;</span> &#123;      <span class="hljs-keyword">return</span> <span class="hljs-title function_">operateFunc</span>(data, eventType);    &#125;, state);    <span class="hljs-title function_">notifyUser</span>();  &#125;  <span class="hljs-comment">// æ·»åŠ æ“ä½œæ•°æ®çš„æ–¹æ³•</span>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">addOperateFunc</span>(<span class="hljs-params">eventType, listener</span>) &#123;    <span class="hljs-keyword">if</span> (!operateDataFunc[eventType]) &#123;      operateDataFunc[eventType] = [];    &#125;    operateDataFunc[eventType].<span class="hljs-title function_">push</span>(listener);  &#125;  <span class="hljs-comment">// æ·»åŠ å­˜åœ¨å‰¯ä½œç”¨çš„å‡½æ•°</span>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">addEffectOperateFunc</span>(<span class="hljs-params">eventType, listener</span>) &#123;    <span class="hljs-keyword">if</span> (!effectOperateDataFunc[eventType]) &#123;      effectOperateDataFunc[eventType] = [];    &#125;    effectOperateDataFunc[eventType].<span class="hljs-title function_">push</span>(listener);  &#125;  <span class="hljs-comment">// å‘é€ç»™å‰¯ä½œç”¨å‡½æ•°çš„äº‹ä»¶</span>  <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">dispatchEffect</span>(<span class="hljs-params">eventType, data</span>) &#123;    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> operateFunc <span class="hljs-keyword">of</span> effectOperateDataFunc[eventType]) &#123;      <span class="hljs-keyword">await</span> <span class="hljs-title function_">operateFunc</span>(dispatch, state, data, eventType);    &#125;  &#125;  <span class="hljs-comment">// é€šçŸ¥ä½¿ç”¨æ•°æ®çš„ç”¨æˆ·ï¼Œæ•°æ®æ”¹å˜äº†</span>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">notifyUser</span>(<span class="hljs-params"></span>) &#123;    users.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> <span class="hljs-title function_">user</span>());  &#125;  <span class="hljs-keyword">function</span> <span class="hljs-title function_">addUser</span>(<span class="hljs-params">user</span>) &#123;    users.<span class="hljs-title function_">push</span>(user);  &#125;  <span class="hljs-keyword">function</span> <span class="hljs-title function_">getState</span>(<span class="hljs-params"></span>) &#123;    <span class="hljs-keyword">return</span> state;  &#125;  <span class="hljs-keyword">return</span> &#123;    <span class="hljs-attr">getState</span>: getState,    <span class="hljs-attr">dispatch</span>: dispatch,    <span class="hljs-attr">addOperateFunc</span>: addOperateFunc,    <span class="hljs-attr">addUser</span>: addUser,    <span class="hljs-attr">addEffectOperateFunc</span>: addEffectOperateFunc,    <span class="hljs-attr">dispatchEffect</span>: dispatchEffect,  &#125;;&#125;<span class="hljs-keyword">const</span> observer = <span class="hljs-title function_">createObserver</span>();observer.<span class="hljs-title function_">addOperateFunc</span>(<span class="hljs-string">&quot;add&quot;</span>, <span class="hljs-function">(<span class="hljs-params">prevState</span>) =&gt;</span> &#123;  <span class="hljs-keyword">return</span> prevState + <span class="hljs-number">1</span>;&#125;);observer.<span class="hljs-title function_">addOperateFunc</span>(<span class="hljs-string">&quot;subtraction&quot;</span>, <span class="hljs-function">(<span class="hljs-params">prevState</span>) =&gt;</span> &#123;  <span class="hljs-keyword">return</span> prevState - <span class="hljs-number">1</span>;&#125;);observer.<span class="hljs-title function_">addEffectOperateFunc</span>(<span class="hljs-string">&quot;getOpereate&quot;</span>, <span class="hljs-function">(<span class="hljs-params">dispatch, prevState</span>) =&gt;</span> &#123;  <span class="hljs-keyword">return</span> <span class="hljs-title function_">getOperate</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">operateType</span>) =&gt;</span> &#123;    <span class="hljs-title function_">dispatch</span>(operateType);  &#125;);&#125;);<span class="hljs-keyword">let</span> result = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;result&quot;</span>);result.<span class="hljs-property">textContent</span> = <span class="hljs-string">&quot;result: &quot;</span> + observer.<span class="hljs-title function_">getState</span>();observer.<span class="hljs-title function_">addUser</span>(<span class="hljs-function">() =&gt;</span> &#123;  result.<span class="hljs-property">textContent</span> = <span class="hljs-string">&quot;result: &quot;</span> + observer.<span class="hljs-title function_">getState</span>();&#125;);<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;add&quot;</span>).<span class="hljs-property">onclick</span> = <span class="hljs-function">() =&gt;</span> &#123;  observer.<span class="hljs-title function_">dispatchEffect</span>(<span class="hljs-string">&quot;getOpereate&quot;</span>);&#125;;<span class="hljs-keyword">function</span> <span class="hljs-title function_">getOperate</span>(<span class="hljs-params"></span>) &#123;  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">r</span>) =&gt;</span> &#123;    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;      <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() &lt; <span class="hljs-number">0.5</span>) &#123;        <span class="hljs-title function_">r</span>(<span class="hljs-string">&quot;add&quot;</span>);      &#125; <span class="hljs-keyword">else</span> &#123;        <span class="hljs-title function_">r</span>(<span class="hljs-string">&quot;subtraction&quot;</span>);      &#125;    &#125;, <span class="hljs-number">500</span>);  &#125;);&#125;</code></pre><p class="codepen" data-height="265" data-theme-id="light" data-default-tab="js,result" data-user="angelname" data-slug-hash="bGBGQvM" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="effect æ¨¡å¼">  <span>See the Pen <a href="https://codepen.io/angelname/pen/bGBGQvM">  effect æ¨¡å¼</a> by bxer (<a href="https://codepen.io/angelname">@angelname</a>)  on <a href="https://codepen.io">CodePen</a>.</span>   å¦‚æœä½ çœ‹ä¸åˆ°è¿™ä¸ªæ¼”ç¤ºï¼Œè¯´æ˜å½“å‰ç½‘ç«™ä¸æ”¯æŒ codepen ï¼Œå¯ä»¥åˆ° <a href="https://www.suxin.2017.cn">è‹é‘«çš„åšå®¢</a></p><script async src="https://cpwebassets.codepen.io/assets/embed/ei.js"></script><p>è¿™æ ·å°±å®Œæˆäº†ä¸€ä¸ªç©å…· redux å–½ã€‚</p><p>redux æºç ä¸­è¿˜æœ‰ä¸€ä¸ªæ–¹å¼æ˜¯å’Œ Observables çš„ ECMAScript ææ¡ˆç›¸å…³çš„ã€‚</p><p>å¯ä»¥æœ‰åºçš„å¤„ç†è¿™ç§å‰¯ä½œç”¨å‡½æ•°çš„æ‰§è¡Œï¼Œæœ‰å…´è¶£å¯ä»¥çœ‹çœ‹ã€‚</p><p><a href="https://ponyfoo.com/articles/observables-coming-to-ecmascript?utm_source=tuicool&amp;utm_medium=referral">observables-coming-to-ecmascript</a></p><p>é¡ºä¾¿ä¸€æï¼Œå…³äºå‡½æ•°å¼ç¼–ç¨‹ï¼Œå‡½æ•°å¼ç¼–ç¨‹æ˜¯ä¸€ç§æ€ç»´æ–¹å¼ï¼Œä¹Ÿè®¸ä½œä¸ºå‰ç«¯çš„ä½ å¯èƒ½æ²¡ç ”ç©¶è¿‡ï¼Œä½†æ˜¯ä½ åªè¦ç”¨ä¸Šäº† mapï¼Œfindï¼Œreduceï¼ŒforEachï¼Œfilter å…¶å®ä½ å°±å·²ç»ç”¨ä¸Šäº†å‡½æ•°å¼ç¼–ç¨‹ï¼Œå› ä¸ºåœ¨è¯­è¨€æ–¹é¢å°±æä¾›äº†è¿™ç§ apiï¼Œè¿˜æœ‰å°±æ˜¯ä¸ºä»€ä¹ˆå‡½æ•°å¼ç¼–ç¨‹ç°åœ¨æ‰æµè¡Œï¼Œå› ä¸ºå®ƒæ…¢ã€‚å¦‚æœæ„Ÿå…´è¶£å¯ä»¥ç•™è¨€ï¼Œæˆ‘çœ‹çœ‹è¦ä¸è¦å†™ä¸€ç¯‡å‡½æ•°å¼ç¼–ç¨‹çš„æ–‡ç« ã€‚</p><p>æˆ‘æ˜¯è‹é‘«ï¼Œå…³æ³¨æˆ‘ï¼Œå¸¦ä½ æå„ç§å„æ ·çš„å°ç©å…·å“¦ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> post </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
            <tag> redux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¼€æºçš„ä¸­é—´ä»¶è°ƒåº¦</title>
      <link href="/2021/01/19/kai-yuan-de-zhong-jian-jian-diao-du/"/>
      <url>/2021/01/19/kai-yuan-de-zhong-jian-jian-diao-du/</url>
      
        <content type="html"><![CDATA[<p>å½“ä¸‹æµè¡Œçš„è½®å­åº“ï¼Œéƒ½ä¼šæä¾›å¼ºå¤§æ‹“å±•èƒ½åŠ›ã€‚</p><p>é€šå¸¸è¿™ç§æ‹“å±•èƒ½åŠ›ä»¥è°ƒåº¦ä¸­é—´ä»¶æˆ–è€…æ‹¦æˆªå™¨çš„å½¢å¼å­˜åœ¨ã€‚</p><p>ä¸ºäº†æ–¹ä¾¿ä¸‹é¢ç»Ÿç§°è¿™ç±»æ‹“å±•ç¨‹åºèƒ½åŠ›çš„ä»£ç å«åšä¸­é—´ä»¶ã€‚</p><p>å¦‚ä½•èƒ½å†™å‡ºä¸€ä¸ªæ‹“å±•æ€§å¼ºçš„è½®å­ï¼Ÿ</p><p>é€šè¿‡å­¦ä¹ å¼€æºåº“çš„ä»£ç æ¥å­¦ä¹ å¦‚ä½•å†™ä¸€ä¸ªç¬¦åˆè‡ªå·±è½®å­çš„ä¸­é—´ä»¶ã€‚</p><h2 id="æ ¸å¿ƒæ¦‚å¿µ">æ ¸å¿ƒæ¦‚å¿µ</h2><p>è®¡ç®—æœºçš„æœ¬è´¨å°±æ˜¯è¿›è¡Œæ•°æ®è¾“å…¥å’Œè¾“å‡ºï¼Œåƒç™¾å¹´æ¥è¿™ä¸ªæœ¬è´¨ä¸€ç›´æ²¡æœ‰å˜è¿‡ï¼Œé€šè¿‡ä¸­é—´å¯¹æ•°æ®çš„å¤„ç†ï¼Œè·å–åˆ°æƒ³è¦çš„æ•°æ®ç»“æœã€‚</p><p><img src="/imgs/%E6%95%B0%E6%8D%AE%E6%B5%81.png" alt="æ•°æ®è¾“å…¥ä¸è¾“å‡º"></p><p>æ¯”å¦‚ä¼ å…¥çš„æ•°æ®å¯èƒ½æ˜¯ <code>&#123;a:'hello'&#125;</code> é€šè¿‡ä¸­é—´ä»¶çš„å±‚å±‚ä½œç”¨ï¼Œå°±å¯èƒ½å˜æˆ <code>&#123;a:'h_e_l_l_o'&#125;</code></p><p>æˆ–è€…å¯¹äº<code>koa</code>çš„``context`æä¾›è®¿é—®æ•°æ®åº“çš„èƒ½åŠ›ã€‚</p><p>è¿™äº›éƒ½æ˜¯å¯¹ä¸­é—´è¿‡ç¨‹è¿›è¡Œäº†æ‹“å±•ï¼ŒæŒæ¡ä¸­é—´ä»¶çš„æ€ç»´æ–¹å¼èƒ½å¤Ÿè®©æˆ‘ä»¬çš„ç¨‹åºå¯æ‹“å±•æ€§æ›´å¼ºã€‚</p><p>ä¸‹é¢å°†ä»‹ç»ä»¥ä¸‹ä¸¤ç§ä¸­é—´ä»¶ã€‚</p><ul><li>ç›´æ¥å¯¹æ ¸å¿ƒå¯¹è±¡æˆ–è€…æ•°æ®è¿›è¡Œæ‹“å±•ã€‚</li><li>ä¸­é—´ä»¶å»æ§åˆ¶ä¸‹ä¸€ä¸ªä¸­é—´ä»¶çš„æ‰§è¡Œï¼ˆæ´‹è‘±æ¨¡å‹ï¼‰ã€‚</li></ul><h3 id="å¯¹äºæ ¸å¿ƒæ•°æ®æ‹“å±•">å¯¹äºæ ¸å¿ƒæ•°æ®æ‹“å±•</h3><h4 id="axios-æ‹¦æˆªå™¨è°ƒåº¦æœºåˆ¶">axios æ‹¦æˆªå™¨è°ƒåº¦æœºåˆ¶</h4><p>axios æ‹¦æˆªå™¨å°±æ˜¯å…¸å‹çš„ä¿®æ”¹æ•°æ®çš„ä¸­é—´ä»¶</p><p>å®ƒçš„æ‹¦æˆªå™¨å¯¹è¯·æ±‚å‰çš„æ•°æ®å’Œè¯·æ±‚åçš„æ•°æ®åˆ†åˆ«åšäº†å¤„ç†ã€‚</p><p>æ¥çœ‹çœ‹ä¸‹é¢çš„ä»£ç å§ã€‚</p><pre><code class="hljs"><span class="hljs-comment">// ä¸ºäº†æ–¹ä¾¿è®²è§£æ‘˜å–å…¶æ ¸å¿ƒé€»è¾‘</span><span class="hljs-comment">// å…·ä½“ä»£ç ä½ç½®</span><span class="hljs-comment">// https://github.com/axios/axios/blob/master/lib/core/Axios.js#L27</span><span class="hljs-keyword">function</span> <span class="hljs-title function_">request</span>(<span class="hljs-params">config</span>) &#123;  <span class="hljs-comment">// åˆå§‹åŒ–ä¸­é—´ä»¶ï¼ŒdispatchRequest å°±æ˜¯æŠŠ request -&gt; responseçš„è¿‡ç¨‹</span>  <span class="hljs-comment">// é€šè¿‡è°ƒç”¨ xhr æˆ–è€… node çš„http æŠŠè¯·æ±‚æ•°æ®å˜æ›´ä¸º response</span>  <span class="hljs-keyword">var</span> chain = [dispatchRequest, <span class="hljs-literal">undefined</span>];  <span class="hljs-keyword">var</span> promise = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(config);  <span class="hljs-comment">// æŠŠ request çš„æ‹¦æˆªå™¨ï¼Œæ’å…¥åˆ° chain é˜Ÿå¤´ï¼ŒæŠŠ response çš„æ‹¦æˆªå™¨æ’å…¥åˆ°é˜Ÿå°¾</span>  <span class="hljs-comment">// æœ€åç”Ÿæˆè¿™æ ·çš„æ•°ç»„ [requestInterceptor,...., dispatchRequest , .... responseInterceptor]</span>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span> <span class="hljs-title function_">unshiftRequestInterceptors</span>(<span class="hljs-params">    interceptor  </span>) &#123;    chain.<span class="hljs-title function_">unshift</span>(interceptor.<span class="hljs-property">fulfilled</span>, interceptor.<span class="hljs-property">rejected</span>);  &#125;);  <span class="hljs-variable language_">this</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span> <span class="hljs-title function_">pushResponseInterceptors</span>(<span class="hljs-params">    interceptor  </span>) &#123;    chain.<span class="hljs-title function_">push</span>(interceptor.<span class="hljs-property">fulfilled</span>, interceptor.<span class="hljs-property">rejected</span>);  &#125;);  <span class="hljs-comment">// ä» requestInterceptor æ‰§è¡Œåˆ° responseInterceptor</span>  <span class="hljs-keyword">while</span> (chain.<span class="hljs-property">length</span>) &#123;    promise = promise.<span class="hljs-title function_">then</span>(chain.<span class="hljs-title function_">shift</span>(), chain.<span class="hljs-title function_">shift</span>());  &#125;  <span class="hljs-keyword">return</span> promise;&#125;</code></pre><p>å›¾è§£æ‰§è¡Œæµç¨‹</p><p><img src="/imgs/axios%E6%8B%A6%E6%88%AA%E5%99%A8.png" alt="axios æ‹¦æˆªå™¨æ‰§è¡Œ"></p><p>å¯ä»¥çœ‹å‡º axios çš„ä¸­é—´ä»¶æœºåˆ¶ï¼Œæ˜¯é€šè¿‡å¤„ç† request config çš„æ•°æ®ï¼Œï¼ˆå¯ä»¥ä¿®æ”¹æ‰€æœ‰çš„è¯·æ±‚ç±»å‹ä¸º postï¼Œä¸ºæ‰€ä»¥çš„è¯·æ±‚æ·»åŠ è¯·æ±‚å‰ç¼€ï¼Œè¿˜å¯ä»¥æ ¹æ®è¯·æ±‚é…ç½®è®¾ç½®å…¨å±€ spinningï¼‰ä¿®æ”¹è¿”å›çš„ response æ•°æ® ï¼ˆå¯ä»¥å®Œæˆè¯·æ±‚çš„æ•°æ® mockï¼Œå˜æ›´å­—æ®µåç­‰ï¼‰å®Œæˆçš„ã€‚</p><p>å½“åˆ°ç”¨æˆ·æ‰‹ä¸­çš„æ—¶å€™ï¼Œç»å†å±‚å±‚ä¸­é—´ä»¶å¯¹æ•°æ®çš„å¤„ç†ã€‚</p><p>æˆ‘ä»¬å†æ¥çœ‹çœ‹ä¸‹ä¸€ä¸ªé’ˆå¯¹æ•°æ®è¿›è¡Œæ‹“å±•çš„å¼€æºåº“ã€‚</p><h4 id="markdown-it-çš„ä¸­é—´ä»¶è°ƒåº¦æœºåˆ¶">markdown-it çš„ä¸­é—´ä»¶è°ƒåº¦æœºåˆ¶</h4><p>markdown-it çš„ä¸­é—´ä»¶ç›¸å¯¹äº axios ä¸é‚£ä¹ˆç›¸åŒï¼Œå®ƒå…·å¤‡è®¤é¢†æœºåˆ¶ï¼Œå¦‚æœå½“å‰ä¸­é—´ä»¶å¯¹æ•°æ®è¿›è¡Œè®¤é¢†å°±ä»£è¡¨å½“ä¸‹çš„æ•°æ®å½’è¿™ä¸ªä¸­é—´ä»¶è¿›è¡Œå¤„ç†ï¼Œè¿›è€Œè·³è¿‡å…¶ä»–ä¸­é—´ä»¶çš„å¤„ç†ã€‚ç›¸åŒç‚¹æ˜¯æŠŠæ‰€æœ‰çš„ä¸­é—´ä»¶æ³¨å†Œä¸€ä¸ªæ•°ç»„ä¸­ã€‚</p><p>æˆ‘ä»¬äº†è§£ markdown-it çš„ä¸­é—´ä»¶ï¼Œæˆ‘ä»¬æ— éœ€è¯¦ç»†äº†è§£ markdown-it çš„ token æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“ token ä¼šæ¸²æŸ“æˆä¸åŒçš„ html æ ‡ç­¾å°±å¯ä»¥ã€‚</p><p>markdown-it å¯¹æ–‡æœ¬è¿›è¡Œ è¡Œ å¤„ç†ï¼Œå¯¹æ¯è¡Œæ–‡æœ¬éƒ½ä¼šå¯¹ä¸­é—´ä»¶æ•°ç»„è¿›è¡Œéå†ï¼Œæ¯”å¦‚ é‡è§ <code>## </code> ä¼šè¢« heading ä¸­é—´ä»¶è¿›è¡Œå¤„ç†ï¼Œç„¶å heading å¯¹è¿™ä¸ª<code>#</code>è¿›è¡Œè®¤é¢†ï¼Œå¹¶è¿”å› <code>true</code> ï¼Œå…¶ä»–æ•°ç»„å°±ä¸ä¼šå¤„ç†è¿™è¡Œæ–‡å­—äº†ã€‚</p><p><img src="/imgs/markdown-it%E6%8B%93%E5%B1%95.png" alt="markdown-it ä¸­é—´ä»¶"></p><pre><code class="hljs"><span class="hljs-comment">//https://github.com/markdown-it/markdown-it/blob/master/lib/parser_block.js#L48</span><span class="hljs-comment">// Generate tokens for input range</span><span class="hljs-title class_">ParserBlock</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">tokenize</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">state, startLine, endLine</span>) &#123; <span class="hljs-keyword">var</span> ok, i,     rules = <span class="hljs-variable language_">this</span>.<span class="hljs-property">ruler</span>.<span class="hljs-title function_">getRules</span>(<span class="hljs-string">&#x27;&#x27;</span>),     len = rules.<span class="hljs-property">length</span>,     line = startLine, <span class="hljs-keyword">while</span> (line &lt; endLine) &#123;   <span class="hljs-keyword">if</span> (line &gt;= endLine) &#123; <span class="hljs-keyword">break</span>; &#125;   <span class="hljs-comment">// æ¯è¡Œéƒ½ä¼šé‡å¤éå†æ‰€æœ‰è§„åˆ™ï¼Œå¦‚æœè§„åˆ™è®¤é¢†ï¼Œå°±ä¼šè·³è¿‡å…¶ä»–è§„åˆ™å¤„ç†ã€‚</span>   <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; len; i++) &#123;     ok = rules[i](state, line, endLine, <span class="hljs-literal">false</span>);     <span class="hljs-comment">// å½“è§„åˆ™è¿”å›trueçš„æ—¶å€™ï¼Œä¼šè·³è¿‡å…¶ä»–è§„åˆ™</span>     <span class="hljs-keyword">if</span> (ok) &#123; <span class="hljs-keyword">break</span>; &#125;   &#125;   <span class="hljs-comment">// å¯¹lineæ“ä½œä¸å½“å¯èƒ½ä¼šå¯¼è‡´æ­»å¾ªç¯ã€‚</span>   line = state.<span class="hljs-property">line</span>; &#125;&#125;;</code></pre><p>é€šè¿‡ä¸Šé¢çš„å±•ç¤ºå¯ä»¥çœ‹å‡ºæˆ‘ä»¬å¯¹äºæ•°æ®çš„æ‹“å±•ï¼Œéƒ½æ˜¯ä¼ å…¥æ ¸å¿ƒæ•°æ®ï¼Œå¯¹æ ¸å¿ƒæ•°æ®è¿›è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œã€‚</p><p>è¿™ç§ä¸»è¦é’ˆå¯¹æ•°æ®åšå¤„ç†çš„æ–¹å¼å¯ä»¥åº”ç”¨åœ¨ï¼šè¯·æ±‚åº“ã€æ–‡æœ¬å¤„ç†åº“ï¼ˆç¼–è¯‘æ¨¡æ¿çš„æ’ä»¶ï¼‰ï¼Œå›¾ç‰‡å¤„ç†åº“ï¼ˆå¯ä»¥å¯¹å›¾ç‰‡ä¸Šä¼ å‰æ–‡ä»¶ä¿¡æ¯æ°´å°å¤„ç†ç­‰åé‡äºæ•°æ®å¤„ç†çš„è½®å­ä¸Šã€‚</p><h3 id="ä¸­é—´ä»¶å®æˆ˜">ä¸­é—´ä»¶å®æˆ˜</h3><p>äº†è§£äº†è¿™äº›æˆ‘ä»¬å¯ä»¥ç”¨ä¸€è¡Œä»£ç å†™å‡ºæˆ‘ä»¬è‡ªå·±çš„ä¸­é—´ä»¶æ‹“å±•ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬çŸ¥é“æˆ‘ä»¬çš„è¾“å…¥æ˜¯ä¸€ä¸ªæ•°æ®ï¼Œä¸­é—´ç»è¿‡å±‚å±‚è¿‡æ»¤ï¼Œä¸‹ä¸€ä¸ªä¸­é—´ä»¶çš„è¾“å…¥æ˜¯ä¸Šä¸€ä¸ªä¸­é—´ä»¶çš„è¾“å‡ºã€‚</p><p>js ä¸­çš„ reduce æ˜¯ä¸€ä¸ªä¼šæ¥å—å‰é¢è¾“å…¥äº§ç”Ÿæ–°çš„è¾“å‡ºçš„å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒåšä¸­é—´ä»¶è°ƒåº¦çš„è½½ä½“ï¼Œè®¾ç½®åˆå§‹æ•°æ®ï¼Œéå†æ¯ä¸ªä¸­é—´ä»¶å¯¹æ•°æ®è¿›è¡Œå¤„ç†ã€‚</p><p>æœ‰äº†è¿™ä¸ªæ€è·¯ä¹‹åä»£ç å°±æµ®ç°åœ¨è„‘å­é‡Œäº†ã€‚å¤§å®¶æ¥çœ‹ã€‚</p><pre><code class="hljs"><span class="hljs-keyword">const</span> middleware = [<span class="hljs-function"><span class="hljs-params">v</span>=&gt;</span>v+<span class="hljs-number">1</span>,<span class="hljs-function"><span class="hljs-params">v</span>=&gt;</span>v+<span class="hljs-number">2</span>,<span class="hljs-function"><span class="hljs-params">v</span>=&gt;</span>(&#123;<span class="hljs-attr">message</span>:<span class="hljs-string">`v çš„å€¼æ˜¯ <span class="hljs-subst">$&#123;v&#125;</span>)`</span>&#125;)]<span class="hljs-keyword">const</span> result = middleware.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">res,fn</span>)=&gt;</span><span class="hljs-title function_">fn</span>(res),<span class="hljs-number">0</span>);<span class="hljs-comment">// output</span><span class="hljs-comment">// &#123;message: &quot;v çš„å€¼æ˜¯ 3&quot;&#125;</span></code></pre><p>é€šè¿‡ reduce æˆ‘ä»¬å¿«é€Ÿçš„å®ç°äº†å¯¹äºæ•°æ®å¤„ç†äº†ä¸­é—´ä»¶æ‹“å±•åŠŸèƒ½ï¼Œå…¶æ ¸å¿ƒæ€æƒ³å°±æ˜¯<strong>ä¸­é—´ä»¶å¯¹å±‚å±‚æ•°æ®è¿›è¡Œæ“ä½œï¼Œæœ€åè¾“å‡ºæƒ³è¦çš„ç»“æœã€‚</strong></p><h2 id="ä¸­é—´ä»¶å»æ§åˆ¶ä¸‹ä¸€ä¸ªä¸­é—´ä»¶çš„æ‰§è¡Œ">ä¸­é—´ä»¶å»æ§åˆ¶ä¸‹ä¸€ä¸ªä¸­é—´ä»¶çš„æ‰§è¡Œ</h2><p>è¿™ç§ä¸­é—´ä»¶é€šè¿‡è°ƒç”¨ä¸‹ä¸€ä¸ªä¸­é—´ä»¶è¿›è¡Œæ‹“å±•ï¼Œæ˜¯å¦æ”¾è¿‡å½“å‰è¯·æ±‚åˆ°ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼Œå–å†³äºå½“å‰çš„ä¸­é—´ä»¶æ˜¯å¦é€šè¿‡ next æ–¹æ³•è°ƒç”¨ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ã€‚</p><p>koa å°±æ˜¯è¿™æ ·å®ç°å…¶ä¸­é—´ä»¶çš„ï¼Œå¯¹äº node çš„ http è¿›è¡Œæ‹“å±•ï¼Œå¯¹å…¨å±€å¯¹è±¡ context è¿›è¡Œæ‹“å±•ï¼ŒæŒ‚è½½å…¶ä»–å¸¸ç”¨å¯¹è±¡ï¼ˆrequestï¼Œresponseï¼‰åˆ°å…¨å±€å¯¹è±¡ä¸Šï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼æŠŠæ—¥å¿—å¯¹è±¡å’Œæ•°æ®åº“å¯¹è±¡æŒ‚è½½åˆ°å…¨å±€å¯¹è±¡ä¸­è¿›è¡Œå¯¹ koa åŠŸèƒ½çš„æ‹“å±•ã€‚</p><h3 id="koa-ä¸­é—´ä»¶çš„è°ƒåº¦æœºåˆ¶">koa ä¸­é—´ä»¶çš„è°ƒåº¦æœºåˆ¶</h3><p>é‚£ä¹ˆä»–æ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Ÿ</p><p><img src="/imgs/koa%E6%89%A7%E8%A1%8C.png" alt="koaä¸­é—´ä»¶è°ƒåº¦"></p><p>ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°åªæœ‰è°ƒç”¨ next æ‰ä¼šè°ƒç”¨ä¸‹ä¸€ä¸ªä¸­é—´ä»¶å¯¹æ•°æ®è¿›è¡Œå¤„ç†ï¼Œå¦‚æœä¸è°ƒç”¨é‚£ä¹ˆå°±ä¸ä¼šè¯·æ±‚ä¸‹ä¸€ä¸ªä¸­é—´ä»¶çš„æ‰§è¡Œã€‚</p><p>ä½†æ˜¯è¿™ç§æ–¹å¼ä¹Ÿæ˜¯å­˜åœ¨ç¼ºç‚¹çš„ï¼Œå› ä¸ºè¿™æ ·å¥—å¨ƒçš„æ–¹å¼è°ƒç”¨ï¼Œä¼šå½±å“åƒåœ¾å›æ”¶ï¼Œå› ä¸ºä¸‹ä¸€ä¸ª<code>next</code>ä¸æ‰§è¡Œå®Œæ¯•å°±ä¸ä¼šé‡Šæ”¾<code>next()</code> ä¹‹å‰çš„ä»£ç </p><p>æœ€åæ¥çœ‹å®ƒçš„ä»£ç å§</p><pre><code class="hljs"><span class="hljs-comment">// https://github.com/koajs/compose/blob/master/index.js#L19</span><span class="hljs-comment">// é¦–å…ˆä¼ å…¥ä¸­é—´ä»¶æ•°ç»„ [middleware...]</span><span class="hljs-keyword">function</span> <span class="hljs-title function_">compose</span>(<span class="hljs-params">middleware</span>) &#123;  <span class="hljs-comment">// è¿”å›ä¸€ä¸ªæ–°çš„æ–¹æ³•ï¼Œè°ƒç”¨è¿™ä¸ªæ–¹æ³•å°±ä¼šæ‰§è¡Œæ‰€æœ‰ä¸­é—´ä»¶ã€‚</span>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">context, next</span>) &#123;    <span class="hljs-comment">// last called middleware #</span>    <span class="hljs-keyword">let</span> index = -<span class="hljs-number">1</span>;    <span class="hljs-keyword">return</span> <span class="hljs-title function_">dispatch</span>(<span class="hljs-number">0</span>);    <span class="hljs-keyword">function</span> <span class="hljs-title function_">dispatch</span>(<span class="hljs-params">i</span>) &#123;      <span class="hljs-comment">// å¦‚æœä¸€ä¸ªä¸­é—´ä»¶å†…è°ƒç”¨ next å¤šæ¬¡å°±ä¼šå¯¼è‡´å¤šæ¬¡ i+1</span>      <span class="hljs-keyword">if</span> (i &lt;= index)        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;next() called multiple times&quot;</span>));      index = i;      <span class="hljs-comment">// å½“å‰ä¸­é—´ä»¶</span>      <span class="hljs-keyword">let</span> fn = middleware[i];      <span class="hljs-comment">// å¦‚æœæ˜¯ä¸­é—´ä»¶éå†åˆ°äº†æœ€åä¸€ä¸ª</span>      <span class="hljs-keyword">if</span> (i === middleware.<span class="hljs-property">length</span>) fn = next;      <span class="hljs-comment">// æœ€åçš„next</span>      <span class="hljs-keyword">if</span> (!fn) <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>();      <span class="hljs-keyword">try</span> &#123;        <span class="hljs-comment">// è°ƒç”¨å½“å‰ä¸­é—´ä»¶ï¼Œå¹¶ä¼ å…¥contextå’Œä¸‹ä¸€ä¸ªä¸­é—´ä»¶</span>        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-title function_">fn</span>(context, dispatch.<span class="hljs-title function_">bind</span>(<span class="hljs-literal">null</span>, i + <span class="hljs-number">1</span>)));      &#125; <span class="hljs-keyword">catch</span> (err) &#123;        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(err);      &#125;    &#125;  &#125;;&#125;<span class="hljs-comment">// ä½¿ç”¨</span><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) &#123;  <span class="hljs-keyword">const</span> middleware = [    <span class="hljs-function">(<span class="hljs-params">c, n</span>) =&gt;</span> &#123;      c.<span class="hljs-property">v</span> += <span class="hljs-number">1</span>;      <span class="hljs-keyword">return</span> <span class="hljs-title function_">n</span>();    &#125;,    <span class="hljs-function">(<span class="hljs-params">c, n</span>) =&gt;</span> &#123;      c.<span class="hljs-property">v</span> += <span class="hljs-number">2</span>;      <span class="hljs-keyword">return</span> <span class="hljs-title function_">n</span>();    &#125;,    <span class="hljs-function">(<span class="hljs-params">c, n</span>) =&gt;</span> &#123;      <span class="hljs-keyword">return</span> &#123; <span class="hljs-attr">message</span>: <span class="hljs-string">`v çš„å€¼æ˜¯ <span class="hljs-subst">$&#123;c.v&#125;</span>`</span> &#125;;    &#125;,  ];  <span class="hljs-keyword">const</span> start = <span class="hljs-title function_">compose</span>(middleware);  <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">start</span>(&#123; <span class="hljs-attr">v</span>: <span class="hljs-number">0</span> &#125;);  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result);&#125;<span class="hljs-title function_">demo</span>();</code></pre><p>ä¸Šé¢å°±æ˜¯ç°åœ¨æµè¡Œçš„ä¸‰ä¸ªå¼€æºåº“å¯¹äºä¸­é—´ä»¶çš„å†™æ³•å–½ï¼Œä½ å­¦ä¼šäº†å—ï¼Ÿ</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> æ¶æ„è®¾è®¡ </category>
          
          <category> post </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€ç§æ–°çš„ç¼–å†™cssæ€ç»´</title>
      <link href="/2021/01/09/yi-chong-xin-de-bian-xie-css-si-wei/"/>
      <url>/2021/01/09/yi-chong-xin-de-bian-xie-css-si-wei/</url>
      
        <content type="html"><![CDATA[<p>æ¯ä¸ªå‰ç«¯å¼€å‘è€…éƒ½ç»å¸¸æ ¹æ®ä¸šåŠ¡çš„è¿›è¡Œå†™ç€å¤§é‡é‡å¤çš„ css æ ·å¼ï¼Œå†™æ—¶ä¸€æ—¶çˆ½ï¼Œç»´æŠ¤ç«è‘¬åœºã€‚</p><p>éšç€ä¸šåŠ¡çš„å‘å±•ï¼Œcss ä»£ç ä¼šå˜å¾—è¶Šæ¥è¶Šå¤šè¶Šæ¥è¶Šéš¾ä»¥ç»´æŠ¤ã€‚</p><p>ç»å¸¸ä¼šå‡ºç° important å¼ºè¡Œæ”¹å˜ css çš„æ ·å¼ï¼Œè¿™æ ·åšçš„å”¯ä¸€å¥½å¤„å°±æ˜¯èƒ½å¤Ÿç¬¦åˆå½“å‰ä¸šåŠ¡éœ€æ±‚ï¼Œä½†æ˜¯è‡ªå·±æŒ–çš„å‘ï¼Œå¯èƒ½æ˜¯åˆ«äººå“­çˆ¹éª‚å¨˜è·ªç€å¡«ä¸Šçš„ï¼Œè€Œè¿™ä¸€åˆ‡ä»…ä»…æ˜¯å› ä¸ºå¤§é‡é‡å¤çš„åƒåœ¾ä»£ç ã€‚</p><h2 id="css-é­”æ³•æ•°å­—">css é­”æ³•æ•°å­—</h2><p>åœ¨ä»£ç é‡æ„ä¸­æœ‰ä¸€ç‚¹å°±æ˜¯å‡å°‘ä½ ä»£ç ä¸­çš„é­”æ³•æ•°å­—ã€‚</p><p>æˆ‘ä»¬åœ¨å†™ css çš„æ—¶å€™ç»å¸¸ä¼šå†™</p><pre><code class="hljs"><span class="hljs-selector-tag">body</span> &#123;  <span class="hljs-comment">/** ç»å¸¸ä½¿ç”¨#fffçš„äººä¼šçŸ¥é“è¿™æ˜¯ç™½è‰²ï¼Œ     ** é‚£ä¹ˆæ¢ä¸ªé¢œè‰²å‘¢ #A855F7      ** è¿™ä¸ªæ˜¯ç´«è‰²      **/</span>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;  <span class="hljs-comment">/** åˆæˆ–è€…è¿™ç§4pxï¼Œ4px åˆ°åº•ä»£è¡¨ä»€ä¹ˆï¼Œæˆ‘éœ€è¦å…¨å±€æœç´¢æ”¹å˜æ‰€æœ‰çš„4pxå—     **/</span>  <span class="hljs-attribute">border</span>-raduis: <span class="hljs-number">4px</span>;&#125;</code></pre><p>è¿™æ ·çš„ä»£ç æˆ‘ä»¬ä¸€éåˆä¸€éåœ° <code>style</code> æ ‡ç­¾é‡Œé¢ä¹¦å†™ï¼Œå¢å¤§æˆ‘ä»¬ css æ–‡ä»¶çš„ä½“ç§¯ã€‚</p><h2 id="css-æ¡†æ¶">css æ¡†æ¶</h2><p>å‰ç«¯ css æ¡†æ¶æœ‰å¾ˆå¤šï¼Œä»¥æ¯”è¾ƒæµè¡Œçš„<strong>Bootstrap</strong>æ¥ä¸¾ä¾‹ã€‚</p><p>Bootstrap æä¾›äº† å¸ƒå±€ã€ç»„ä»¶ã€å·¥å…·æ ·å¼ç±»ï¼Œä»–ä»¬ç”¨æ¥æ­å»º Bootstrap é£æ ¼çš„ç½‘ç«™å¾ˆå¥½ç”¨ï¼Œä½†æ˜¯å¦‚æœå®šåˆ¶åŒ–çš„æ—¶å€™ï¼Œä»–ä»¬å¤ªé‡äº†ï¼Œä¸€åˆ‡å˜å¾—ä¸é‚£ä¹ˆçµæ´»ã€‚</p><p>å½“æˆ‘ä»¬è¦å®šåˆ¶ä¸€ä¸ªè‡ªå·±é£æ ¼çš„æ ·å¼çš„æ—¶å€™éœ€è¦åšå¤§é‡çš„æ ·å¼é˜…è¯»ï¼Œä»¥é˜²ä¸å°å¿ƒå½±å“å…¶ä»–ç»„ä»¶ï¼Œæå…¶éš¾ä»¥ç»´æŠ¤ã€‚</p><p>è¿™ä¸€åˆ‡æ¥è‡ªäº css ä»£ç çš„å‰¯ä½œç”¨ï¼ˆå„ç§ css æƒé‡ä¹‹é—´çš„å½±å“)</p><p>æ˜¯æ—¶å€™åœ¨çµæ´»æ€§å’Œå¿«é€Ÿä½¿ç”¨ä¹‹é—´åšæŠ‰æ‹©äº†ã€‚</p><p>å¦‚æœä½ å–œæ¬¢å¼€ç®±å³ç”¨ï¼Œå½“å‰ä¸€å®šä½¿ç”¨äº†ä¸€ä¸ªç»„ä»¶åº“ï¼Œå¦‚æœä½ æƒ³ä»å¤´æ­å»ºä¸€å¥—é«˜å¯ç”¨å¹¶ä¸”å®¹æ˜“ç»´æŠ¤çš„ç»„ä»¶åº“æˆ–è€…ç½‘ç«™ï¼Œé‚£ä¹ˆåº”è¯¥å°è¯•ä¸€ä¸‹ tailwindcss äº†ã€‚</p><h3 id="tailwindcss">tailwindcss</h3><blockquote><p>ç”¨ç»„åˆçš„æ–¹å¼å»ç¼–è¾‘ä½ çš„æ ·å¼ä»£ç </p></blockquote><p><strong>tailwindcss</strong> æä¾›äº†å„ç§æ ·å¼çš„å·¥å…·ç±»ï¼Œä»å¸ƒå±€ï¼Œé—´è·ï¼Œå¤§å°ï¼Œæ–‡å­—ï¼Œé¢œè‰²æ¯ä¸ªéƒ½æä¾›äº†å·¥å…·ç±»ã€‚</p><p>æœ‰äº†è¿™äº›å·¥å…·ç±»ï¼Œæˆ‘ä»¬å¯ä»¥å°½æƒ…åœ°ç»„åˆæ ·å¼ã€‚</p><h4 id="ç»„ä»¶åŒ–å¼€å‘">ç»„ä»¶åŒ–å¼€å‘</h4><p>æ­£å¦‚å‰ç«¯çš„å‘å±•ï¼Œæ¯ä¸€ä¸ªå‰ç«¯æ¡†æ¶éƒ½æä¾›ç€ç»„ä»¶åŒ–çš„å¼€å‘æ¨¡å¼ï¼Œä¸æå€¡ç»„ä»¶é—´ç»§æ‰¿ï¼Œè€Œæ˜¯é€šè¿‡ç»„åˆçš„æ–¹å¼å»å¼€å‘ç»´æŠ¤ç»„ä»¶ã€‚</p><p>é‚£ä¹ˆ html çš„æ ·å¼ä¹Ÿåº”è¯¥å¦‚æ­¤ï¼Œæ¢ç§æ–¹å¼å»ç¼–å†™ä½ çš„ä»£ç å§ã€‚</p><pre><code class="hljs">// æ­£å¸¸ä»£ç <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;card&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"><span class="hljs-selector-class">.card</span> &#123;    <span class="hljs-attribute">border</span>-radiux: <span class="hljs-number">0.25rem</span>;    <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">#0000</span>, <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">#0000</span>, <span class="hljs-number">0</span> <span class="hljs-number">1px</span> <span class="hljs-number">3px</span> <span class="hljs-number">0</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>), <span class="hljs-number">0</span> <span class="hljs-number">1px</span> <span class="hljs-number">2px</span> <span class="hljs-number">0</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.06</span>);&#125;</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></code></pre><pre><code class="hljs"><span class="hljs-comment">// tailwindcss</span>&lt;div <span class="hljs-keyword">class</span>=&quot;<span class="hljs-symbol">rounded</span> <span class="hljs-symbol">shadow</span>&quot;&gt;&lt;/<span class="hljs-symbol">div</span>&gt;</code></pre><p>ä¸¤ä»½ä»£ç åŒæ ·å®ç°äº†ä¸€ä¸ªè¿™æ ·çš„å¡ç‰‡ï¼Œç¬¬ä¸€ç§å†™æ³•å¦‚æœæˆ‘è¦ä¿®æ”¹åœ†è§’æˆ‘ä¼šå¢åŠ æˆ–è€…å‡å°‘ rem çš„å€¼ï¼Œä½†æ˜¯ä¸‹é¢çš„å†™æ³•æˆ‘åªéœ€ä¿®æ”¹ä¸€ä¸ªæ›´åŠ è¯­ä¹‰åŒ–çš„ç±»åå³å¯ã€‚</p><p><img src="/imgs/card.png" alt="å­—ä½“çš„æŸ¥æ‰¾"></p><p>å†ä¹Ÿä¸ç”¨æƒ³å¦‚ä½•å®šä¹‰æˆ‘çš„ç±»åäº†<code>card-title</code> <code>card-head-title</code> <code>card-body-content</code>ï¼Œåªè¦å®šä¹‰å¥½æˆ‘çš„ç»„ä»¶åå°±å¯ä»¥åœ¨ react ä¸­,é…åˆ classnames æ›´æ˜¯èƒ½è®©å¤–å±‚ç›´æ¥é€šè¿‡ç±»å»æ”¹å˜ç»„ä»¶æ ·å¼ï¼Œæ‹“å±•æ€§å˜å¾—æ›´å¼ºå¤§ï¼Œæ›´åŠ çµæ´»ã€‚</p><h2 id="æ€»ç»“">æ€»ç»“</h2><p>tailwindcss æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ css å·¥å…·ç±»åº“ï¼Œèƒ½å¤Ÿè®©æˆ‘ä»¬ç¼–å†™æ›´åŠ çµæ´»çš„ï¼Œæ˜“äºå¤ç”¨çš„æ ·å¼ä»£ç ï¼Œä¼˜åŒ–æ— ç”¨æ ·å¼ï¼Œå‡å°‘ css æ–‡ä»¶ä½“ç§¯ï¼Œæ–¹ä¾¿æ‹“å±•ã€‚</p><p>å½“ç„¶ä»»ä½•äº‹ç‰©éƒ½æœ‰å¥½çš„å’Œåçš„ä¸€é¢ï¼Œtailwindcss ä¸å¥½çš„ç‚¹åœ¨äºï¼Œè™½ç„¶ css æ–‡ä»¶ä½“ç§¯ç¼©å°ï¼Œä½†æ˜¯ html ä¸­å­˜åœ¨å¤§é‡çš„ç±»åï¼Œè€Œä¸”å„ç§ç¼©å†™éœ€è¦ä¸€å®šæ—¶é—´ç†Ÿæ‚‰ã€‚</p><p>ä»€ä¹ˆæ—¶å€™åº”è¯¥ç”¨ tailwindcss å‘¢ï¼Ÿ å¦‚æœä½ åŒçƒ¦äº†æ— æ—¶æ— åˆ»é‡å¤ç¼–å†™ css ä»£ç ï¼Œå¦‚æœä½ æƒ³è¦è‡ªå·±çš„ç½‘ç«™æˆ–è€…ç»„ä»¶æ›´åŠ çµæ´»ï¼Œtailwindcss å€¼å¾—ä¸€è¯•ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> post </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tailwindcss </tag>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2020å¹´ï¼Œæˆ‘å¯¹äººç”Ÿçš„æ„Ÿæ‚Ÿ</title>
      <link href="/2021/01/01/2020-zong-jie/"/>
      <url>/2021/01/01/2020-zong-jie/</url>
      
        <content type="html"><![CDATA[<h2 id="2020å¹´çš„ä¸å¹³å‡¡">2020å¹´çš„ä¸å¹³å‡¡</h2><h3 id="é”™è¿‡äº†å›å®¶é‚£è¶Ÿç«è½¦">é”™è¿‡äº†å›å®¶é‚£è¶Ÿç«è½¦</h3><p>2020å¹´ä»2019å¹´çš„æ˜¥èŠ‚å¼€å§‹ï¼Œå°±ä¼¼ä¹æ³¨å®šä¸é‚£ä¹ˆå¹³å‡¡ã€‚</p><p>æˆ‘é”™è¿‡äº†å›å®¶çš„ç«è½¦ï¼Œé‚£æ—¶å€™ç–«æƒ…åˆç°ï¼Œäº‹æƒ…çš„ä¸€åˆ‡ä»¿ä½›ä¸æ˜¯é‚£ä¹ˆæ¸…æ™°ã€‚</p><p>æˆ‘åœ¨åšå¥½ä¸¥å¯†çš„ä¿æŠ¤å·¥ä½œä¸‹ï¼Œæ‹¿ç€æˆ‘çš„è¡Œæç®±ï¼Œä¼´éšç€è¡Œæç®±æ‘©æ“¦åœ°é¢çš„ä½å¼å£°ï¼Œå»å¾€ç«è½¦ç«™ã€‚</p><p>æ­£å½“æˆ‘ååœ°é“åˆ°ç«è½¦ç«™è¡Œç¨‹çš„ä¸€åŠçš„æ—¶å€™ï¼Œçœ‹ç€åœ°é“çš„åˆ°ç«™ç¯ï¼Œå¶ç„¶é—´æˆ‘åˆé‡æ–°çœ‹äº†ä»¥ä¸‹æˆ‘çš„ç«è½¦ä¿¡æ¯ï¼Œæˆ‘å‘ç°æˆ‘çš„å·²ç»é”™è¿‡æˆ‘çš„ç«è½¦ä¸€æ•´å¤©ã€‚</p><p>åœ¨è¿™ä¹‹å‰æˆ‘æ˜¯å¤šä¹ˆç†æƒ³åŒ–çš„æƒ³ç€æˆ‘å›å®¶çš„æ—…ç¨‹å¤šä¹ˆé¡ºåˆ©ï¼Œä½†ç°å®çš„å›å®¶çš„è¿‡ç¨‹å¥½åƒã€Šäººåœ¨å›§é€”ã€‹ã€‚</p><p>å…ˆæ˜¯é€šè¿‡qqæœç¾¤æ‰¾åˆ°äº†å›å®¶çš„æ‹¼è½¦ç¾¤ï¼Œé‚£æ—¶å€™å¿ƒæ…Œæ‰‹é¢¤ï¼Œç„¶åæ‹¼è½¦ç¾¤çš„å¤§å“¥è¿˜å¿½æ‚ æˆ‘åˆ°äº†æ‹¼è½¦åœ°ç‚¹å°±èƒ½å‡ºå‘ï¼Œç­‰æˆ‘åˆ°äº†å´é‚£é‡ŒåŸæ¥ä¸€è½¦äººè¿˜æ²¡å‡‘é½ã€‚</p><p>å‹‰å‹‰å¼ºå¼ºå¤©å¿«é»‘çš„æ—¶å€™åº”è¯¥æ˜¯4-5ç‚¹ï¼Œäººç»ˆäºå‡‘é½äº†ï¼Œæˆ‘ä¹Ÿåœ¨å¯’å†·çš„è¡—å¤´ç«™äº†å¤§åŠå¤©ï¼Œèº«ä¸Šå†·çš„ä¸è¡Œï¼Œä¹Ÿè®¸è¿™æ˜¯å¯¹æˆ‘é©¬è™çš„æƒ©ç½šå§ã€‚</p><p><strong>äººç”Ÿå°±æ˜¯è¿™æ ·ï¼Œæ²¡ä»€ä¹ˆæ˜¯é¢„æ–™ä¹‹ä¸­ï¼Œå……æ»¡æ— å°½æˆ–å¥½æˆ–å</strong></p><p>å’Œä¸€è½¦å¥‡å¥‡æ€ªæ€ªçš„äººæŒ¤åœ¨ä¸€èµ·ï¼Œä¸€ä¸ªçœ‹èµ·æ¥å¾ˆç¤¾ä¼šç©¿è²‚çš„å…»çŒ«ç”·ï¼Œä¸€å®¶å­æ¥äº¬çœ‹ç—…çš„ï¼Œè¿˜æœ‰ä¸€ä¸ªå¸æœºçš„æœ‹å‹ï¼Œè½¦å­å¾ˆæŒ¤ï¼ŒæŒ¤å¾—äººåŠ¨å¼¹ä¸å¾—ï¼Œå°±è¿™æ ·æˆ‘æŒ¤äº†4ä¸ªå¤šå°æ—¶ï¼Œåˆ°äº†æ™šä¸Šæ‰åˆ°äº†å®¶ï¼Œæˆ‘è®°å¾—é‚£ä¸€æ™šï¼Œç©ºæ°”å¾ˆå†·ï¼Œæœ‰é›¾ã€‚</p><p>æ›¾ä»¥ä¸ºè¿™ç§ä¹Œé¾™äº‹ä»¶ä¼šç¦»æˆ‘å¾ˆè¿œï¼Œå› ä¸ºæˆ‘å‰äº›å¤©è¿˜å˜²ç¬‘æœ‹å‹æŠ¢åˆ°çš„ç«è½¦ç¥¨æ˜¯ç›¸åæ–¹å‘çš„ï¼Œä»Šæ—¥æˆ‘å°±å®Œç¾é”™è¿‡äº†æˆ‘çš„ç«è½¦ã€‚</p><p><strong>é‚£äº›çœ‹ä¼¼ç¦»ä½ å¾ˆè¿œçš„äº‹æƒ…ï¼Œæœ‰æ—¶å€™ä¼šçªç„¶æ¥åˆ°ä½ çš„èº«è¾¹ï¼Œè¿™æ“è›‹çš„å‘½è¿å•Š</strong></p><h3 id="éš”ç¦»çš„é»‘æš—">éš”ç¦»çš„é»‘æš—</h3><p>ç–«æƒ…æœŸé—´çš„å°æ’æ›²<strong>éš”ç¦»</strong>ï¼Œå›äº¬æˆ‘è¢«éš”ç¦»äº†ï¼Œ14å¤©é‡Œæˆ‘æ²¡å‡ºè¿‡æˆ‘çš„å±‹å­ï¼Œæˆ‘é—®å…¬å¯“å‰å°æˆ‘åƒé¥­æ€ä¹ˆåŠå•Šï¼Œå¥¹è¯´è®©æˆ‘æœ‹å‹ç»™æˆ‘ä¹°å¥½äº†ã€‚</p><p>æ‰€ä»¥æˆ‘åƒçš„ä¸œè¥¿éƒ½æ˜¯æœ‹å‹ä»è¶…å¸‚ç»™æˆ‘ä¹°çš„é›¶é£Ÿï¼Œè¿™14å¤©å¤§æ¦‚æ˜¯æˆ‘æœ€é»‘æš—çš„æ—¶å…‰äº†ã€‚</p><p>åæ¥æˆ‘å‘ç°åˆ«äººéƒ½å¯ä»¥å®šå¤–å–ï¼Œé‚£ä¸ªå‰å°åªæ˜¯çŸ¥é“æˆ‘æœ‰ä¸ªæœ‹å‹åœ¨è¿™é‡Œä½ï¼Œæ‰€ä»¥ä¸è®©æˆ‘å®šå¤–å–ï¼Œè¿™æ ·å¥¹å°±ä¸ç”¨æ¥è§¦æˆ‘äº†ï¼Œè®©æˆ‘æœ‹å‹æ‰¿æ‹…è¿™ä¸ªå±é™©çš„è´£ä»»ï¼Œä¸–é—´é™©æ¶å•Šã€‚</p><p>æˆ¿å­é‡Œé¢æœ‰çª—æˆ·ï¼Œä½†æ˜¯åªèƒ½æ‰“å¼€ä¸€æ¡ç¼éš™ï¼Œæ¯å¤©çš„å…‰æºä»…ä»…æ˜¯å‡ ä¸ªä½åº¦æ•°çš„ledç¯ã€‚é‚£æ—¶å€™ä¸€æ•´å¤©éƒ½è§‰å¾—å¤–é¢æ˜¯é»‘è‰²çš„ï¼Œå±‹é‡Œæ˜¯é»‘è‰²çš„ï¼Œå¿ƒé‡Œä¹Ÿæ˜¯ã€‚</p><p>æˆ‘è§‰å¾—é‚£æ®µæœŸé—´æˆ‘ç‰¹åˆ«æ€•é»‘ï¼Œæˆ¿é—´ä¸å¤§ï¼Œå¯ç”¨å¤§æ¦‚æœ‰10å¤šå¹³ï¼Œè™½ç„¶æœ‰ç½‘æœ‰ç”µè§†ï¼Œä½†æ˜¯è°è¯´çš„æœ‰ç½‘èƒ½è¿‡ä¸€è¾ˆå­ï¼Œåæ­£æˆ‘äº²èº«ä½“éªŒï¼Œç»“æœæ˜¯<strong>ä¸èƒ½</strong>ï¼Œå¦‚æœæ²¡æœ‰æ¸…æ–°çš„ç©ºæ°”ï¼Œæ²¡æœ‰é˜³å…‰ï¼Œæ—¶é—´ä¸€é•¿äº†ä½ ä¼šæ†‹ç–¯ã€‚</p><p>ä»é‚£æ—¶å€™å‘èª“æˆ‘ä¸‹ä¸€ä¸ªæˆ¿å­ä¸€å®šè¦å¸¦çª—æˆ·ã€‚</p><p><strong>äººç”Ÿæ€»æ˜¯å……æ»¡è‹¦éš¾ï¼Œç†¬è¿‡å»å°±å¥½äº†ï¼Œç†¬ä¸è¿‡å»å°±æ­»äº†</strong></p><h2 id="2020å¹´çš„è½¬æœº">2020å¹´çš„è½¬æœº</h2><p>2020å¹´ä¹Ÿä¸å®Œå…¨æ˜¯è‹¦éš¾çš„ä¸€å¹´ï¼Œä¸ŠåŠå¹´æˆ‘çš„æ”¶å…¥å¾®è–„ï¼Œæˆ‘å¾ˆå¿«é¢ä¸´ä¸€ä¸ªç¤¾ä¼šç»™æˆ‘å‡ºçš„éš¾é¢˜ã€‚<strong>ä¹°æˆ¿</strong>ã€‚</p><p>å‡­æˆ‘é‚£æ—¶å€™çš„æœˆè–ªæˆ‘æ ¹æœ¬ä¹°ä¸èµ·æˆ¿ï¼Œæˆ‘æœ¬ä¸æƒ³ç¦»èŒï¼Œå› ä¸ºäººä¸€æ—¦ç†Ÿæ‚‰äº†ä¸€ä¸ªç¯å¢ƒå°±ä¸æƒ³åŠ¨ï¼Œä»æ–°å»ºç«‹ä¸€ä¸ªæ–°çš„ç¤¾äº¤åœˆéœ€è¦æ—¶é—´çš„æ‰“ç£¨æ‰è¡Œï¼Œæˆ‘è®¨åŒç ´åœˆã€‚</p><p>é‚£æ—¶å€™æˆ‘çš„ä¸šä½™æ—¶é—´å¾ˆå¤šï¼Œå¯ä»¥åšå¾ˆå¤šæˆ‘å–œæ¬¢çš„äº‹,æ¯”å¦‚é‚£æ—¶å€™æˆ‘è‡ªå·±å†™äº†ä¸€å¥—ç»„ä»¶åº“ï¼ˆ<a href="https://suxin2017.github.io/bxer-ui/">bxer-ui</a>ï¼‰ï¼Œè¿˜ç»™umi-requestæäº†ä¸€ä¸ª<a href="https://github.com/umijs/umi-request/pull/90">æäº¤</a>ï¼Œå¯¹äºä¸€ä¸ªåˆšæ¯•ä¸šåŠå¹´æ¥è¯´çš„æˆ‘ä¹Ÿç®—æ˜¯å……æ»¡æŒ‘æˆ˜çš„äº†ã€‚</p><p>æ²¡åŠæ³•ï¼Œæˆ‘ä¸è·³æ§½æˆ‘å°±ä¹°ä¸èµ·æˆ¿ï¼Œè™½ç„¶è·³äº†ä¹Ÿä¹°ä¸èµ·ï¼Œä½†æ˜¯å¯ä»¥ç¼©çŸ­è¿™ä¸ªè¿‡ç¨‹çš„æ—¶é—´ã€‚</p><p>æˆ‘å¼€å§‹è¿›è¡Œè¿™åœºæˆ˜å½¹çš„æˆ˜å‰å‡†å¤‡äº†ï¼Œè®¾ç½®æˆ˜ç•¥ï¼Œä»å†œæ‘åŒ…å›´åŸå¸‚ï¼Œä»å°å…¬å¸ç§¯ç´¯ç»éªŒï¼Œç„¶ååœ¨é¢å¤§å‚ï¼Œè€å®è®²åœ¨é¢è¯•å‰ï¼Œæˆ‘æ²¡é¢è¯•è¿‡å‰ç«¯èŒä¸šï¼Œå› ä¸ºæˆ‘è¿›å…¥å…¬å¸çš„èº«ä»½æ˜¯javaå¼€å‘ã€‚</p><p>æˆ‘å‘ç°æˆ‘åˆå¤©çœŸäº†ï¼Œå°å‚æˆ˜å½¹è™½ç„¶å…¨èƒœï¼ˆè°ˆé’±å°±è¹¦ï¼ŒæŠ€æœ¯å…¨è¿‡ï¼‰ï¼Œä½†æ˜¯æˆ‘æ ¹æœ¬æ²¡èµ„æ ¼é¢è¯•å¤§å‚ï¼Œå› ä¸ºä¸€æ²¡èµ„è´¨è¿‡æµ…ï¼ŒäºŒæ²¡å¥½çš„å­¦æ ¡èƒŒæ™¯ï¼ŒæŠ•é€’ç»™å¤§å‚çš„ç®€å†ä»¿ä½›æ²‰å…¥æ­»æµ·ä¸€èˆ¬ã€‚</p><p>ä¸è¿‡ä»æˆ˜ç•¥ä¸Šæ¥è®²å†œæ‘åŒ…å›´åŸå¸‚æ˜¯æˆåŠŸçš„ï¼Œ<strong>æœºä¼šæ€»æ˜¯ç•™ç»™æœ‰å‡†å¤‡çš„äºº</strong>ï¼Œè™½ç„¶å¤§å‚æ²¡æœ‰å›éŸ³ï¼Œä½†æ˜¯å¤©å¹¶æ²¡æœ‰æ€äº†æˆ‘ï¼Œç»ˆäºæœ‰ä¸€å®¶å¤§å‚hrç»™æˆ‘å‘é¢è¯•é‚€è¯·ï¼Œæˆ‘ä¸€åº¦ä»¥ä¸ºé‚£æ˜¯ä¸ªéª—å­ï¼Œç›´åˆ°é¢è¯•å‰ã€‚</p><p>æˆ‘å‰é¢çš„æˆ˜ç•¥åœ¨è¿™æ—¶ä¸€ä¸‹å­å°±å˜å¾—æ„ä¹‰éå‡¡ï¼Œæˆ‘å·²ç»ä¸æƒ§æ€•é¢è¯•äº†ï¼Œæˆ‘é¡ºåˆ©é€šè¿‡äº†é¢è¯•è¿›å…¥äº†å¤§å‚ï¼Œè–ªèµ„ç¿»å€ã€‚</p><p><strong>ç”Ÿæ­»æœ‰å‘½ï¼Œå¯Œè´µåœ¨å¤©</strong></p><h2 id="2020å¹´çš„æˆå°±">2020å¹´çš„æˆå°±</h2><p>è¿›å…¥å¤§å‚åï¼Œæˆ‘å¹¶æ²¡æœ‰å°±æ­¤æ³„æ°”ï¼Œå¯¹äºæŠ€æœ¯çš„è¿½æ±‚æˆ‘ä¾ç„¶å¿«é©¬åŠ é­ï¼Œåœ¨å…¬å¸å†…ç½‘å‘å¸ƒå¤šç¯‡æ–‡ç« ã€‚</p><p>ä¸ä»…ä»…æ˜¯è¿™æ ·ï¼Œæˆ‘æ­å»ºèµ·è‡ªå·±çš„ç«™ç‚¹ï¼ˆ<a href="https://www.suxin2017.cc">suxin2017.cc</a>ï¼‰ï¼Œä¹°æœåŠ¡å™¨ï¼ŒåŸŸåï¼Œå¤‡æ¡ˆã€‚</p><p>å¤§æ¦‚ä¸‰ä¸ªæœˆçš„æ—¶é—´ï¼Œæˆ‘å‘å¸ƒäº†10ç¯‡æ–‡ç« åœ¨åšå®¢ä¸Šï¼Œä»Šå¹´åº”è¯¥å†™äº†å¾—æœ‰<strong>20 - 30</strong>å¤šç¯‡æ–‡ç« å§</p><p>è¿˜æå‡ºäº†ä¸€å¥—æ–‡ç« ç¼–å†™çš„å·¥ä½œæµï¼Œå› ä¸ºæˆ‘çš„æ–‡ç« å¯èƒ½ä¼šå‘å¸ƒåˆ°æ˜é‡‘ï¼Œå…¬ä¼—å·ã€‚</p><p>é€šè¿‡æœ‰é“äº‘å­˜è´®æ–‡ç« ï¼Œç„¶åå¯¹äºæ”¯æŒmarkdownçš„ç½‘ç«™ç›´æ¥ç”¨markdownã€‚ ä¸æ”¯æŒçš„é€šè¿‡è‡ªå·±å†™çš„<a href="https://suxin2017.github.io/markdown-website/com/">é©¬å…‹åœ¨çº¿æ’ç‰ˆ</a>å¤åˆ¶æ–‡ç« ï¼Œç²˜è´´åˆ°ç½‘ç«™çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ä¸­å®ç°æ–‡ç« å¿«é€ŸåŒæ­¥ï¼Œæ¯”å¦‚å¾®ä¿¡å…¬ä¼—å·ï¼Œå¤´æ¡å·ã€‚</p><p>å‘¨æœ«æ²¡äº‹å¹²è¿˜æäº†ä¸€ä¸ª<a href="https://suxin2017.github.io/gradient-online/">æ¸å˜è‰²ä»£ç ç”Ÿæˆ</a>çš„åœ¨çº¿å°å·¥å…·ã€‚</p><p>è¿˜åœ¨å¤´æ¡å·å®Œæˆå…´è¶£è®¤è¯ã€‚</p><p>ä¸Šé¢çš„è¿™ä¸€åˆ‡éƒ½æ˜¯æˆ‘æƒ³åšçš„ï¼Œä»€ä¹ˆéƒ½ä¸æ¶‚åªæ˜¯å›¾ä¸ªçˆ±å¥½ï¼Œé‚£æ—¶å€™çš„æˆ‘æƒ³æˆä¸ºä¸€åæŠ€æœ¯åŒ äººã€‚</p><p><strong>åˆ«äººç¬‘æˆ‘å¤ªç–¯ç™«ï¼Œæˆ‘ç¬‘ä»–äººçœ‹ä¸ç©¿</strong></p><h2 id="2020å¹´çš„è®¤è¯†">2020å¹´çš„è®¤è¯†</h2><p>æ˜¨å¤©ï¼ˆ å…ƒæ—¦å‰ä¸€å¤© ï¼‰æˆ‘å‘ç°æˆ‘ç°åœ¨åœ¨å‡ å¹´å†…èƒ½ä»˜èµ·æˆ¿çš„é¦–ä»˜äº†ï¼Œä½†æ˜¯æˆ‘ä¾æ—§é¢ä¸´çš„è¿˜æ˜¯æ²¡é’±çš„é—®é¢˜ï¼Œå› ä¸ºè¿˜å¾—è£…ä¿®ï¼Œåé¢ç»“å©šä»€ä¹ˆçš„å„ç§èŠ±é’±ã€‚</p><p>ä¹Ÿè®¸æœ‰äººç–‘é—®ä½ ä¸ºä»€ä¹ˆä¸é é•¿è¾ˆå•Šï¼Œæˆ‘è¿™äººä»å°å°±ä¸ä¼šæŠŠé åˆ«äººå½“æˆæˆ‘è‡ªå·±è®¡åˆ’çš„ä¸€éƒ¨åˆ†ï¼Œåˆ«äººå«è§£è€¦ï¼Œæˆ‘è¿™å« 0 ä¾èµ–ï¼Œä¸è¿‡è¿™æ ·çš„åæœå°±æ˜¯æ´»çš„ç´¯ã€‚</p><p>äºæ˜¯æˆ‘2021çš„å…³é”®è¯å˜æˆäº†ï¼Œå¥åº·ã€è‡ªå¾‹ã€èµšé’±ï¼Œä¸åœ¨æœ‰å…´è¶£äº†ï¼Œå› ä¸ºå…´è¶£å›ºç„¶é‡è¦ï¼Œä½†æ˜¯ç°é˜¶æ®µç°å®çš„ç¤¾ä¼šæ•™è‚²æˆ‘çš„æ˜¯å‘é’±çœ‹ã€‚</p><p>è®°å¾—å¤§å­¦çš„æ—¶å€™ï¼Œå†™ä¸ªå°å·¥å…·ï¼Œå°çˆ¬è™«è‡ªå·±å¼€å¿ƒçš„ä¸å¾—äº†ï¼Œä¸è¿‡å’Œåˆ«äººç‚«è€€åˆ«äººä¹Ÿä¸å¼æˆ‘ï¼Œä½†æ˜¯è‡ªå·±çœŸçš„å¾ˆå¼€å¿ƒï¼Œä¹Ÿè¿˜å¥½æˆ‘æ—¶è‡³ä»Šæ—¥è¿˜æ²¡å¿˜è®°æˆ‘å¯¹äºçƒ­çˆ±è®¡ç®—æœºçš„åˆå¿ƒã€‚</p><p>å½“å‰çš„ç°å®æ˜¯æˆ‘ä¸ºäº†å¯æŒç»­çš„å‘å±•ï¼Œæˆ‘å¿…é¡»è¦æ”¾å¼ƒäº›ä»€ä¹ˆï¼Œæˆ‘ä¸èƒ½ä¸€å¦‚æ—¢å¾€å†æè‡ªå·±å–œæ¬¢çš„ï¼Œæˆ‘è¦åœ¨ç¤¾ä¼šä¸Šæ´»ä¸‹å»ã€‚</p><p>äººç”Ÿå°±æ˜¯è¿™æ ·æ— é™çš„æŒ‘æˆ˜ï¼Œæ— é™çš„é€‰æ‹©ï¼Œ2021å¹´çš„æˆ‘é¢å¯¹äººç”Ÿä¾æ—§ä¹è§‚ï¼Œ2021å¹´çš„æˆ‘ä¸å†æ˜¯ä¸­äºŒï¼Œ2021å¹´çš„å†å¥åº·çš„å‰æä¸‹ä¾æ—§ä¼šçƒ­çˆ±æŠ€æœ¯ã€‚</p><p>æˆ‘æ˜¯è‹é‘«ï¼Œ2020å¹´è®©æˆ‘æˆé•¿ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> äººç”Ÿ </category>
          
          <category> post </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ€»ç»“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2021å…³é”®å­—</title>
      <link href="/2021/01/01/2021-guan-jian-zi/"/>
      <url>/2021/01/01/2021-guan-jian-zi/</url>
      
        <content type="html"><![CDATA[<h2 id="å¥åº·ï¼Œè‡ªå¾‹">å¥åº·ï¼Œè‡ªå¾‹</h2><p>æœ¬æ¥ä»¥ä¸ºè¿›å…¥å¤§å‚èƒ½å¤Ÿè§£å†³ç¤¾ä¼šç»™æˆ‘çš„ç»æµå‹åŠ›ï¼Œæ²¡æƒ³åˆ°åªæ˜¯ç¼“è§£äº†æˆ‘çš„ç¤¾ä¼šå‹åŠ›ï¼Œç¼©çŸ­äº†æˆ‘æ‰¿æ‹…ç¤¾ä¼šå‹åŠ›çš„æ—¶é—´ï¼Œç„¶åå´é¢ä¸´ç€é«˜å¼ºåº¦å·¥ä½œæ—¶é—´ï¼Œé«˜å‹ä¸‹çš„èº«ä½“å¥åº·æˆä¸ºäº†æˆ‘å”¯ä¸€çš„èµ„æœ¬ã€‚</p><p>æˆ‘ä¸€ç›´è§‰å¾—è‡ªå¾‹å’Œå¥åº·æ˜¯æ”¾åœ¨ä¸€èµ·çš„ï¼Œå› ä¸ºè‡ªå¾‹èƒ½å¸¦æ¥å¥åº·ï¼Œæˆ‘éœ€è¦ä¿æŒå¥åº·çš„åŒæ—¶ï¼Œåˆ›é€ ç»æµä»·å€¼ã€‚</p><p>ä¸€å®šè¦æ§åˆ¶ä½ç©æ‰‹æœºçš„æ—¶é—´ï¼Œä¸Šç­æ—¶é—´ä¸€å®šè¦å®šæ—¶ä¼‘æ¯çœ¼ç›ï¼Œæ— è®ºéœ€æ±‚å¤šå¿™ï¼Œæ— è®ºåœ¨å¹²å•¥ï¼Œå› ä¸ºèº«ä¸Šçš„æ‹…å­å¤ªé‡äº†ï¼Œæ‰€ä»¥æˆ‘ä¸èƒ½å‡ºç°é—®é¢˜ã€‚</p><p>æ‰€ä»¥å¤§æ¦‚ç‡æˆ‘è¦åƒæœºå™¨äººä¸€æ ·ç”Ÿæ´»ï¼Œè®¾ç½®å¥½æ¯å¤©åº”è¯¥å¹²ä»€ä¹ˆè¦å¹²ä»€ä¹ˆï¼Œè®©æ•ˆç‡æœ€å¤§åŒ–ï¼Œ</p><h2 id="æŒ£é’±">æŒ£é’±</h2><p>èƒ½ä¸èƒ½æç‚¹æŒ£é’±çš„å‰¯ä¸šå‘¢ï¼Ÿä¹‹å‰æä»€ä¹ˆéƒ½æ˜¯æƒ³è‡ªå·±å¼€å¿ƒå°±å¥½ï¼Œç„¶è€Œä»Šå¹´å‘ç°è‡ªå·±å¼€å¿ƒå¹¶ä¸æ˜¯é‚£ä¹ˆé‡è¦ï¼ŒæŒ£é’±æ‰æ˜¯æœ€é‡è¦çš„ã€‚</p><p>é¦–å…ˆåº”è¯¥åšåˆ°ä»¥ä¸‹å‡ ç‚¹ï¼Œæœ‹å‹åœˆé—­æµï¼Œé‡å¿ƒåç§»å¤´æ¡æ˜é‡‘ï¼Œè¿™äº›å¤´éƒ¨æµé‡çš„ç½‘ç«™ï¼Œå…·ä½“åšæ³•ï¼ŒæŠ€æœ¯ç›¸å…³å­˜åœ¨æ·±åº¦çš„æ–‡ç« æŠ•æ”¾æ˜é‡‘ï¼ŒæŠ€æœ¯ç›¸å…³ç§‘æ™®ä»‹ç»çš„æ–‡ç« æŠ•åˆ°å¤´æ¡ï¼Œç„¶åæ”¶é›†åˆ°åšå®¢å’Œå…¬ä¼—å·ï¼Œåšå®¢å’Œå…¬ä¼—å·åªæ˜¯æœé›†ä½œç”¨ã€‚</p><h2 id="æ€»ç»“">æ€»ç»“</h2><p>ä¿æŒå¥åº·ï¼ŒåšæŒè‡ªå¾‹ï¼Œä»æ–°è§„åˆ’æ–‡ç« å†™ä½œå¸ƒå±€ï¼Œæœ€å¥½å®ç°æ–‡ç« æ”¶ç›Šï¼Œå°†æ˜¯2021å¹´ä¸»è¦è¦åšçš„äº‹æƒ…ã€‚å½“ç„¶è¿™äº›éƒ½æ˜¯æå¥½æœ¬èŒå·¥ä½œçš„å‰æä¸‹åšçš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> äººç”Ÿ </category>
          
          <category> post </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ–°å¹´æ„¿æ™¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºnextçš„å…¨æ ˆå¼€å‘æ¡†æ¶Blitz</title>
      <link href="/2020/12/27/ji-yu-next-de-quan-zhan-kai-fa-kuang-jia-blitz/"/>
      <url>/2020/12/27/ji-yu-next-de-quan-zhan-kai-fa-kuang-jia-blitz/</url>
      
        <content type="html"><![CDATA[<h3 id="ç›®çš„">ç›®çš„</h3><p>è‡ªä»å‰ç«¯å’Œåç«¯åˆ†ç¦»ä¹‹åï¼Œä¸€ä¸ªäº§å“çš„å®è·µå¥½åƒå˜çš„ä¸é‚£ä¹ˆå®¹æ˜“ï¼Œå› ä¸ºä½ å¿…é¡»è¦æ‰¾ä¸€ä¸ªæ‡‚åç«¯çš„äººï¼Œé€šå¸¸æ˜¯java PHPï¼Œè¿™æ„å‘³å¼€å‘æˆæœ¬åŠ å¤§ã€‚</p><p>ä¸è¿‡æœ‰äººå¯èƒ½ä¼šè¯´æˆ‘èƒ½åŠ›å¼ºï¼Œnodeæ€§èƒ½å¤ªåƒåœ¾ï¼Œç„¶è€Œäº§å“åˆæœŸæœ€å…³é”®çš„æ˜¯å¿«é€ŸéªŒè¯æƒ³æ³•çš„å¯è¡Œæ€§ï¼ˆç°åœ¨è§‰å¾—vueåœ¨è¿™æ–¹é¢åšçš„æ¯”reactæ›´å¥½ï¼‰ã€‚ä½†æ˜¯åœ¨ä¸¤ä¸ªè¯­è¨€ä¹‹é—´åˆ‡æ¢ç¼–ç¨‹æ€»æ˜¯å¾ˆåˆ«æ‰­ã€‚</p><p>å†è°ˆssrï¼Œåˆšå¼€å§‹ä¸€ç›´ä¸çŸ¥é“ä»€ä¹ˆæ˜¯ssrï¼Œå› ä¸ºæƒ³django,eggéƒ½ä¼šæä¾›ä¸€ä¸ªé»˜è®¤æ¨¡ç‰ˆè§£æçš„æ¨¡å—ï¼Œç”¨æ¥åŠ¨æ€ç”Ÿæˆç½‘é¡µã€‚</p><p>å¹¶ä¸”éšç€å‰ç«¯SPAå´›èµ·ï¼Œæ›´å¤šçš„æ¸²æŸ“é€»è¾‘éƒ½æ”¾åœ¨äº†å®¢æˆ·ç«¯ï¼Œå°±æœ‰äº†CSRï¼ˆå®¢æˆ·ç«¯æ¸²æŸ“ï¼‰ã€‚</p><p>è®©ä»ç°åœ¨å¼€å§‹ç›´æ¥å†™å‰ç«¯çš„äººå¯¹ssræ„Ÿåˆ°é™Œç”Ÿã€‚</p><p>SSRè¯´ç™½äº†å°±æ˜¯åœ¨æœåŠ¡å™¨ç«¯ç¼–è¯‘å¥½é™æ€é¡µé¢ï¼Œç„¶åå‘é€åˆ°å®¢æˆ·ç«¯ã€‚</p><p>CSRçš„ä¼˜ç‚¹æ˜¯è·Ÿè§†å›¾ç›¸å…³çš„æ“ä½œä¸€è‚¡è„‘çš„æ”¾åœ¨äº†å‰ç«¯ã€‚</p><ul><li>ä¼˜ç‚¹<ul><li>é¡µé¢åˆ‡æ¢ä¸ä¼šæ‰“æ–­ç”¨æˆ·ä½“éªŒï¼Œåé¢é¡µé¢çš„å˜æ›´ä¹Ÿæ˜¯é€šè¿‡æ•°æ®æ›´æ”¹è§†å›¾ï¼Œæé«˜é¡µé¢æ¸²æŸ“é€Ÿåº¦ã€‚</li></ul></li><li>ç¼ºç‚¹<ul><li>æ²¡æœ‰äº†é¦–é¡µåŠ è½½ï¼Œä¹Ÿå°±æ˜¯ç”¨æˆ·é¦–æ¬¡åŠ è½½ä¼šå¾ˆæ…¢ï¼Œå‡ºç°é•¿æ—¶é—´ç™½å±ç­‰ç°è±¡ï¼Œå¯¹äºseoä¸å¤Ÿå‹å¥½ã€‚</li></ul></li></ul><p>çº¯ç²¹çš„SSRçš„ä¼˜ç‚¹æ˜¯å¯¹äºseoå‹å¥½ï¼Œé¡µé¢å¿«é€ŸåŠ è½½ï¼Œè¿™æ–¹é¢å¯ä»¥æŸ¥çœ‹hero ç”Ÿæˆåšå®¢ã€‚</p><ul><li>ä¼˜ç‚¹<ul><li>é¡µé¢é¦–æ¬¡æ¸²æŸ“å¿«ï¼Œå¯¹äºseoå‹å¥½</li></ul></li><li>ç¼ºç‚¹<ul><li>é¡µé¢å†…å®¹æ¯æ¬¡éƒ½éœ€è¦å…¨é‡å˜æ›´ï¼Œç”¨æˆ·ä½“éªŒä¸å¥½ã€‚</li></ul></li></ul><p><strong>é‚£ä¹ˆç°åœ¨æµè¡Œçš„ssrçš„ç­–ç•¥åˆ™æ˜¯ï¼Œé¦–æ¬¡åŠ è½½ssrï¼Œåé¢çš„åŠ è½½é€šè¿‡csrè¯·æ±‚æ•°æ®ï¼Œéƒ¨åˆ†å˜æ›´å®Œæˆã€‚</strong></p><p><img src="/imgs/drawio1.png" alt="æ¸²æŸ“è¿‡ç¨‹"></p><h3 id="React-SSR-æ¡†æ¶-NEXT">React SSR æ¡†æ¶ NEXT</h3><p>NEXT æä¾›äº†ä¸Šé¢çš„é¦–æ¬¡åŠ è½½SSRåé¢CSRçš„è§£å†³æ–¹æ¡ˆï¼Œå¹¶é€šè¿‡çº¦å®šè·¯ç”±ï¼Œæ··åˆSSGï¼ˆæ„å»ºæ—¶ç”Ÿæˆï¼‰å’ŒSSRï¼ˆæœåŠ¡ç«¯æ¸²æŸ“ï¼‰ç­‰åŠŸèƒ½å¢å¼ºç”¨æˆ·ä½“éªŒã€‚</p><p>ä½†æ˜¯NEXT ä»…ä»…æ˜¯ä¸€ä¸ªSSRè§£å†³æ–¹æ¡ˆï¼Œä½ å¯ä»¥ç”¨å®ƒæ­å»ºä¸€ä¸ªå¯¹äºseoå‹å¥½çš„å‰ç«¯é¡µé¢ã€‚é’ˆå¯¹ç”¨æˆ·å¹¶ä¸å®Œå…¨æ˜¯å…¨æ ˆå¼€å‘äººå‘˜ï¼Œè™½ç„¶é€šè¿‡ä¸€ç³»åˆ—é…ç½®æ”¹åŠ¨ï¼Œä¹Ÿå¯ä»¥åšåˆ°å…¨æ ˆå¼€å‘ã€‚</p><p>ä½†ä»è¦èŠ±è´¹å¤§é‡æ—¶é—´å»å¯»æ‰¾æµè¡Œçš„ormæ¡†æ¶ï¼Œå›¢é˜Ÿå†…çº¦æŸæ–‡ä»¶ç›®å½•å‘½åï¼Œapiå¼€å‘è§„èŒƒç­‰ï¼Œè¿˜éœ€è¦æ¥å…¥æ€§èƒ½ç›‘æ§ï¼Œè¿™äº›è™½ç„¶éƒ½å¯ä»¥åšåˆ°ï¼Œä½†æ˜¯å…¶å®æ˜¯å¾ˆé‡å¤çš„å·¥ä½œï¼Œè€Œä¸”éœ€è¦èŠ±è´¹å¤§é‡æˆæœ¬å»åšå¥½ã€‚</p><h3 id="åŸºäºNEXT-çš„å…¨æ ˆå¼€å‘æ¡†æ¶Blitz">åŸºäºNEXT çš„å…¨æ ˆå¼€å‘æ¡†æ¶Blitz</h3><p>Blitz åŸºäºNext æ‰€ä»¥ä¾¿æ‹¥æœ‰äº†Nextå…¨éƒ¨çš„ä¼˜ç‚¹ã€‚</p><p>å¹¶ä¸”é»˜è®¤é›†æˆäº†</p><ul><li>ormï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼‰æ¡†æ¶ <strong>prisma</strong></li><li>æˆæƒçš„ passport.js</li><li>ä¸€ä¸ª<a href="https://blitzjs.com/docs/cli-console">å¯äº¤äº’çš„å‘½ä»¤è¡Œç•Œé¢</a>ï¼Œå¯ä»¥äº¤äº’å½“å‰å„ç§api</li><li>ä¸€ä¸ªå¯è§†åŒ–çš„æ•°æ®åº“ç½‘é¡µè¿æ¥å™¨ï¼ˆä¸ç”¨å†æ‰¾æ•°æ®åº“æ“ä½œè½¯ä»¶äº†ï¼‰</li></ul><p>æ–‡æ¡£çš„å¼€ç¯‡ä»‹ç»ä¾¿è¯´å¸å–äº† Ruby on Rails ï¼ˆè¿™æ˜¯ä¸€ä¸ªRubyçš„webå¼€å‘æ¡†æ¶ï¼Œå´‡å°šçº¦å®šä¼˜äºé…ç½®ã€‚ï¼‰</p><p>é€šè¿‡çº¦å®šä¼˜äºé…ç½®ï¼Œå°±å¯ä»¥åšè®¸å¤šçš„<a href="https://blitzjs.com/docs/cli-generate">è‡ªåŠ¨åŒ–ç”Ÿæˆä»£ç </a>ã€‚</p><p>æ˜¨æ™šè¯•æ°´äº†ä¸€ä¸‹ã€‚</p><h4 id="åˆå§‹åŒ–é¡¹ç›®">åˆå§‹åŒ–é¡¹ç›®</h4><p>é¦–å…ˆæ˜¯å®‰è£…éœ€è¦å¼€ä»£ç†ï¼Œä»–ä¼šä¸‹è½½githubçš„ä¸€äº›ä¸œè¥¿ï¼Œä¸è¿‡ç”Ÿæˆæ–‡ä»¶åä¹Ÿå¯ä»¥ç›´æ¥å–æ¶ˆï¼Œè‡ªå·±é€šè¿‡npmå®‰è£…ä¾èµ–,æ¯”ä»–çš„è¦å¿«ã€‚</p><pre><code class="hljs">blitz new <span class="hljs-built_in">test</span>  <span class="hljs-comment">## ç”Ÿæˆæ–‡ä»¶åç›´æ¥ä¸ç”¨ä»–çš„å®‰è£…ä¾èµ–,è‡ªå·±å®‰è£…</span><span class="hljs-comment">## npm install</span><span class="hljs-comment">## ç”Ÿæˆæ•°æ®åº“ç»“æ„</span>blitz db migrate</code></pre><p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥å¯åŠ¨æœåŠ¡äº†</p><pre><code class="hljs"><span class="hljs-comment">## åœ¨localhost:3000å°±å¯ä»¥çœ‹åˆ°åº”ç”¨äº†</span>npm start</code></pre><p><img src="/imgs/homepreview.png" alt="é¦–é¡µå›¾ç‰‡"></p><h3 id="Blitz-æŸ¥çœ‹æ•°æ®åº“">Blitz æŸ¥çœ‹æ•°æ®åº“</h3><p>é€šå¸¸æˆ‘ä»¬ç»å¸¸éœ€è¦æ‰¾ä¸€ä¸ªæ•°æ®åº“çš„guiäº§å“æ¥æŸ¥çœ‹æˆ‘ä»¬çš„æ•°æ®ï¼Œä½†æ˜¯Blitzè‡ªå¸¦ä¸€ä¸ª</p><pre><code class="hljs"><span class="hljs-comment">## çœ‹æ•°æ®åº“</span>npm run studio</code></pre><p><img src="/imgs/dbpreview.png" alt="æ•°æ®åº“é¢„è§ˆ"></p><h3 id="ç”Ÿæˆä»£ç ">ç”Ÿæˆä»£ç </h3><p>é€šè¿‡<code> blitz generate</code> æˆ‘ä»¬å¯ä»¥ç”Ÿæˆå¤§é‡æ¨¡ç‰ˆä»£ç ï¼Œæé«˜å¼€å‘æ•ˆç‡</p><pre><code class="hljs">blitz <span class="hljs-keyword">generate</span> all project</code></pre><p>ç”Ÿæˆåéœ€è¦æ”¹ä¸‹ <code>db/schema.prisma</code></p><p>å› ä¸ºè‡ªåŠ¨ç”Ÿæˆçš„æ¨¡ç‰ˆä¼šå¸¦ä¸€ä¸ªnameå±æ€§ï¼Œå¾ˆè´¹è§£ï¼Œä¸è¿‡blitzæ—¶åˆ»æé†’ä½ è¿™æ˜¯alpheç‰ˆæœ¬ï¼Œä¹Ÿå¯ä»¥ç†è§£ã€‚</p><pre><code class="hljs">model Project &#123;  id        <span class="hljs-built_in">Int</span>      <span class="hljs-meta">@default(autoincrement())</span> <span class="hljs-meta">@id</span>  createdAt DateTime <span class="hljs-meta">@default(now())</span>  updatedAt DateTime <span class="hljs-meta">@updatedAt</span>+  name      String?&#125;</code></pre><p>ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬ç”Ÿæˆè¡¨å•ç»„ä»¶ï¼Œåˆ—è¡¨é¡µé¢ï¼Œè¯¦æƒ…é¡µé¢ç­‰ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©éœ€è¦ç”Ÿæˆä»€ä¹ˆã€‚</p><p>ä¸è¿‡æš‚æ—¶æ²¡å‘ç°å¦‚ä½•è‡ªå®šä¹‰ç”Ÿæˆæ¨¡ç‰ˆï¼Œå¦‚æœæœ‰è¿™ä¸ªè¡¨å•å°±ä¼šæ›´å¿«ã€‚</p><h3 id="æ€»ç»“">æ€»ç»“</h3><p>Blitz æä¾›äº†ä¸€å¥—å¼€ç®±å³ç”¨çš„å…¨æ ˆå¼€å‘è§£å†³æ–¹æ¡ˆï¼Œä¼˜é›…çš„æ–‡ä»¶ç›®å½•çº¦æŸï¼Œè®©äººçœ¼å‰ä¸€äº®çš„äº¤äº’ç»ˆç«¯ï¼Œå’Œæ•°æ®åº“æ“ä½œç•Œé¢ã€‚</p><p>ä»å¼€å‘æˆæœ¬ä¸Šæ¥è¯´ï¼Œæå¤§çš„é™ä½äº†å¼€å‘äººå‘˜æŠ€æœ¯é€‰å‹çš„æˆæœ¬ï¼Œå¿«é€Ÿè¿›å…¥ä¸šåŠ¡å¼€å‘é˜¶æ®µã€‚</p><p>é™ä½ä»£ç ç»´æŠ¤æˆæœ¬ï¼Œé€šè¿‡çº¦æŸï¼Œå†ä¹Ÿä¸ç”¨æ‹…å¿ƒä»£ç åƒäººåƒé¢ï¼Œä¸çŸ¥é“ä»£ç ç›®å½•ä»£è¡¨çš„æ„æ€äº†ã€‚</p><p>å½“ç„¶ä¹Ÿæœ‰å…¶ä¸è¶³ä¹‹å¤„ï¼Œå¯¹äºè‡ªå®šä¹‰æœåŠ¡æ”¯æŒæ–‡æ¡£ä¸å®Œå–„ï¼Œ<a href="http://xn--Render-9b6jq5rd8efb377cmyi71pgnhpt0ionuc.com">æ”¯æŒå›½å¤–å¤šå®¶éƒ¨ç½²å¹³å°Render.com</a>ã€Vercel<br>ã€Heroku,å›½å†…æœåŠ¡æ²¡æœ‰ä»»ä½•æ”¯æŒï¼Œä¸è¿‡å›½å†…å¯¹äºå‰ç«¯éƒ¨ç½²è¿™æ–¹é¢æˆå‹çš„äº§å“å¥½åƒç¡®å®æ¯”è¾ƒå°‘ã€‚</p><p>ç»†èŠ‚åœ°æ–¹ä¸å¤Ÿå®Œå–„æ¯”å¦‚ä»£ç ç”Ÿæˆçš„æ¨¡ç‰ˆä»£ç æœ‰ç‚¹æ­»ç‰ˆï¼Œä¸è¿‡å®˜æ–¹éƒ½è¯´äº†è¿™æ˜¯ alpha ç‰ˆæœ¬ï¼Œä¹Ÿæ˜¯å¯ä»¥æ¥å—çš„ã€‚</p><p>æœ€åï¼Œè¿™æ˜¯ä¸€ä¸ªæœªæ¥å¯æœŸçš„å…¨æ ˆå¼€å‘æ¡†æ¶ï¼Œè€Œä¸”æœ‰ Ruby on Rails å·²ç»å¯¹è¿™ç§æƒ³æ³•åšäº†éªŒè¯ï¼Œç›¸ä¿¡åé¢çš„å®Œå–„ï¼Œä¹Ÿè®¸Node å°±æ­¤ç¿»ç›˜ï¼Œå°ä¼ä¸šå¯ç›´æ¥ç”¨æ­¤é™ä½äººå·¥æˆæœ¬ï¼Œå¯¹äº§å“è¿›è¡Œå¿«é€ŸéªŒè¯ï¼Œè¿­ä»£ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å…¨æ ˆ </category>
          
          <category> post </category>
          
      </categories>
      
      
        <tags>
            
            <tag> next </tag>
            
            <tag> react </tag>
            
            <tag> ts </tag>
            
            <tag> server </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœ‰è¶£çš„å­—ä½“æ–‡ä»¶</title>
      <link href="/2020/12/13/you-qu-de-zi-ti-wen-jian/"/>
      <url>/2020/12/13/you-qu-de-zi-ti-wen-jian/</url>
      
        <content type="html"><![CDATA[<h2 id="å­—ä½“å†å²">å­—ä½“å†å²</h2><p>è¯è¯´åœ¨è®¡ç®—æœºå¸‚åœºåˆšåˆšå¼€è¾Ÿçš„æ—¶å€™ï¼Œå­—ä½“å¸‚åœº Adobe ä¸€å®¶ç‹¬å¤§ï¼Œé€šè¿‡è´©å–æ ¼å¼è®¤è¯èµšäº†å¾ˆå¤šé’±ï¼Œä½†æ˜¯è‹¹æœæƒ³ç™½å«– Adobe è‡ªç„¶ä¸å¹²ã€‚</p><p>äºæ˜¯è‹¹æœå…¬å¸å¦èµ·ç‚‰ç¶æèµ·äº†è‡ªå·±çš„ TrueTypeï¼Œä½†æ˜¯å½“æ—¶å·²ç»æœ‰äº†ä¸€å¤§æ‰¹ Adobe ä»˜è´¹ç”¨æˆ·ï¼Œè‡ªç„¶æ²¡å¿…è¦æ”¯æŒè‹¹æœã€‚</p><p>ç„¶åè‹¹æœæ‹‰èµ·äº†åŒç›Ÿï¼Œå¾®è½¯ï¼Œä¸¤äººæƒ…æŠ•æ„åˆï¼Œçœ‰æ¥çœ¼å»ä¸€èµ·æèµ·äº†å­—ä½“åè®®ã€‚</p><p>ä¸¤äººè”æ‰‹æŠŠ Adobe æçš„ä¸è¡Œï¼Œç›®å‰å¸‚åœºä¸Šæœ€å¸¸è§çš„å°±æ˜¯ TrueType çš„å­—ä½“æ ¼å¼äº†ã€‚è¿™åœºæ²¡æœ‰ç¡çƒŸçš„æˆ˜äº‰æœ€åèµ¢åœ¨äº†æƒ³ç™½å«–ä½†æ˜¯æ²¡æˆåŠŸçš„äººèº«ä¸Šã€‚</p><p>ä¸¤å®¶åˆ†åˆ«åœ¨è‡ªå·±çš„å­—ä½“æ–‡æ¡£å¤–é“¾å¯¹æ–¹çš„æ–‡æ¡£åœ°å€ï¼Œæƒºæƒºç›¸æƒœã€‚</p><h2 id="TrueType-çš„å­—ä½“æ–‡ä»¶å­˜å‚¨æ ¼å¼">TrueType çš„å­—ä½“æ–‡ä»¶å­˜å‚¨æ ¼å¼</h2><p>å¦‚æœåˆšçœ‹å­—ä½“æ–‡ä»¶çš„å®˜æ–¹æ–‡æ¡£å¯¹äºå¾ˆå°‘åŸºç¡€äºŒè¿›åˆ¶çš„äººæ¥è¯´ä¼šæœ‰é‚£ä¹ˆä¸€ç‚¹ç‚¹é™Œç”Ÿã€‚</p><p>é¦–å…ˆå­—ä½“æ–‡ä»¶æ˜¯ç”¨è¡¨è¿›è¡Œå­—ä½“æ–‡ä»¶æè¿°çš„ã€‚</p><p>æŒ‰ç…§æ–‡æ¡£å­—æ®µçº¦æŸè¯»å–æè¿°æ–‡ä»¶ä¿¡æ¯ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„ api æ˜¯ DataViewï¼ŒDataView æ˜¯ä¸€ä¸ªå¯ä»¥æ–¹ä¾¿è¯»å–äºŒè¿›åˆ¶çš„å¯¹è±¡ã€‚</p><p>è¯¦æƒ…å¯æŸ¥çœ‹<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/DataView">MDN DataVuew</a>,æµè§ˆå™¨å…¼å®¹æ€§å¾ˆå¥½ã€‚</p><p>æ¯”å¦‚å¯¹äºä¸‹é¢ä¸€æ®µå­—ä½“ä¿¡æ¯æˆ‘ä»¬åº”è¯¥æ€ä¹ˆåš</p><pre><code class="hljs">  <span class="hljs-title class_">Offset</span>: <span class="hljs-number">00</span> <span class="hljs-number">01</span> <span class="hljs-number">02</span> <span class="hljs-number">03</span> <span class="hljs-number">04</span> <span class="hljs-number">05</span> <span class="hljs-number">06</span> <span class="hljs-number">07</span> <span class="hljs-number">08</span> <span class="hljs-number">09</span> 0A 0B 0C 0D 0E 0F<span class="hljs-number">00000000</span>: <span class="hljs-number">00</span> <span class="hljs-number">01</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> 0E <span class="hljs-number">00</span> <span class="hljs-number">80</span> <span class="hljs-number">00</span> <span class="hljs-number">03</span> <span class="hljs-number">00</span> <span class="hljs-number">60</span> 4F <span class="hljs-number">53</span> 2F <span class="hljs-number">32</span>    ...........<span class="hljs-string">`OS/2</span></code></pre><p>å¯¹äºå•ä¸ªå­—ä½“çš„æ–‡ä»¶</p><p>æŒ‰ç…§æ–‡æ¡£çº¦å®šä»æ–‡ä»¶ç¬¬ 0 ä½å¼€å§‹çš„</p><table><thead><tr><th>Type</th><th>Name</th><th>Description</th></tr></thead><tbody><tr><td>uint32</td><td>sfntVersion</td><td>0x00010000 or 0x4F54544F (â€˜OTTOâ€™) â€” see below.</td></tr><tr><td>uint16</td><td>numTables</td><td>Number of tables.</td></tr><tr><td>uint16</td><td>searchRange</td><td>Maximum power of 2 less than or equal to numTables, times 16 ((2<strong>floor(log2(numTables))) * 16, where â€œ</strong>â€ is an exponentiation operator).</td></tr><tr><td>uint16</td><td>entrySelector</td><td>Log2 of the maximum power of 2 less than or equal to numTables (log2(searchRange/16), which is equal to floor(log2(numTables))).</td></tr><tr><td>uint16</td><td>rangeShift</td><td>numTables times 16, minus searchRange ((numTables * 16) - searchRange).</td></tr></tbody></table><p>æ‰€ä»¥æˆ‘ä»¬çš„ç‰ˆæœ¬ä¿¡æ¯è¯»å–ä»£ç å°±æ˜¯</p><pre><code class="hljs"><span class="hljs-comment">// 4 sfntVersuin 2 numTables 2 searchRange 2 entrySelector 2 rangeShift</span><span class="hljs-keyword">const</span> tableDirectory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataView</span>(ttfArrayBuffer, <span class="hljs-number">0</span>, <span class="hljs-number">4</span> + <span class="hljs-number">2</span> + <span class="hljs-number">2</span> + <span class="hljs-number">2</span> + <span class="hljs-number">2</span>);<span class="hljs-keyword">let</span> offset = <span class="hljs-number">0</span>;<span class="hljs-keyword">let</span> sfntVersion = view1.<span class="hljs-title function_">getUint32</span>(offset);offset += <span class="hljs-number">4</span>;<span class="hljs-keyword">let</span> numTables = view1.<span class="hljs-title function_">getUint16</span>(offset);offset += <span class="hljs-number">2</span>;<span class="hljs-keyword">let</span> searchRange = view1.<span class="hljs-title function_">getUint16</span>(offset);offset += <span class="hljs-number">2</span>;<span class="hljs-keyword">let</span> entrySelector = view1.<span class="hljs-title function_">getUint16</span>(offset);offset += <span class="hljs-number">2</span>;<span class="hljs-keyword">let</span> rangeShift = view1.<span class="hljs-title function_">getUint16</span>(offset);</code></pre><p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è¯»å–å­—ä½“ä¿¡æ¯äº†ã€‚</p><h2 id="å­—å½¢çš„æŸ¥æ‰¾">å­—å½¢çš„æŸ¥æ‰¾</h2><p><img src="/imgs/funnyfont.png" alt="å­—ä½“çš„æŸ¥æ‰¾"></p><p>å¯¹äºä¸€ä¸ª unicode æˆ‘ä»¬å¦‚ä½•æ‰¾åˆ°å®ƒå¯¹åº”çš„å­—ä½“å½¢çŠ¶å‘¢ã€‚</p><p>é¦–å…ˆå­—ä½“æ˜¯ä»¥è¡¨å­˜å‚¨çš„ï¼Œæ¯ä¸ªè¡¨éƒ½ä»£è¡¨ä¸åŒçš„ä¿¡æ¯ã€‚</p><p>å­—ä½“åˆ°å­—å½¢æ˜ å°„æ˜¯é€šè¿‡ cmap è¿›è¡Œæ˜ å°„çš„ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ cmap æŸ¥æ‰¾åˆ°å½“å‰å¹³å°å¯¹åº”çš„å­è¡¨</p><p>ç„¶åé€šè¿‡ cmap å­è¡¨ä¸åŒçš„ format è§„åˆ™ gid å­—å½¢ id</p><p>è·å–çš„ SVG æˆ–è€… CFF æˆ–è€… glyf è¡¨çš„ä½ç½®</p><p>ç„¶åå°±æ˜¯å­—ä½“æ¸²æŸ“äº†ã€‚</p><p>å…·ä½“å¤„ç†é€»è¾‘å¾ˆç»•ï¼Œæœ‰å…´è¶£çš„å¯ä»¥çœ‹çœ‹ä¸€ä¸ªç®€å•çš„ font å¤„ç†åº“çš„æºç <a href="https://github.com/photopea/Typr.js/blob/gh-pages/src/Typr.U.js#L61">Typr.U.js#L61</a></p><h2 id="å­—ä½“æ–‡ä»¶åº”ç”¨">å­—ä½“æ–‡ä»¶åº”ç”¨</h2><h3 id="å­—ä½“ä¼˜åŒ–">å­—ä½“ä¼˜åŒ–</h3><p>æ— è®ºæ˜¯ç§»åŠ¨ç«¯ç”¨æˆ·è¿˜æ˜¯ PC ç«¯ç”¨æˆ·ï¼Œå¦‚æœä¸Šäº†å­—ä½“å¿…ç„¶è¦åšå­—ä½“ä¼˜åŒ–ã€‚</p><p>é¢å¯¹ä¸€ä¸ªå‡  M å¤§å°çš„å­—ä½“æ–‡ä»¶ï¼Œå¯¹äºç”¨æˆ·å¯èƒ½é¡µé¢ä¿¡æ¯çœ‹å®Œäº†ï¼Œä¹Ÿæ²¡è®°è½½å‡ºæ¥ï¼Œæ‰€ä»¥å¾ˆå°‘æœ‰äººç”¨ç½‘ç»œåŠ è½½è‡ªå®šä¹‰å­—ä½“ã€‚</p><p>ä¸è¿‡å¦‚æœåœºæ™¯å›ºå®šï¼ˆæ–‡æ¡ˆä¸ä¼šå˜ï¼‰æˆ‘ä»¬å°±èƒ½å¯¹å…¶è¿›è¡Œå­—ä½“æŠ½ç¦»ï¼Œç„¶åç”Ÿæˆæ–°çš„å­—ä½“æ–‡ä»¶ï¼ŒåªåŒ…å«æˆ‘ä»¬éœ€è¦çš„ï¼Œå­—ä½“æ–‡ä»¶çš„å¤§å°å°†å¤§å¤§å‡å°‘ã€‚</p><p>ä¸€æ–¹é¢å¯ä»¥å°†å‹ç¼©æ–‡ä»¶ä¸Šä¼ <code>cdn</code></p><p>å¦ä¸€æ–¹é¢æˆ‘ä»¬å¯ä»¥ç›´æ¥è½¬åŒ–æˆ base64 é€šè¿‡<code>@font-face&#123;url(base64)&#125;</code>å»åŠ è½½</p><h3 id="å­—ä½“åŠ å¯†">å­—ä½“åŠ å¯†</h3><p>æˆ‘ä»¬æ¢ä¸€ç§æ€è·¯ï¼Œæ—¢ç„¶å±å¹•æ˜¾ç¤ºæ˜¯æ ¹æ® unicode å»æŸ¥æ‰¾å¯¹åº”çš„æ˜¾ç¤ºå­—å½¢ã€‚</p><p>æ¯”å¦‚</p><pre><code class="hljs"><span class="hljs-comment">// æœ‰ä¸€ä¸ªå­—æ¯A çš„unicode ç¼–ç æ˜¯0x41</span><span class="hljs-number">0</span><span class="hljs-function"><span class="hljs-title">x41</span> -&gt;</span> A<span class="hljs-comment">// é‚£ä¹ˆæˆ‘ä»¬ä¿®æ”¹æˆ</span><span class="hljs-number">0</span><span class="hljs-function"><span class="hljs-title">x7b</span> -&gt;</span> A</code></pre><p>æˆ‘ä»¬æä¾›æˆ‘ä»¬åŠ å¯†åçš„å­—ä½“æ–‡ä»¶ï¼Œå¦‚æœä»–å¤åˆ¶ç²˜è´´åˆ°åˆ«çš„åœ°æ–¹å°±ä¼šå˜æˆ<code>&#123;</code></p><p>è¿™æ ·å¦‚æœä¸ç”¨æˆ‘ä»¬çš„å­—ä½“æ–‡ä»¶ï¼Œé‚£ä¹ˆ shi yong fang ä½¿ç”¨æ–¹å°±ä¼šä¸€è„¸è’™è”½ã€‚</p><blockquote><p>è¡Œæ–‡ä»“ä¿ƒ,å¦‚æœ‰çº°æ¼ï¼Œæ¬¢è¿æŒ‡å‡ºã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> post </category>
          
      </categories>
      
      
        <tags>
            
            <tag> font </tag>
            
            <tag> ttf </tag>
            
            <tag> TrueType </tag>
            
            <tag> OpenType </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>githubå·¥ä½œæµåˆ°github page</title>
      <link href="/2020/12/12/github-gong-zuo-liu-dao-github-page/"/>
      <url>/2020/12/12/github-gong-zuo-liu-dao-github-page/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å¤§å®¶åº”è¯¥éƒ½çŸ¥é“ github æ˜¯ä¸€ä¸ªç™½å«–å…šçš„ç¦åˆ©åœ°ï¼ŒåŠ ä¸Šå®ƒçš„ GitHub Pages ç®€ç›´æ˜¯å‰ç«¯ç™½å«–çš„åœ£åœ°</p></blockquote><h2 id="ä½¿ç”¨æ–¹æ³•">ä½¿ç”¨æ–¹æ³•</h2><p>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º</p><p>.github/workflows/node.js.ynl</p><p>æŠŠä¸‹é¢çš„å†…å®¹ç²˜è´´è¿›å…¥å°±å¯ä»¥å¿«é€Ÿæ„å»ºéƒ¨ç½²åˆ° GitHub Pages</p><h2 id="çŒ®ä¸Šå°å¼Ÿçš„ä¸€ä»½ç™½å«–-workflow-æ–‡ä»¶">çŒ®ä¸Šå°å¼Ÿçš„ä¸€ä»½ç™½å«– workflow æ–‡ä»¶</h2><pre><code class="hljs"><span class="hljs-attr">name:</span> <span class="hljs-string">Node.js</span> <span class="hljs-string">CI</span><span class="hljs-attr">on:</span>  <span class="hljs-comment">## è§¦å‘æ—¶æœº</span>  <span class="hljs-attr">push:</span>    <span class="hljs-comment">## åˆ†æ”¯ï¼Œgitæ–°å»ºé¡¹ç›®æ–°çš„é¡¹ç›®é»˜è®¤æ˜¯mainï¼Œè€å¾—æ˜¯master</span>    <span class="hljs-attr">branches:</span> [<span class="hljs-string">main</span>]  <span class="hljs-attr">pull_request:</span>    <span class="hljs-attr">branches:</span> [<span class="hljs-string">main</span>]<span class="hljs-attr">jobs:</span>  <span class="hljs-attr">build:</span>    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>    <span class="hljs-attr">strategy:</span>      <span class="hljs-attr">matrix:</span>        <span class="hljs-attr">node-version:</span> [<span class="hljs-number">12.</span><span class="hljs-string">x</span>]    <span class="hljs-attr">steps:</span>      <span class="hljs-comment">## åˆ‡æ¢åˆ†æ”¯</span>      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v2</span>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Use</span> <span class="hljs-string">Node.js</span> <span class="hljs-string">$&#123;&#123; matrix.node-version &#125;&#125;</span>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-node@v1</span>        <span class="hljs-attr">with:</span>          <span class="hljs-attr">node-version:</span> <span class="hljs-string">$&#123;&#123; matrix.node-version &#125;&#125;</span>      <span class="hljs-comment">## æ‰§è¡Œè„šæœ¬</span>      <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">install</span>      <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">run</span> <span class="hljs-string">build</span>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">GitHub</span> <span class="hljs-string">Pages</span>        <span class="hljs-attr">uses:</span> <span class="hljs-string">crazy-max/ghaction-github-pages@v2.1.1</span>        <span class="hljs-attr">with:</span>          <span class="hljs-comment">## æ„å»ºç”Ÿæˆçš„ç›®å½•</span>          <span class="hljs-attr">build_dir:</span> <span class="hljs-string">dist</span>        <span class="hljs-attr">env:</span>          <span class="hljs-attr">GITHUB_TOKEN:</span> <span class="hljs-string">$&#123;&#123; secrets.GITHUB_TOKEN &#125;&#125;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
          <category> post </category>
          
      </categories>
      
      
        <tags>
            
            <tag> github </tag>
            
            <tag> ci </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç«ç‹å¼€å‘è€…ç‰ˆ source map ä¸å¥½ä½¿</title>
      <link href="/2020/12/11/bu-hao-shi/"/>
      <url>/2020/12/11/bu-hao-shi/</url>
      
        <content type="html"><![CDATA[<p>æŠ¥é”™</p><p>SyntaxError: JSON.parse: unexpected character at line 1 column 1 of the JSON data</p><p><img src="https://mdn.mozillademos.org/files/15425/missing-field.png" alt="image"></p><p>è®¾ç½® about:config</p><p>devtools.source-map.locations.enabled</p><p>ä¸º true</p><p>å…·ä½“åŸå›  <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1365579">https://bugzilla.mozilla.org/show_bug.cgi?id=1365579</a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> post </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
            <tag> firefox </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç«ç‹æµè§ˆå™¨ç©ºçš„iframeæ“ä½œdomä¸å¥½ä½¿</title>
      <link href="/2020/12/11/huo-hu-liu-lan-qi-kong-de-iframe-cao-zuo-dom-bu-hao-shi/"/>
      <url>/2020/12/11/huo-hu-liu-lan-qi-kong-de-iframe-cao-zuo-dom-bu-hao-shi/</url>
      
        <content type="html"><![CDATA[<h3 id="å¦‚æœå‘ä¸€ä¸ªç©ºçš„-iframe-ç›´æ¥æ‰§è¡Œ">å¦‚æœå‘ä¸€ä¸ªç©ºçš„ iframe ç›´æ¥æ‰§è¡Œ</h3><pre><code class="hljs">document.append<span class="hljs-constructor">Child(<span class="hljs-params">document</span>.<span class="hljs-params">createElement</span>(&#x27;<span class="hljs-params">div</span>&#x27;)</span>)</code></pre><p>ä¼šä¸å¥½ä½¿,ä½†æ˜¯é¡µé¢ä¸ä¼šæŠ¥é”™ï¼Œæ²¡æœ‰è­¦å‘Š</p><h3 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h3><p>ç›‘å¬ iframe onload äº‹ä»¶<br>å† onload äº‹ä»¶ä¸­æ‰§è¡Œ dom æ“ä½œæ¯”è¾ƒå®‰å…¨</p><pre><code class="hljs"><span class="hljs-comment">// win æ˜¯ iframe çš„å¼•ç”¨</span><span class="hljs-keyword">const</span> root = win.<span class="hljs-property">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);win.<span class="hljs-property">onload</span> = <span class="hljs-function">() =&gt;</span> &#123;  win.<span class="hljs-property">document</span>.<span class="hljs-title function_">appendChild</span>(root);&#125;;</code></pre><p>å‚è€ƒé“¾æ¥ <a href="https://stackoverflow.com/questions/3255702/firefox-strange-behaviour-when-working-with-javascript-on-an-iframe">firefox ä¸å¥½ä½¿</a></p><p>ç„¶è€Œå† chrome ä¸Š src æ˜¯ about:blank å°±æ˜¯ä¸å†™ src çš„ onload ä¸ä¼šè¢«è§¦å‘</p><p>å…¼å®¹å¤„ç†</p><p>æ£€æµ‹æµè§ˆå™¨ç‰ˆæœ¬è¿™é‡Œç”¨ä¹‹å‰å†™çš„ is åº“åšå¤„ç†<a href="https://github.com/suxin2017/is/blob/master/src/platform/isFirefox.ts">is everything lib</a></p><p>è¿™ä¸ªçœ‹èµ·æ¥åº”è¯¥ç®—æ˜¯ chrome çš„ bug</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> post </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
            <tag> firefox </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æˆä¸ºæœ€å¥½çš„ç¨‹åºå‘˜çš„è¿·èŒ«</title>
      <link href="/2020/12/11/cheng-wei-zui-hao-de-cheng-xu-yuan-de-mi-mang/"/>
      <url>/2020/12/11/cheng-wei-zui-hao-de-cheng-xu-yuan-de-mi-mang/</url>
      
        <content type="html"><![CDATA[<p>å»å¹´çš„ 10 æœˆä»½æˆ‘å†™äº†<a href="https://www.cnblogs.com/qxhn/p/11768333.html#4457893">è‡´è¿·èŒ«çš„æˆ‘</a>ï¼Œå»å¹´çš„è¿™ä¸ªæ—¶å€™æˆ‘å°±å¾ˆè¿·èŒ«ã€‚</p><p>ä¼¼ä¹ä¸€åˆ°å¹´åº•æˆ‘å°±å¾ˆè¿·èŒ« :neckbeard:</p><p>ä¸è¿‡å»å¹´çš„è¿·èŒ«æ˜¯æ²¡æœ‰æ–¹å‘ï¼Œä¸çŸ¥å‰æ–¹çš„ç¯å¡”åœ¨ä½•æ–¹ï¼Œä»Šå¹´çš„è¿·èŒ«æ˜¯è™½è§è¿·é›¾ä¸­çš„äº®å…‰ï¼Œå´ä¸çŸ¥é“æ€æ ·å‰è¡Œã€‚</p><p>å»å¹´å¿ƒæƒ³å¦‚æœè¿›å¤§å‚å°±å¥½äº†ï¼Œä»Šå¹´å¦‚æ„¿è¿›å…¥äº†å¤§å‚ã€‚</p><p>å¾ˆé«˜å…´ä»äº‹ä¸€ä¸ªèƒ½è®©æˆ‘å–œæ¬¢çš„èŒä¸šï¼Œæˆ‘å–œæ¬¢ç¼–ç¨‹ã€‚</p><p>æˆ‘è§‰å¾—å†™ä»£ç çš„æ—¶å€™å°±å¥½åƒå†ç©æˆ‘çš„ä¸–ç•Œä¸€æ ·ï¼Œæˆä¸ºäº†è¿™ä¸ªä¸–ç•Œçš„é€ ç‰©ä¸»ï¼Œæ¯ä¸€ä¸ªç»†èŠ‚è‡ªå·±éƒ½å¯åˆ›é€ ã€‚</p><p>ä½†æ˜¯æˆ‘å´ä¸çŸ¥é“å¦‚ä½•æˆä¸ºæœ€å¥½çš„ç¨‹åºå‘˜ã€‚</p><h2 id="æˆä¸ºæœ€å¥½çš„ç¨‹åºå‘˜çš„è¿·èŒ«">æˆä¸ºæœ€å¥½çš„ç¨‹åºå‘˜çš„è¿·èŒ«</h2><p>æˆ‘ç»å¸¸åœ¨ç™¾åº¦ï¼Œè°·æ­ŒçŸ¥ä¹æœç´¢è¿™ä¸ªé—®é¢˜ï¼Œä¹Ÿæ—¶ä¸å¸¸çš„é—®èº«è¾¹äººã€‚</p><p>æœç´¢å‡ºçš„ç­”æ¡ˆå¾ˆç¬¦åˆç¨‹åºå‘˜çš„æ€ç»´<strong>æŠ½è±¡</strong>ï¼Œå¤ªæŠ½è±¡äº†ã€‚</p><p>æ ¸å¿ƒæ€æƒ³å°±æ˜¯ï¼šå¤šæ€å¤šæƒ³å¤šå­¦ä¹ ã€‚</p><p>ä½†æ˜¯å´æ²¡æœ‰ä¸€ä¸ªçœŸæ­£çš„æ•™ç¨‹ï¼Œå¦‚ä½•å¤šæ€å¤šæƒ³ï¼Œå»å­¦ä¹ ä»€ä¹ˆï¼Ÿ</p><p>è®¡ç®—æœºçš„ä¸–ç•Œæ€»æ¯”æƒ³è±¡ä¸­çš„å¤æ‚ï¼Œçœ¼ä¸­çœ‹åˆ°çš„çŸ¥è¯†ï¼Œå°±å¥½åƒå¤©ç©ºä¸­è½ä¸‹æ¥çš„ä¸€ç‰‡é›ªèŠ±ï¼Œç„¶åé›ªèŠ±å´æ˜¯ä»å†°å±±ä¸Šé£˜è½ä¸‹æ¥çš„ï¼Œå†°å±±ä¸‹é¢ä¾æ—§æœ‰ç€åºå¤§çš„æ ¹åŸºã€‚</p><p>ä»Šå¹´ç›¸æ¯”å»å¹´ï¼Œæˆ‘çœ‹äº†å¾ˆå¤šçš„æºç ã€‚</p><ul><li>çœ‹äº† axios çš„æºç å­¦åˆ°äº†æ‹¦æˆªå™¨æ€ä¹ˆå†™</li><li>çœ‹ umi request çš„æºç å­¦åˆ°äº† koa ä¸­é—´ä»¶å¦‚ä½•è®¾è®¡ã€‚</li><li>çœ‹äº† webpack çš„æºç æ²¡æƒ³åˆ°äº‹ä»¶å¤„ç†ä¼ é€’è¿˜æœ‰è¿™ä¹ˆå¤šç§ç©æ³• -çœ‹äº† bit æºç ï¼Œäº†è§£ä»–å¦‚ä½•å­˜å‚¨å’Œç‰ˆæœ¬ç®¡ç†</li><li>â€¦</li></ul><p>çœ‹äº†è¿™ä¹ˆå¤šæºç çš„ç›®çš„åªæ˜¯æƒ³æˆä¸ºæœ€å¥½çš„ç¨‹åºå‘˜</p><p>æœ‰äººè¯´ vim æ˜¯å¤§ç¥çš„å¿…å¤‡ç¥å™¨ï¼Œæˆ‘å¤§æ¦‚æ–­æ–­ç»­ç»­çš„æ¥è§¦ vim 2 å¹´äº†ã€‚</p><p>æœ€å¼€å§‹æˆ‘åªæ˜¯ç”¨ä»–ç®€å•çš„å¿«æ·é”®ï¼Œ<code>g</code> <code>i</code> <code>a</code> <code>c</code></p><p>åæ¥å­¦ä¹ åˆ°æ›´å¤šçš„å¿«æ·é”®ï¼Œç°åœ¨å¯¹äºå¸¸ç”¨çš„å¿«æ·é”®è¿˜ç®—ç†Ÿæ‚‰ã€‚</p><p>å‰ä¸€é˜µå­æˆ‘è§‰å¾—ç¼–è¾‘å™¨ä¸­çš„ vim æ’ä»¶æ²¡æœ‰å­¦åˆ° vim çš„ç²¾é«“ã€‚</p><p>æˆ‘å°±å¼€å§‹ç ”ç©¶ vim çš„é…ç½®ã€æ’ä»¶ï¼Œç¡®å® vim æ¯ä¸€ä¸ªç•Œé¢ä¸Šçš„æ“ä½œéƒ½å¯ä»¥æ˜ å°„æˆä¸ºä¸€ä¸ªå‘½ä»¤ï¼Œè¿™åº”è¯¥å°±æ˜¯ Unix å“²å­¦å§ã€‚</p><p>ä¸è¿‡æˆ‘è¿˜æ˜¯æ”¾å¼ƒäº†ï¼Œå› ä¸ºæˆ‘å‘ç° vim çš„ä»£ç æç¤ºå¤ªåƒåœ¾äº†ï¼Œè€Œä¸”åº•å±‚ç”¨çš„ç«Ÿç„¶ä¹Ÿæ˜¯ TSServer å’Œ vscode ä¸€æ ·ï¼Œå¹¶ä¸”å…¶ä»–ä»£ç æç¤ºéµå¾ª<a href="https://microsoft.github.io/language-server-protocol/">LSP</a>çš„è§„èŒƒï¼Œ</p><p>ç”šè‡³æœ‰æ’ä»¶(coc)å®£ä¼ æ˜¯</p><pre><code class="hljs">configured <span class="hljs-keyword">like</span> VSCode, extensions <span class="hljs-keyword">work</span> <span class="hljs-keyword">like</span> <span class="hljs-keyword">in</span> VSCode</code></pre><p>æ—¢ç„¶å¤§å®¶éƒ½å¼€å§‹åƒ vscode å­¦ä¹ ï¼Œè¯´æ˜é£å£æ˜¯ vim çš„æ—¶ä»£å·²ç»è¿‡å»äº†ã€‚</p><p>å¹¶ä¸”æˆ‘å‘ç°ä¼šäº† vim å¹¶ä¸èƒ½æˆä¸ºæœ€å¥½çš„ç¨‹åºå‘˜ï¼Œä¸è¿‡ vim å¿«æ·é”®ç¡®å®å¾ˆèˆ’æœã€‚</p><p>å¬è¯´æ¯ä¸ªä¼˜ç§€çš„ç¨‹åºå‘˜éƒ½æœ‰è‡ªå·±çš„åšå®¢ç«™ç‚¹ï¼Œäºæ˜¯æˆ‘ç‹ å¿ƒæäº†å°æœåŠ¡å™¨ï¼Œæ­å»ºèµ·äº†è‡ªå·±çš„åšå®¢ã€‚</p><p>å®šæœŸåšçŸ¥è¯†è¾“å‡ºï¼Œå…¶å®å†™æ–‡ç« ä¹Ÿæ˜¯è›®ç´¯çš„ï¼Œæ¯æ¬¡å†™ä¸€ç¯‡æ–‡ç« éƒ½éœ€è¦é€šè¿‡ä»£ç å»è®ºè¿°ç›´è§‚çš„è¡¨ç°å½¢å¼ã€‚</p><p>ä¸è¿‡è¿˜å¥½ï¼Œè™½ç„¶æ²¡å®šæœŸæ›´æ–°ï¼Œä½†æ˜¯æˆ‘çš„æ–‡ç« å¥½åƒä¹Ÿä¸å°‘äº†ï¼Œæ„å¤–å‘ç°æœç´¢ suxin2017 ä¹Ÿèƒ½æ‰¾åˆ°æˆ‘çš„ github å’Œåšå®¢å›­ã€‚</p><p>è™½ç„¶ä»£ç é‡éšç€æ—¶é—´çº¿æ€§å¢åŠ ï¼Œä¹¦éšç€æ—¶é—´çœ‹çš„è¶Šæ¥è¶Šå¤šï¼Œä½†æ˜¯æˆ‘ä»ç„¶è¿˜æ˜¯æœ€åˆçš„æˆ‘ï¼Œç¦»æœ€å¥½çš„ç¨‹åºå‘˜ç›¸å·®åƒä¸‡é‡Œã€‚</p><p>ä¹¦çœ‹çš„å¾ˆå¤šï¼ŒçŸ¥è¯†å…¶å®æ²¡è®°ä½å¤šå°‘ã€‚</p><p>æœ€è¿‘çœ‹å®Œ opencv çš„ä¸€æœ¬ä¹¦ï¼ŒåŸºæœ¬ä¸Šä»£ç éƒ½æ•²äº†ä¸€éï¼Œä½†æ˜¯è‡ªå·±ç”¨çš„æ—¶å€™è¿˜æ˜¯æ— ä»ä¸‹æ‰‹ï¼Œä¹‹å‰çš„ç®—æ³•ï¼Œè®¾è®¡æ¨¡å¼ä¹Ÿæ˜¯è¿™æ ·ã€‚</p><p>äºæ˜¯ä¹æˆ‘æ€€ç–‘æˆ‘çš„å­¦ä¹ æ–¹æ³•å­˜åœ¨é—®é¢˜ï¼Œæˆ–è€…è¯´è®¡ç®—æœºç±»å›¾ä¹¦å¤§å¤šæ˜¯å·¥å…·ä¹¦ï¼Œå°±åƒå­—å…¸ä¸€æ ·çš„ä¹¦ã€‚</p><p>ç¿»ä¸€éå­—å…¸ä¸è§å¾—èƒ½æŠŠæ‰€æœ‰æ–‡å­—è®°ä½ï¼Œå¸¸ç”¨çš„è¿˜æ˜¯é‚£ 2000-3000 å­—ä¸€æ ·ã€‚</p><p>æˆ‘ä»ç„¶åœ¨åšä¸€äº›æ²¡ä»€ä¹ˆæ„ä¹‰çš„äº‹æƒ…ï¼Œä¸è¿‡ä¹Ÿä¸ç®—å®Œå…¨æ²¡æ„ä¹‰ã€‚</p><p>å°±åƒæˆ‘ä¹‹å‰åœ¨ç®€ä¹¦ã€åšå®¢å›­å†™ä¸œè¥¿ä¸€æ ·ï¼Œä»€ä¹ˆä¹Ÿä¸å›¾ï¼Œå°±æ˜¯æƒ³é‚£ä¹ˆåšï¼Œå†™å‡ºæ¥äº†å°±æ˜¯å¾ˆæœ‰æˆå°±æ„Ÿã€‚</p><p>å¤§å­¦æ—¶å€™ä¹Ÿæ˜¯è¿™æ ·ä¹±æ’ï¼Œæçˆ¬è™«ï¼Œæ jsï¼Œæ qq æœºå™¨äººæ’ä»¶ã€‚</p><p>ç°åœ¨æˆ‘æåšå®¢ï¼ŒææœåŠ¡å™¨ï¼Œæè‡ªå·±çš„ç©å…·é¡¹ç›®ã€‚</p><p>æˆ‘è¿˜æ˜¯æ›¾ç»é‚£ä¸ªå°‘å¹´æ²¡æœ‰ä¸€ä¸ä¸æ”¹å˜ã€‚:joy:</p><p>ä½†æ˜¯å¦‚ä½•èƒ½æˆä¸ºæœ€å¥½çš„ç¨‹åºå‘˜å‘¢ï¼Ÿæˆ‘è¿˜æ˜¯ä¸çŸ¥é“ï¼Œæˆ‘è¿˜æ˜¯æ²¡æœ‰æ–¹å‘ï¼Œä¾æ—§è¿·èŒ«ã€‚</p><p>ä¹Ÿè®¸æœ€å¥½çš„ç¨‹åºå‘˜æ‹¿ç€ 01 é”®ç›˜ç–¯ç‹‚è¾“å‡ºã€‚</p><p>ä¹Ÿè®¸æœ€å¥½çš„ç¨‹åºå‘˜éšéšä¾¿ä¾¿å°±è¾“å‡ºå„ç§è®¾è®¡æ¨¡å¼ã€‚</p><p>ä¹Ÿè®¸æœ€å¥½çš„ç¨‹åºå‘˜å¯ä»¥åˆ›é€ æ‰€æœ‰è½®å­ã€‚</p><p>ä¹Ÿè®¸â€¦æœ‰ä¸€å¤©æˆ‘å¯èƒ½æˆä¸ºæœ€å¥½çš„ç¨‹åºå‘˜ã€‚</p><p>è™½ç„¶ä»€ä¹ˆæ˜¯æœ€å¥½çš„ç¨‹åºå‘˜æˆ‘è¯´ä¸å¥½ï¼Œæ€ä¹ˆæˆä¸ºæœ€å¥½çš„ç¨‹åºå‘˜æˆ‘ä¹Ÿä¸çŸ¥é“ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ„Ÿæ‚Ÿ </category>
          
          <category> post </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äººç”Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å½“tabä¸æ´»è·ƒæ—¶å€™æ€æ ·æä¸€ä¸ªå®šæ—¶å™¨</title>
      <link href="/2020/12/06/dang-tab-bu-huo-yue-shi-hou-de-settimeout/"/>
      <url>/2020/12/06/dang-tab-bu-huo-yue-shi-hou-de-settimeout/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ps: ä¸‹é¢çš„è„šæœ¬ä½¿ç”¨äº† script module è¯·æ‰“å¼€åŸæ–‡æˆ–è€…ä½¿ç”¨é IE æµè§ˆå™¨æµè§ˆ</p></blockquote><script  id="common"></script><h2 id="setTimeout-å½“-tab-ä¸æ´»è·ƒæ—¶å€™">setTimeout å½“ tab ä¸æ´»è·ƒæ—¶å€™</h2><p>å½“ tab ä¸æ´»è·ƒçš„æ—¶å€™ï¼ŒsetTimeout å’Œ setInterval çš„è¿è¡Œæ—¶é—´å‡ºç°å»¶è¿Ÿ</p><p>å½“æœªè¢«æ¿€æ´»çš„ tabs çš„ setInterval çš„æœ€å°å»¶è¿Ÿ&gt;=1000ms.æµè§ˆå™¨è¿™æ ·åšçš„åŸå› æ˜¯ä¸ºäº†çœç”µ.</p><p>ç‚¹å‡»ä¸‹é¢æŒ‰é’®ï¼Œç½‘é¡µçš„ document title ä¼šæ•°å­—ç›¸åŠ ï¼Œé—ªçƒé—´éš”ä¸º 500ms,å½“ tab åˆ‡æ¢ä¸ºå…¶ä»– tab çš„æ—¶å€™å°±ä¼šå˜æ…¢</p><p><button id="setTimeout" >å¼€å¯å®šæ—¶å™¨</button></p><pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;module&quot;</span>&gt;</span><span class="language-javascript">  <span class="hljs-keyword">let</span> button = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;setTimeout&quot;</span>);  <span class="hljs-keyword">let</span> id;  <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;  <span class="hljs-keyword">let</span> flag = <span class="hljs-literal">true</span>;  button.<span class="hljs-property">onclick</span> = <span class="hljs-function">() =&gt;</span> &#123;    <span class="hljs-keyword">if</span> (flag) &#123;      button.<span class="hljs-property">innerText</span> = <span class="hljs-string">&quot;å…³é—­å®šæ—¶å™¨&quot;</span>;      id = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> &#123;        <span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span> = <span class="hljs-string">`<span class="hljs-subst">$&#123;count++&#125;</span> setInterval`</span>;      &#125;, <span class="hljs-number">500</span>);      flag = !flag;    &#125; <span class="hljs-keyword">else</span> &#123;      button.<span class="hljs-property">innerText</span> = <span class="hljs-string">&quot;å¼€å¯å®šæ—¶å™¨&quot;</span>;      <span class="hljs-built_in">clearInterval</span>(id);      flag = !flag;    &#125;  &#125;;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre><script type="module">    let button = document.getElementById("setTimeout");    let id;    let count = 0;    let flag = true;    button.onclick = ()=>{        if(flag){            button.innerText = "å…³é—­å®šæ—¶å™¨"            id = setInterval(()=>{                document.title = `${count++} setInterval`;            },500);            flag = !flag        }else{            button.innerText = "å¼€å¯å®šæ—¶å™¨"            clearInterval(id);            flag = !flag        }    }</script><h2 id="requrestAnimationFrameAPI-å½“-tab-ä¸æ´»è·ƒæ—¶å€™">requrestAnimationFrameAPI å½“ tab ä¸æ´»è·ƒæ—¶å€™</h2><p>requrestAnimationFrameAPI å½“ tab ä¸æ´»è·ƒæ—¶å€™ï¼Œæ‰§è¡Œä¼šè¢«æš‚åœ<br>æ³¨æ„ requrestAnimationFrameAPI åªæ˜¯èƒ½å¤Ÿæ»¡è¶³ 1 ç§’ 60 å¸§ï¼Œæ‰€ä»¥ä¼šå’Œæ¯” setTimeout æ…¢ä¸€äº›</p><p><button id="requestAnimation">å¼€å¯ requestAnimation å®šæ—¶å™¨</button></p><pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;module&quot;</span>&gt;</span><span class="language-javascript">  <span class="hljs-keyword">const</span> timerList = &#123;&#125;;  <span class="hljs-keyword">function</span> <span class="hljs-title function_">setRafTimeout</span>(<span class="hljs-params">cb, time</span>) &#123;    <span class="hljs-keyword">const</span> timer = &#123;      <span class="hljs-attr">id</span>: -<span class="hljs-number">1</span>,      <span class="hljs-attr">start</span>: -<span class="hljs-number">1</span>,      cb,    &#125;;    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleNextTick</span> = (<span class="hljs-params">timestamp</span>) =&gt; &#123;      <span class="hljs-keyword">if</span> (timer.<span class="hljs-property">start</span> === -<span class="hljs-number">1</span>) &#123;        timer.<span class="hljs-property">start</span> = timestamp;      &#125;      <span class="hljs-keyword">const</span> elapsed = timestamp - timer.<span class="hljs-property">start</span>;      <span class="hljs-keyword">if</span> (!time || elapsed &gt; time) &#123;        <span class="hljs-title function_">cb</span>();        <span class="hljs-title function_">clearRafTimeout</span>(id);      &#125; <span class="hljs-keyword">else</span> &#123;        timer.<span class="hljs-property">id</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">requestAnimationFrame</span>(handleNextTick);      &#125;    &#125;;    <span class="hljs-keyword">const</span> id = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">requestAnimationFrame</span>(handleNextTick);    timer.<span class="hljs-property">id</span> = id;    timerList[id] = timer;    <span class="hljs-keyword">return</span> id;  &#125;  <span class="hljs-keyword">function</span> <span class="hljs-title function_">clearRafTimeout</span>(<span class="hljs-params">id</span>) &#123;    <span class="hljs-keyword">const</span> timer = timerList[id];    <span class="hljs-keyword">if</span> (timer) &#123;      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">cancelAnimationFrame</span>(timer.<span class="hljs-property">id</span>);      <span class="hljs-keyword">delete</span> timerList[id];    &#125;  &#125;  <span class="hljs-keyword">let</span> intervalList = &#123;&#125;;  <span class="hljs-keyword">function</span> <span class="hljs-title function_">setRafInterval</span>(<span class="hljs-params">cb, time</span>) &#123;    <span class="hljs-keyword">let</span> intervalId = <span class="hljs-title function_">setRafTimeout</span>(<span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params"></span>) &#123;      <span class="hljs-keyword">if</span> (!intervalList[intervalId]) <span class="hljs-keyword">return</span>;      <span class="hljs-title function_">cb</span>();      <span class="hljs-title function_">clearRafTimeout</span>(intervalList[intervalId]);      intervalList[intervalId] = <span class="hljs-title function_">setRafTimeout</span>(fn, time);    &#125;, time);    intervalList[intervalId] = intervalId;    <span class="hljs-keyword">return</span> intervalId;  &#125;  <span class="hljs-keyword">function</span> <span class="hljs-title function_">clearRafInterval</span>(<span class="hljs-params">id</span>) &#123;    <span class="hljs-keyword">const</span> timer = intervalList[id];    <span class="hljs-keyword">if</span> (timer) &#123;      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">cancelAnimationFrame</span>(timer);      <span class="hljs-keyword">delete</span> intervalList[id];      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(timer, id, intervalList);    &#125;  &#125;  <span class="hljs-keyword">let</span> requestButton = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;requestAnimation&quot;</span>);  <span class="hljs-keyword">let</span> requestId;  <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;  <span class="hljs-keyword">let</span> flag1 = <span class="hljs-literal">true</span>;  requestButton.<span class="hljs-property">onclick</span> = <span class="hljs-function">() =&gt;</span> &#123;    <span class="hljs-keyword">if</span> (flag1) &#123;      requestButton.<span class="hljs-property">innerText</span> = <span class="hljs-string">&quot;å…³é—­requestAnimationå®šæ—¶å™¨&quot;</span>;      requestId = <span class="hljs-title function_">setRafInterval</span>(<span class="hljs-function">() =&gt;</span> &#123;        <span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span> = <span class="hljs-string">`<span class="hljs-subst">$&#123;count++&#125;</span> requestAnimation`</span>;      &#125;, <span class="hljs-number">1000</span>);      flag1 = !flag1;    &#125; <span class="hljs-keyword">else</span> &#123;      requestButton.<span class="hljs-property">innerText</span> = <span class="hljs-string">&quot;å¼€å¯requestAnimationå®šæ—¶å™¨&quot;</span>;      <span class="hljs-title function_">clearRafInterval</span>(requestId);      flag1 = !flag1;    &#125;  &#125;;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre><script type="module">const timerList = {};function setRafTimeout(cb, time) {    const timer = {        id: -1,        start: -1,        cb,    };    const handleNextTick = (timestamp) => {        if (timer.start === -1) {            timer.start = timestamp;        }        const elapsed = timestamp - timer.start;        if (!time || elapsed > time) {            cb();            clearRafTimeout(id);        } else {            timer.id = window.requestAnimationFrame(handleNextTick);        }    };    const id = window.requestAnimationFrame(handleNextTick);    timer.id = id;    timerList[id] = timer;    return id;}function clearRafTimeout(id ) {    const timer = timerList[id];    if (timer) {        window.cancelAnimationFrame(timer.id);        delete timerList[id];    }} let intervalList = {};function setRafInterval(cb,time){    let intervalId = setRafTimeout(function fn(){        if(!intervalList[intervalId])return;        cb();        clearRafTimeout(intervalList[intervalId])        intervalList[intervalId] = setRafTimeout(fn,time);    },time)    intervalList[intervalId] = intervalId;    return intervalId;}function clearRafInterval(id){    const timer = intervalList[id];    if (timer) {        window.cancelAnimationFrame(timer);        delete intervalList[id];        console.log(timer,id,intervalList)    }}    let requestButton = document.getElementById("requestAnimation");    let requestId;    let count = 0;    let flag1 = true;    requestButton.onclick = ()=>{        if(flag1){            requestButton.innerText = "å…³é—­requestAnimationå®šæ—¶å™¨"            requestId = setRafInterval(()=>{                document.title = `${count++} requestAnimation`;            },1000);            flag1 = !flag1        }else{            requestButton.innerText = "å¼€å¯requestAnimationå®šæ—¶å™¨"            clearRafInterval(requestId);            flag1 = !flag1        }    }</script><h2 id="WebWorker">WebWorker</h2><p>webworker ä¸ä¼šå—æµè§ˆå™¨åˆ‡æ¢ tab å½±å“ï¼Œèƒ½å¤Ÿæ­£å¸¸è¿è¡Œ</p><p><button id="webwork">å¼€å¯ WebWorker å®šæ—¶å™¨</button></p><pre><code class="hljs"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;module&quot;</span>&gt;</span><span class="language-javascript">  <span class="hljs-keyword">let</span> blob = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([    <span class="hljs-string">`    let timer;    onmessage = (&#123;data:flag&#125;)=&gt;&#123;        console.log(&quot;æ”¶åˆ°message&quot;,flag)        if(!flag)&#123;            clearInterval(timer);        &#125;else&#123;           timer = setInterval(function() &#123; postMessage(&#x27;&#x27;); &#125;, 500);        &#125;    &#125;    `</span>,  ]);  <span class="hljs-keyword">let</span> url = <span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span>.<span class="hljs-title function_">createObjectURL</span>(blob);  <span class="hljs-keyword">var</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(url);  <span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span>.<span class="hljs-title function_">revokeObjectURL</span>(blob);  <span class="hljs-keyword">let</span> workerButton = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;webwork&quot;</span>);  <span class="hljs-keyword">let</span> requestId;  <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;  <span class="hljs-keyword">let</span> flag1 = <span class="hljs-literal">true</span>;  worker.<span class="hljs-property">onmessage</span> = <span class="hljs-function">() =&gt;</span> &#123;    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(count, <span class="hljs-string">&quot;123&quot;</span>);    <span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span> = <span class="hljs-string">`<span class="hljs-subst">$&#123;count++&#125;</span> WebWorker`</span>;  &#125;;  workerButton.<span class="hljs-property">onclick</span> = <span class="hljs-function">() =&gt;</span> &#123;    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(flag1);    <span class="hljs-keyword">if</span> (flag1) &#123;      workerButton.<span class="hljs-property">innerText</span> = <span class="hljs-string">&quot;å…³é—­web workå®šæ—¶å™¨&quot;</span>;    &#125; <span class="hljs-keyword">else</span> &#123;      workerButton.<span class="hljs-property">innerText</span> = <span class="hljs-string">&quot;å¼€å¯web workå®šæ—¶å™¨&quot;</span>;    &#125;    worker.<span class="hljs-title function_">postMessage</span>(flag1);    flag1 = !flag1;  &#125;;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre><script type="module">    let blob = new Blob([`    let timer;    onmessage = ({data:flag})=>{        console.log("æ”¶åˆ°message",flag)        if(!flag){            clearInterval(timer);        }else{           timer = setInterval(function() { postMessage(''); }, 500);         }    }    `]);    let url = window.URL.createObjectURL(blob);    var worker = new Worker(url);    window.URL.revokeObjectURL(blob)    let workerButton = document.getElementById("webwork");    let requestId;    let count = 0;    let flag1 = true;    worker.onmessage = ()=>{    console.log(count,'123')        document.title = `${count++} WebWorker`;    }    workerButton.onclick = ()=>{        console.log(flag1)        if(flag1){            workerButton.innerText = "å…³é—­web workå®šæ—¶å™¨"        }else{            workerButton.innerText = "å¼€å¯web workå®šæ—¶å™¨"        }        worker.postMessage(flag1);        flag1 = !flag1    }</script>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> post </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
            <tag> setTimeout </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>opencv å¸¸ç”¨å¯¹è±¡</title>
      <link href="/2020/11/22/opencv-chang-yong-dui-xiang/"/>
      <url>/2020/11/22/opencv-chang-yong-dui-xiang/</url>
      
        <content type="html"><![CDATA[<h2 id="åˆ›å»ºMatå¯¹è±¡çš„æ–¹æ³•">åˆ›å»ºMatå¯¹è±¡çš„æ–¹æ³•</h2><ul><li>æ„é€ å‡½æ•°Mat()</li></ul><pre><code class="hljs"><span class="hljs-function">Mat <span class="hljs-title">M</span><span class="hljs-params">(<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,CV_8UC3,Scalar(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">255</span>))</span></span>;cout &lt;&lt; <span class="hljs-string">&quot;M = &quot;</span> &lt;&lt; M &lt;&lt; endl;<span class="hljs-comment">// output</span><span class="hljs-comment">//  M = [  0,   0, 255,   0,   0, 255;</span><span class="hljs-comment">//   0,   0, 255,   0,   0, 255]</span></code></pre><p>è¿™æ®µä»£ç åˆ›å»ºäº†2*2çš„æ ‡é‡(Scalar)ï¼ˆåªæœ‰å¤§å°æ²¡æœ‰æ–¹å‘ï¼‰[0,255,255]</p><p>CV_8UC3 è¡¨ç¤º unsigned char ç±»å‹<br>char æ˜¯ä¸€ä¸ªå­—èŠ‚ -128-127<br>unsigned æ˜¯ 0-255</p><ul><li>é€šè¿‡æ„é€ å‡½æ•°</li></ul><pre><code class="hljs"><span class="hljs-type">int</span> sz[<span class="hljs-number">3</span>] = &#123;<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>&#125;;<span class="hljs-function">Mat <span class="hljs-title">L</span><span class="hljs-params">(<span class="hljs-number">3</span>,sz,CV_8UC,Scalar::all(<span class="hljs-number">0</span>))</span></span>;cout &lt;&lt; M &lt;&lt; endl;<span class="hljs-comment">// error è¾“å‡ºä¼šæŠ¥é”™</span></code></pre><p>Scalar::all(0) ä¼šè¿”å›ä¸€ä¸ª<code>[0,0,0,0]</code></p><p>æ„é€ å‡½æ•°æœ‰ç‚¹å¤šç”¨åˆ°ä¸€ä¸ªå†å†™ä¸€ä¸ªå§ã€‚</p><h2 id="æ ¼å¼åŒ–è¾“å‡º">æ ¼å¼åŒ–è¾“å‡º</h2><p>ç›´æ¥ç”¨pythonæ ¼å¼çš„ï¼Œå› ä¸ºå¾ˆèˆ’æœ</p><pre><code class="hljs"> <span class="hljs-function">Mat <span class="hljs-title">r</span><span class="hljs-params">(<span class="hljs-number">10</span>,<span class="hljs-number">4</span>,CV_8UC3)</span></span>;<span class="hljs-built_in">randu</span>(r,Scalar::<span class="hljs-built_in">all</span>(<span class="hljs-number">0</span>),Scalar::<span class="hljs-built_in">all</span>(<span class="hljs-number">255</span>));cout&lt;&lt; format(r,Formatter::FMT_PYTHON) &lt;&lt; endl;<span class="hljs-comment">//output </span>[[[ <span class="hljs-number">91</span>,   <span class="hljs-number">2</span>,  <span class="hljs-number">79</span>], [<span class="hljs-number">179</span>,  <span class="hljs-number">52</span>, <span class="hljs-number">205</span>], [<span class="hljs-number">236</span>,   <span class="hljs-number">8</span>, <span class="hljs-number">181</span>]], [[<span class="hljs-number">239</span>,  <span class="hljs-number">26</span>, <span class="hljs-number">248</span>], [<span class="hljs-number">207</span>, <span class="hljs-number">218</span>,  <span class="hljs-number">45</span>], [<span class="hljs-number">183</span>, <span class="hljs-number">158</span>, <span class="hljs-number">101</span>]], [[<span class="hljs-number">102</span>,  <span class="hljs-number">18</span>, <span class="hljs-number">118</span>], [ <span class="hljs-number">68</span>, <span class="hljs-number">210</span>, <span class="hljs-number">139</span>], [<span class="hljs-number">198</span>, <span class="hljs-number">207</span>, <span class="hljs-number">211</span>]], [[<span class="hljs-number">181</span>, <span class="hljs-number">162</span>, <span class="hljs-number">197</span>], [<span class="hljs-number">191</span>, <span class="hljs-number">196</span>,  <span class="hljs-number">40</span>], [  <span class="hljs-number">7</span>, <span class="hljs-number">243</span>, <span class="hljs-number">230</span>]], [[ <span class="hljs-number">45</span>,   <span class="hljs-number">6</span>,  <span class="hljs-number">48</span>], [<span class="hljs-number">173</span>, <span class="hljs-number">242</span>, <span class="hljs-number">125</span>], [<span class="hljs-number">175</span>,  <span class="hljs-number">90</span>,  <span class="hljs-number">63</span>]], [[ <span class="hljs-number">90</span>,  <span class="hljs-number">22</span>, <span class="hljs-number">112</span>], [<span class="hljs-number">221</span>, <span class="hljs-number">167</span>, <span class="hljs-number">224</span>], [<span class="hljs-number">113</span>, <span class="hljs-number">208</span>, <span class="hljs-number">123</span>]], [[<span class="hljs-number">214</span>,  <span class="hljs-number">35</span>, <span class="hljs-number">229</span>], [  <span class="hljs-number">6</span>, <span class="hljs-number">143</span>, <span class="hljs-number">138</span>], [ <span class="hljs-number">98</span>,  <span class="hljs-number">81</span>, <span class="hljs-number">118</span>]], [[<span class="hljs-number">187</span>, <span class="hljs-number">167</span>, <span class="hljs-number">140</span>], [<span class="hljs-number">218</span>, <span class="hljs-number">178</span>,  <span class="hljs-number">23</span>], [ <span class="hljs-number">43</span>, <span class="hljs-number">133</span>, <span class="hljs-number">154</span>]], [[<span class="hljs-number">150</span>,  <span class="hljs-number">76</span>, <span class="hljs-number">101</span>], [  <span class="hljs-number">8</span>,  <span class="hljs-number">38</span>, <span class="hljs-number">238</span>], [ <span class="hljs-number">84</span>,  <span class="hljs-number">47</span>,   <span class="hljs-number">7</span>]], [[<span class="hljs-number">117</span>, <span class="hljs-number">246</span>, <span class="hljs-number">163</span>], [<span class="hljs-number">237</span>,  <span class="hljs-number">69</span>, <span class="hljs-number">129</span>], [ <span class="hljs-number">60</span>, <span class="hljs-number">101</span>,  <span class="hljs-number">41</span>]]]</code></pre><p>#å¸¸ç”¨æ•°æ®ç»“æ„</p><ul><li>ç‚¹ Point</li></ul><pre><code class="hljs"><span class="hljs-comment">// äºŒç»´</span><span class="hljs-function">Point2f <span class="hljs-title">p</span><span class="hljs-params">(<span class="hljs-number">6</span>,<span class="hljs-number">2</span>)</span></span>;<span class="hljs-comment">// ä¸‰ç»´</span><span class="hljs-function">Point3f <span class="hljs-title">p3</span><span class="hljs-params">(<span class="hljs-number">6</span>,<span class="hljs-number">2</span>,<span class="hljs-number">5</span>)</span></span>;<span class="hljs-comment">// output </span>[<span class="hljs-number">6</span>,<span class="hljs-number">2</span>][<span class="hljs-number">6</span>,<span class="hljs-number">2</span>,<span class="hljs-number">5</span>]</code></pre><ul><li>å‘é‡ vector</li></ul><p>å’Œæ•°ç»„å·®ä¸å¤š</p><pre><code class="hljs">vector&lt;<span class="hljs-type">float</span>&gt; v;v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">3</span>);v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">5</span>);v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">7</span>);cout &lt;&lt; <span class="hljs-built_in">Mat</span>(v) &lt;&lt; endl;<span class="hljs-comment">//output</span>[<span class="hljs-number">3</span>; <span class="hljs-number">5</span>; <span class="hljs-number">7</span>]</code></pre><p>è¿™ä¸ªvector æ˜¯æ ‡å‡†åº“çš„å‘é‡ï¼Œå¯ä»¥è‡ªåŠ¨æ”¹å˜è‡ªå·±çš„é•¿åº¦</p><ul><li>é¢œè‰² Scalar</li></ul><p>Scalar æ˜¯ä¸€ä¸ªå››ä¸ªå…ƒç´ çš„æ•°ç»„</p><pre><code class="hljs"><span class="hljs-function">Scalar <span class="hljs-title">s</span><span class="hljs-params">(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)</span></span>;<span class="hljs-comment">//å¯ä»¥æ˜¯</span><span class="hljs-type">int</span> r = <span class="hljs-number">255</span>,g=<span class="hljs-number">0</span>,b=<span class="hljs-number">0</span>;<span class="hljs-built_in">Scalar</span>(r,g,b);</code></pre><ul><li>å¤§å° Size</li></ul><p>width å’Œ height</p><pre><code class="hljs"><span class="hljs-type">int</span> width = <span class="hljs-number">100</span>, height = <span class="hljs-number">200</span>;<span class="hljs-built_in">Size</span>(width, height);</code></pre><ul><li>çŸ©å½¢ Rect</li></ul><pre><code class="hljs"><span class="hljs-type">int</span> x = <span class="hljs-number">0</span>, y = <span class="hljs-number">0</span>,width = <span class="hljs-number">200</span>, height = <span class="hljs-number">200</span>;<span class="hljs-function">Rect <span class="hljs-title">rect1</span><span class="hljs-params">(x, y, width, height)</span></span>;<span class="hljs-function">Rect <span class="hljs-title">rect2</span><span class="hljs-params">(x + <span class="hljs-number">50</span>, y + <span class="hljs-number">50</span>, width, height)</span></span>;<span class="hljs-comment">// çŸ©å½¢äº¤é›†</span>Rect rect = rect1 &amp; rect2;<span class="hljs-comment">// output</span>[<span class="hljs-number">150</span> x <span class="hljs-number">150</span> <span class="hljs-built_in">from</span> (<span class="hljs-number">50</span>, <span class="hljs-number">50</span>)]<span class="hljs-comment">// çŸ©å½¢å¹¶é›†</span>Rect rect = rect1 | rect2;[<span class="hljs-number">250</span> x <span class="hljs-number">250</span> <span class="hljs-built_in">from</span> (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)]<span class="hljs-comment">// ç§»åŠ¨çŸ©å½¢</span><span class="hljs-function">Point2f <span class="hljs-title">point</span><span class="hljs-params">(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>)</span></span>;Rect rectShift = rect + point;<span class="hljs-comment">// æ·»åŠ </span>Rect rectShift = rect1 - <span class="hljs-built_in">Size</span>(<span class="hljs-number">20</span>,<span class="hljs-number">20</span>);<span class="hljs-comment">//output</span>[<span class="hljs-number">180</span> x <span class="hljs-number">180</span> <span class="hljs-built_in">from</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)]<span class="hljs-comment">//  ç§»åŠ¨</span>Rect rectShift = rect1 - <span class="hljs-built_in">Point</span>(<span class="hljs-number">20</span>,<span class="hljs-number">20</span>);<span class="hljs-comment">// output</span>[<span class="hljs-number">200</span> x <span class="hljs-number">200</span> <span class="hljs-built_in">from</span>(<span class="hljs-number">-20</span>, <span class="hljs-number">-20</span>)]</code></pre><ul><li>é¢œè‰²ç©ºé—´è½¬æ¢ cvtColor</li></ul><p>void cvtColor(InputArray src, OutputArray output ,int code, int dstCn=0);</p><p>å¸¸ç”¨é¢œè‰²</p><ul><li>RGB</li><li>HSV è‰²è°ƒ é¥±å’Œåº¦ æ˜åº¦</li><li>HLS è‰²è°ƒ äº®åº¦ é¥±å’Œåº¦</li><li>Gray ç°åº¦</li><li>5X5 5X5é¢œè‰²çŸ©é˜µï¼Œå¼€å‘æ¿</li><li>YCrCb(YUV)  Y æ˜äº®åº¦ Uå’ŒVè‰²åº¦ï¼Œæè¿°è‰²å½©åŠé¥±å’Œåº¦ JPEGä¼šç”¨</li><li>CIE L<em>a</em>b  L äº®åº¦ a å’Œ b è‰²å½©å¯¹ç«‹å”¯ç‹¬</li><li>CIE L<em>u</em>v  æœªçŸ¥</li><li>Bayer æ‹œå°”æ»¤è‰²é•œ å¤šç”¨äºæ•°å­—å›¾åƒä¼ æ„Ÿå™¨</li><li>YUV420 YUVçš„ä¸€ç§<br>å¸¸é‡éƒ½åœ¨COLOR_XXX2XXX å®šä¹‰</li></ul><blockquote><p>ps: OpenCV é»˜è®¤å›¾ç‰‡é€šé“å­˜å‚¨å­™æ—­æ˜¯BGRå³è“ç»¿çº¢ï¼Œè€Œä¸æ˜¯RGB</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> post </category>
          
      </categories>
      
      
        <tags>
            
            <tag> opencv </tag>
            
            <tag> C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jest mock XMLHttpRequest</title>
      <link href="/2020/11/20/jest-mock/"/>
      <url>/2020/11/20/jest-mock/</url>
      
        <content type="html"><![CDATA[<h2 id="åœºæ™¯">åœºæ™¯</h2><p>è¦å¼€å‘ä¸€ä¸ªsdkéœ€è¦è¯·æ±‚ç½‘ç»œï¼Œéœ€è¦åœ¨æœ¬åœ°è¿æ¥è¿œç«¯sdkï¼Œè¿™æ—¶å€™æœ‰ä¸¤ç§æ–¹å¼å»æ¨¡æ‹Ÿè¿™ç§è¡Œä¸ºã€‚</p><ul><li>æµ‹è¯•æ—¶å€™é€šè¿‡æœ¬åœ°ä»£ç†ï¼Œåšæ¥å£è½¬å‘</li><li>é€šè¿‡jestç›´æ¥mock xhrå¯¹è±¡ï¼Œè®©å…¶è¿”å›ä¸€å®šæ˜¯é‚£ä¸ªæ•°æ®æ ¼å¼</li></ul><p>å¯¹äºç¬¬ä¸€ç§æ¥è¯´ï¼Œè¿˜éœ€è¦æ›´å¤šçš„æ¥å£ä¿¡æ¯ï¼Œä¾èµ–åç«¯çš„é€»è¾‘åˆ¤æ–­ï¼Œä¸ºäº†sdkä¾èµ–æ›´å°ï¼Œæˆ‘é€‰æ‹©ç›´æ¥ä½¿ç”¨mockçš„æ–¹å¼ã€‚</p><h2 id="jest-mockä¸€ä¸ªå®ä¾‹">jest mockä¸€ä¸ªå®ä¾‹</h2><p>jest</p><pre><code class="hljs"><span class="hljs-comment">// jest.mock(implementation)æ˜¯ jest.fn().mockImplementation(implementation)</span><span class="hljs-comment">// ç¼©å†™</span><span class="hljs-variable language_">global</span>.<span class="hljs-property">XMLHttpRequest</span> = jest.<span class="hljs-title function_">fn</span>().<span class="hljs-title function_">mockImplementation</span>(<span class="hljs-function">()=&gt;</span>&#123;    <span class="hljs-keyword">return</span> &#123;        <span class="hljs-attr">open</span>:jest.<span class="hljs-title function_">fn</span>(),        <span class="hljs-attr">send</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;            <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()=&gt;</span>&#123;                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>);                <span class="hljs-variable language_">this</span>.<span class="hljs-property">response</span> = <span class="hljs-string">&quot;ok&quot;</span>                <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onload</span>()            &#125;)        &#125;,    &#125;&#125;)<span class="hljs-title function_">describe</span>(<span class="hljs-string">&#x27;xhr mock&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;    <span class="hljs-comment">/**     * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">XMLHttpRequest</span>&#125;     */</span>    <span class="hljs-keyword">let</span> xhr;    <span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">() =&gt;</span> &#123;        xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();    &#125;);    <span class="hljs-title function_">it</span>(<span class="hljs-string">&#x27;should get ok&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">done</span>) =&gt;</span> &#123;        xhr.<span class="hljs-title function_">open</span>(<span class="hljs-string">&quot;http://test.com/rest/abc&quot;</span>);        xhr.<span class="hljs-property">onload</span>= <span class="hljs-function">()=&gt;</span>&#123;            <span class="hljs-title function_">expect</span>(xhr.<span class="hljs-property">response</span>).<span class="hljs-title function_">toBe</span>(<span class="hljs-string">&quot;ok&quot;</span>)            <span class="hljs-title function_">done</span>();        &#125;        xhr.<span class="hljs-title function_">send</span>();    &#125;);&#125;);</code></pre><p>è¿™æ ·æˆ‘ä»¬å°±æˆåŠŸmockä¸€ä¸ªxhræ¥å£äº†ï¼Œä¸è¿‡ç°åœ¨è¿˜æ˜¯å­˜åœ¨é—®é¢˜ï¼Œä¸èƒ½æ ¹æ®è·¯å¾„è¿”å›ä¸åŒçš„æ•°æ®ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç»§ç»­ä¿®æ”¹ä¸‹æˆ‘ä»¬çš„æ–¹æ³•</p><pre><code class="hljs"><span class="hljs-keyword">let</span> mockCache = &#123;&#125;;<span class="hljs-keyword">function</span> <span class="hljs-title function_">mockApi</span>(<span class="hljs-params">path,data</span>)&#123;    mockCache[path] = data;&#125;<span class="hljs-comment">// jest.mock(implementation)æ˜¯ jest.fn().mockImplementation(implementation)</span><span class="hljs-comment">// ç¼©å†™</span><span class="hljs-variable language_">global</span>.<span class="hljs-property">XMLHttpRequest</span> = jest.<span class="hljs-title function_">fn</span>().<span class="hljs-title function_">mockImplementation</span>(<span class="hljs-function">()=&gt;</span>&#123;    <span class="hljs-keyword">return</span> &#123;        <span class="hljs-attr">open</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">type,path</span>)&#123;            <span class="hljs-variable language_">this</span>.<span class="hljs-property">response</span> = mockCache[path]        &#125;,        <span class="hljs-attr">send</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onload</span>()        &#125;,    &#125;&#125;)<span class="hljs-title function_">describe</span>(<span class="hljs-string">&#x27;xhr mock&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;    <span class="hljs-comment">/**     * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">XMLHttpRequest</span>&#125;     */</span>    <span class="hljs-keyword">let</span> xhr;    <span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">() =&gt;</span> &#123;        xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();    &#125;);    <span class="hljs-title function_">it</span>(<span class="hljs-string">&#x27;should get ok&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">done</span>) =&gt;</span> &#123;        <span class="hljs-title function_">mockApi</span>(<span class="hljs-string">&quot;http://test.com/rest/abc&quot;</span>,<span class="hljs-string">&quot;ok&quot;</span>)        xhr.<span class="hljs-title function_">open</span>(<span class="hljs-string">&quot;get&quot;</span>,<span class="hljs-string">&quot;http://test.com/rest/abc&quot;</span>);        xhr.<span class="hljs-property">onload</span>= <span class="hljs-function">()=&gt;</span>&#123;            <span class="hljs-title function_">expect</span>(xhr.<span class="hljs-property">response</span>).<span class="hljs-title function_">toBe</span>(<span class="hljs-string">&quot;ok&quot;</span>)            <span class="hljs-title function_">done</span>();        &#125;        xhr.<span class="hljs-title function_">send</span>();    &#125;);    <span class="hljs-title function_">it</span>(<span class="hljs-string">&#x27;should get &#123;abc: 123&#125;&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">done</span>) =&gt;</span> &#123;        <span class="hljs-title function_">mockApi</span>(<span class="hljs-string">&quot;http://test.com/rest/abc&quot;</span>,&#123;<span class="hljs-attr">abc</span>:<span class="hljs-number">123</span>&#125;)        xhr.<span class="hljs-title function_">open</span>(<span class="hljs-string">&quot;get&quot;</span>,<span class="hljs-string">&quot;http://test.com/rest/abc&quot;</span>);        xhr.<span class="hljs-property">onload</span>= <span class="hljs-function">()=&gt;</span>&#123;            <span class="hljs-title function_">expect</span>(xhr.<span class="hljs-property">response</span>).<span class="hljs-title function_">toStrictEqual</span>(&#123;<span class="hljs-attr">abc</span>:<span class="hljs-number">123</span>&#125;)            <span class="hljs-title function_">done</span>();        &#125;        xhr.<span class="hljs-title function_">send</span>();    &#125;);&#125;);</code></pre><p>å‰©ä¸‹çš„è¿˜å¯ä»¥ç»§ç»­æ‰©å……ï¼Œä½†æ˜¯åˆ°äº†è¿™éƒ¨åˆ†å°±å¤Ÿæˆ‘çš„éœ€æ±‚ç”¨äº†ã€‚</p><p>ç®€å•çš„è½®å­è‡ªå·±æï¼Œä»£ç ç®€æ´åˆæ˜äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> post </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jest </tag>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åºå¹•</title>
      <link href="/2020/11/18/hello-world/"/>
      <url>/2020/11/18/hello-world/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä»£ç æ˜¯ä¸€ç§ç”Ÿæ´»æ–¹å¼</p></blockquote><p>ä»Šå¹´ç»ˆäºå¿å¿ƒèŠ±é’±ä¹°ä¸‹ä¸€ä¸ªè‡ªå·±çš„æœåŠ¡å™¨äº†ï¼Œç¦»æˆä¸ºçœŸæ­£ç¨‹åºå‘˜çš„åˆç¬¬ä¸€æ­¥ã€‚</p><h4 id="åå­—èµ·æº">åå­—èµ·æº</h4><p>æœ¬æƒ³èµ·åå«åšè‹é‘«ï¼Œå› ä¸ºåå­—é‡åç‡å¤ªé«˜äº†ï¼Œæ”¹åä¸ºè‹é‘« 2017ã€‚</p><p>2017 å¹´å¯ä»¥ç®—åšæˆ‘çš„ç¼–ç¨‹å…ƒå¹´äº†å§ï¼Œå¤§æ¦‚æ˜¯è‡ªå·±ç®—çš„ç†è§£ä»£ç çš„ä¸€å¹´ï¼ˆççŒ«ç¢°è§äº†æ­»è€—å­ï¼‰ã€‚</p><p>ä¹Ÿæ˜¯è¿™ä¸€å¹´åŠ å…¥äº† githubï¼Œæ­£å¥½è¿˜èƒ½å’Œ github ä¸€ä¸ªåå­—ã€‚</p><p>æ°å·§åˆšå¥½ <a href="http://suxin2017.cc">suxin2017.cc</a> è¿™ä¸ªåŸŸåä¹Ÿæ²¡è¢«åˆ«äººæ³¨å†Œè¿‡è¿˜å¾ˆä¾¿å®œå“ˆå“ˆå“ˆå“ˆã€‚</p><h4 id="æƒ³åšäº›ä»€ä¹ˆ">æƒ³åšäº›ä»€ä¹ˆ</h4><p>å†™ä»£ç çœŸçš„æ˜¯ä¸€ä»¶å¾ˆæœ‰æ„æ€çš„äº‹æƒ…ï¼Œæƒ³åšçš„è¶Šæ¥è¶Šå¤šï¼Œä½†æ˜¯éƒ½éœ€è¦ä¸€ä¸ªæ°¸ä¸åœæ­‡çš„æ‰“å·¥äººï¼ˆæœåŠ¡å™¨ï¼‰å’Œæˆ‘ä¸€èµ·åœ¨äº’è”ç½‘ä¸Šé€ ä½œã€‚</p><p>æ²¡äº†æœåŠ¡å™¨çš„ç½‘é¡µç³»ç»Ÿæ˜¾å¾—å¾ˆé¸¡è‚‹ï¼Œæœ‰å¾ˆå¤šæ¡æ¡æ¡†æ¡†é™åˆ¶ï¼ŒèŠ±äº†å¥½å¤šå¤§æ´‹ä¸€å’¬ç‰™ç»ˆäºæäº†ä¸€ä¸ªäº‘æœåŠ¡å™¨ã€‚</p><p>ç°åœ¨çš„è‡ªå·±ä¸ä¼šæƒ³é‚£ä¹ˆå¤šï¼Œå°±æ˜¯å†™ä¸‹å»å°±å¥½äº†ï¼Œå’Œå½“åˆåœ¨ç®€ä¹¦ä¸Šå†™æ–‡ç« ä¸€æ ·ï¼Œä»€ä¹ˆéƒ½ä¸æƒ³ï¼Œå°±æ˜¯å›¾ä¸ªä¹ã€‚</p><p>ç°åœ¨æƒ³åšçš„å¤§æ¦‚å°±æ˜¯åªæ˜¯æŒç»­è¾“å‡ºï¼Œæ„å»ºè‡ªå·±çš„åªæ˜¯ç†è®ºä½“ç³»ã€‚</p><p>ç¬¬äºŒä¸ªå°±æ˜¯æŠŠè‡ªå·±åšçš„ä¸€äº›ä¸œè¥¿èšåˆèµ·æ¥ï¼Œæ¯”å¦‚æ”¾åˆ°ä¸€ä¸ªå¼•å¯¼é¡µé¢ï¼Œæ–¹ä¾¿è‡ªå·±æŸ¥çœ‹ï¼Œæœ‰äº›ä¸œè¥¿è‡ªå·±åšçš„ç°åœ¨éƒ½å¿«å¿˜è®°äº†ã€‚</p><p>è¿˜æœ‰å°±æ˜¯æƒ³æä¸€ä¸ªåœ¨çº¿ playgroudï¼Œä¸è¿‡ codepen ä¹Ÿå¯ä»¥ç”¨ï¼Œä¹Ÿå°±å…ˆæç½®ä¸€ä¸‹ã€‚</p><p><s>è¿˜æœ‰ä¸ªäººä¸»é¢˜â€¦åšå®¢æ’ä»¶ï¼Œç”šè‡³è‡ªå·±å†™ä¸€ä¸ªå†…å®¹ç®¡ç†ç³»ç»Ÿè¿™éƒ½ä¸æ˜¯æ²¡æœ‰å¯èƒ½ã€‚</s></p><p>æƒ³åšä¸€ä¸ªè½®å­å“¥ï¼Œè‡ªå·±é€ è½®å­ï¼Œæèµ·æ¥ã€‚ã€‚ã€‚</p><h4 id="ç•™ä¸‹äº›ä»€ä¹ˆ">ç•™ä¸‹äº›ä»€ä¹ˆ</h4><p>ä¹‹å‰ github æäº†ä¸ªæ´»åŠ¨æŠŠæˆ‘çš„ä»£ç é€åˆ°åŒ—æå»äº†ï¼Œæ„æ–™ä¹‹å¤–ï¼Œè€Œä¸”å¾ˆåæ‚”æˆ‘æŠŠæˆ‘ä¹‹å‰å†™çš„å°æ¸¸æˆç»™åˆ é™¤äº†ï¼Œè™½ç„¶å†™çš„å¾ˆåƒåœ¾ï¼Œä½†æ˜¯è¿‡ç¨‹è¿˜æ˜¯å¾ˆæœ‰æˆå°±æ„Ÿçš„ï¼Œå”‰ï½ã€‚</p><p>æ›¾ç»ç¿»çœ‹è¿‡ä¸€è¾¹è‡ªå·±çš„å…¬ä¼—å·ï¼Œä¸€äº›ä¹‹å‰å†™çš„æ–‡ç« ï¼Œéšç€æ—¶é—´çš„ä¸åŒæ„Ÿè§¦è‰¯å¤šã€‚</p><p>æˆ‘å¯ä»¥ç«‹é©¬å›å¿†èµ·å½“æ—¶çš„å¿ƒè·¯å†ç¨‹ï¼Œå½“æ—¶æ€ä¹ˆæƒ³çš„åƒæ˜¯ä¸€ä»½åªèƒ½æˆ‘è‡ªå·±è§£ç çš„ç§˜æ–‡ï¼Œåœ¨å¤§è„‘ä¸­ä¸€é¡µä¸€é¡µæ’­æ”¾ç€ã€‚</p><p>å†™ç¬¬ä¸€ä¸ª js é£æœºå°æ¸¸æˆï¼Œè´ªåƒè›‡æ²¡ææˆçš„åƒè±†å­æ¸¸æˆï¼Œçˆ¬å»æ•£æ–‡ç½‘æ—¶å€™è‡ªå·±æ‹¿æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ç½‘é¡µæ–‡æœ¬çš„å‚»å‚»è¡Œä¸ºï¼Œæ¨¡æ‹Ÿç™»é™†å­¦æ ¡æˆç»©æŸ¥è¯¢æœºå™¨äººï¼Œç°åœ¨è§‰å¾—ååˆ†æœ‰è¶£ã€‚</p><p>emmâ€¦å¹´é¾„è¶Šå¤§è®°å¿†å°±ä¼šä¸å¥½å°±æ˜¯å¾—ç»å¸¸è‡ªå·±è®°äº›ä»€ä¹ˆï¼Œç•™ä¸‹ä¸€ä»½å°è®°ï¼ˆé’ç¥¨å°è®°â€¦æ²¡é’±äº†ä»–ä»¬ä¼šæŠŠæˆ‘æœåŠ¡å™¨å›æ”¶äº†â€¦ï¼‰ä¸è¿‡æˆ‘è¿˜æœ‰å¥½å¤šå…¶ä»–å¤‡ä»½å“ˆå“ˆå“ˆå“ˆ</p>]]></content>
      
      
      <categories>
          
          <category> æ„Ÿæ‚Ÿ </category>
          
          <category> post </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äººç”Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
